example-title,node.js,coffeescript,livescript ,python,php,ruby
,,,,,,
comparison,,,https://www.npmjs.com/package/ramda-cli,,,
,,,,,,
wikipedia,,https://en.wikipedia.org/wiki/CoffeeScript,https://en.wikipedia.org/wiki/LiveScript,,,
,,,,,,
repo-issues,,https://github.com/jashkenas/coffeescript/issues,https://github.com/gkz/LiveScript/issues,,,
reddit,,https://www.reddit.com/r/coffeescript/,,,,
forum,,,,,,
documentation,,https://coffeescript.org/#language,https://livescript.net/#introduction,,,
documentation2,,,,,,
wiki,,https://github.com/jashkenas/coffeescript/wiki,,,,
SO,,https://stackoverflow.com/tags/coffeescript,,,,
,,,,,,
rosettacode,,,,,,
cheatsheet,,,,,,
symbol index,,,,https://docs.python.org/3/genindex-Symbols.html,,
,,,,,,
,,,,,,
see also,,,,,,
categories,,"significant-indents, transpiler","significant-indents, transpiler",,,
,,,,,,
,,,,,,
requirements url,,,,,,
"requirements, tested",,,,,,
,,,,,,
,,,,,,
,,,,,,
"installation, beginner",,,,,,
"installation, non-beginner",,,,,,
installation test,,,,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
,,,,,,
version,,,,,,
,node.js,,,python,php,ruby
version used,6.11,,,3.6,7,2.3
show version,$ node --version,,,"$ python -V
$ python --version",$ php --version,$ ruby --version
implicit prologue,"// npm install lodash
const _ = require('lodash');",,#prelude,"import os, re, sys",# sudo apt install php-mbstring,none
,,,,,,
,,,,,,
config files,,,,,,
troubleshooting,,,,,,
,,,,,,
grammar and execution,,,,,,
,node.js,,,python,php,ruby
interpreter,$ node foo.js,,,$ python foo.py,$ php -f foo.php,$ ruby foo.rb
repl,$ node,,lsc,$ python,$ php -a,$ irb
repl history file,,"historyMaxInputSize: 10240
",touch ......,,,
,,,,,,
,,,,,,
,,,,,,
command line program,"$ node -e ""console.log('hi!');""",,,"$ python -c 'print(""hi!"")'","$ php -r 'echo ""hi!\n"";'","$ ruby -e 'puts ""hi!""'"
block delimiters,{},,,: and offside rule,{},"{}
do end"
statement separator,"; or newline

newline not separator inside (), [], {}, """", '', or after binary operator

newline sometimes not separator when following line would not parse as a valid statement",,,"newline or ;

newlines not separators inside (), [], {}, triple quote literals, or after backslash: \",";

statements must be semicolon terminated inside {}","newline or ;

newlines not separators inside (), [], {}, ``, '', """", or after binary operator or backslash: \"
source code encoding,source is always UTF-8,,,"Python 3 source is UTF-8 by default; Python 2 source is US-ASCII

# -*- coding: us-ascii -*-",none,"Ruby 2.0 source is UTF-8 by default

# -*- coding: utf-8 -*-"
end-of-line comment,// comment,,# comment,# comment,"// comment
# comment",# comment
multiple line comment,"/* line
another line */",,,"use triple quote string literal:

'''comment line
another line'''","/* comment line
another line */",#ERROR!
,,,,,,
,,,,,,
,,,,,,
,,,,,,
variables and expressions,,,,,,
,node.js,,,python,php,ruby
local variable,"// new in ES6:
let x = 1;
let y = 2, z = 3;

// older alternative to let:
var x = 1;

// let local scope is nearest
// enclosing block; var local scope
// is nearest function body.

// var variables are visible to all code
// in the function body; even code
// preceding the var statement.",,,"# in function body:
x = 1
y, z = 2, 3","# in function body:
$x = 1;
list($y, $z) = [2, 3];","x = 1
y, z = 2, 3"
file scope variable,"// outside any function body:
let n = 1;

incrFileVar () { n++; }",,,none,none,none
global variable,"global.g = 1;

incrGlobal () { global.g++; }",,,"g = 1

def incr_global():
 global g
 g += 1","$g = 1;

function incr_global() {
 global $g;
 ++$g;
}","$g = 1

def incr_global
 $g += 1
end"
constant,"// new in ES6
const PI = 3.14;",,,"# uppercase identifiers
# constant by convention
PI = 3.14","define(""PI"", 3.14);

const PI = 3.14;","# warning if capitalized
# identifier is reassigned
PI = 3.14"
assignment,v = 1;,,,"# assignments can be chained
# but otherwise don't return values:
v = 1",$v = 1;,v = 1
parallel assignment,"// new in ES6:
let [x, y, z] = [1, 2, 3];",,,"x, y, z = 1, 2, 3

# raises ValueError:
x, y = 1, 2, 3

# raises ValueError:
x, y, z = 1, 2","list($x, $y, $z) = [1 ,2, 3];

# 3 is discarded:
list($x, $y) = [1, 2, 3];

# $z set to NULL:
list($x, $y, $z) = [1, 2];","x, y, z = 1, 2, 3

# 3 is discarded:
x, y = 1, 2, 3

# z set to nil:
x, y, z = 1, 2"
swap,"// new in ES6:
[x, y] = [y, x];",,,"x, y = y, x","list($x, $y) = [$y, $x];","x, y = y, x"
"compound assignment
arithmetic, string, logical, bit","=+= -= *= /= none %=
+=
none
<<= >>= &= |= ^=",,,"# do not return values:
+= -= *= /= //= %= **=
+= *=
&= |= ^=
<<= >>= &= |= ^=",#ERROR!,#ERROR!
increment and decrement,"let x = 1;
let y = ++x;
let z = --y;",,,none,"$x = 1;
$y = ++$x;
$z = --$y;","x = 1
# x and y not mutated:
y = x.succ
z = y.pred"
null,null,,,None,NULL # case insensitive,nil
null test,v === null,,,v is None,"is_null($v)
! isset($v)","v == nil
v.nil?"
undefined variable,"Evaluates as undefined

Use the triple equality === operator to test for this value.",,,raises NameError,Evaluates as NULL,raises NameError
conditional expression,x > 0 ? x : -x,,,x if x > 0 else -x,$x > 0 ? $x : -$x,x > 0 ? x : -x
arithmetic and logic,,,,,,
,node.js,,,python,php,ruby
true and false,true false,,,True False,TRUE FALSE # case insensitive,true false
falsehoods,false null undefined '' 0 NaN,,,False None 0 0.0 '' [] {},"FALSE NULL 0 0.0 """" ""0"" []",false nil
logical operators,&& || !,,,and or not,"&& || !
lower precedence:
and or xor","&& || !
lower precedence:
and or not"
relational operators,"=== !== < > >= <=

perform type coercion:
== !=",,,"relational operators are chainable:
== != > < >= <=",#ERROR!,#ERROR!
min and max,"Math.min(1, 2, 3)
Math.max(1, 2, 3)

Math.min.apply(Math, [1, 2, 3])
Math.max.apply(Math, [1, 2, 3])",,,"min(1, 2, 3)
max(1, 2, 3)

min([1, 2, 3])
max([1, 2, 3])","min(1, 2, 3)
max(1, 2, 3)
$a = [1, 2, 3]
min($a)
max($a)","[1, 2, 3].min
[1, 2, 3].max"
"arithmetic operators
addition, subtraction, multiplication, float division, quotient, remainder",=+ - * / none %,,,#ERROR!,#ERROR!,#ERROR!
integer division,Math.floor(22 / 7),,,22 // 7,(int)(22 / 7),22 / 7
divmod,none,,,"q, r = divmod(22, 7)",none,"q, r = 22.divmod(7)"
integer division by zero,"Returns Infinity, NaN, or -Infinity depending upon sign of dividend.

There are literals for Infinity and NaN.",,,raises ZeroDivisionError,returns FALSE with warning,raises ZeroDivisionError
float division,22 / 7,,,"22 / 7

# Python 2:
float(22) / 7",22 / 7,"22.to_f / 7

22.fdiv(7)"
float division by zero,same behavior as for integers,,,raises ZeroDivisionError,returns FALSE with warning,"returns -Infinity, NaN, or Infinity"
power,"Math.pow(2, 32)",,,2 ** 32,"pow(2, 32)",2 ** 32
sqrt,Math.sqrt(2),,,"import math

math.sqrt(2)",sqrt(2),"include Math

sqrt(2)"
sqrt -1,NaN,,,"# raises ValueError:
import math
math.sqrt(-1)

# returns complex float:
import cmath
cmath.sqrt(-1)",NaN,"Math.sqrt(-1) raises Math::DomainError unless require 'complex' is in effect.

(-1) ** 0.5 is (0+1.0i)"
transcendental functions,Math.exp Math.log Math.sin Math.cos Math.tan Math.asin Math.acos Math.atan Math.atan2,,,"from math import exp, log, \
sin, cos, tan, asin, acos, atan, atan2",exp log sin cos tan asin acos atan atan2,"include Math

exp log sin cos tan asin acos atan atan2"
"transcendental constants
π and e","Math.PI
Math.E",,,"import math

math.pi math.e",M_PI M_E,"include Math

PI E"
float truncation,"none
Math.round(3.1)
Math.floor(3.1)
Math.ceil(3.1)",,,"import math

int(x)
int(round(x))
math.ceil(x)
math.floor(x)","(int)$x
round($x)
ceil($x)
floor($x)","x.to_i
x.round
x.ceil
x.floor"
absolute value,Math.abs(-3),,,abs(x),abs($x),x.abs
integer overflow,all numbers are floats,,,becomes arbitrary length integer of type long,converted to float,becomes arbitrary length integer of type Bignum
float overflow,Infinity,,,raises OverflowError,INF,Infinity
rational construction,none,,,"from fractions import Fraction

x = Fraction(22, 7)",none,"22 / 7r
22r / 7"
rational decomposition,none,,,"x.numerator
x.denominator",none,"(22 / 7r).numerator
(22 / 7r).denominator"
complex construction,none,,,z = 1 + 1.414j,none,z = 1 + 1.414i
"complex decomposition
real and imaginary component, argument, absolute value, conjugate",none,,,"import cmath

z.real
z.imag
cmath.phase(z)
abs(z)
z.conjugate()",none,"(1 + 3i).real
(1 + 3i).imag
(1 + 3i).arg
(1 + 3i).abs
(1 + 3i).conj"
"random number
uniform integer, uniform float, normal float","Math.floor(Math.random() * 100)
Math.random()
none",,,"import random

random.randint(0, 99)
random.random()
random.gauss(0, 1)","rand(0,99)
lcg_value()
none","rand(100)
rand
none"
"random seed
set, get, restore",none,,,"import random

random.seed(17)
seed = random.getstate()
random.setstate(seed)","srand(17);

none","srand(17)

seed = srand
srand(seed)"
bit operators,<< >> & | ^ ~,,,<< >> & | ^ ~,<< >> & | ^ ~,<< >> & | ^ ~
"binary, octal, and hex literals","none
052 // deprecated
0x2a",,,"0b101010
0o52 # also 052 in Python 2
0x2a","0b101010
052
0x2a","0b101010
052
0x2a"
"radix
convert integer to and from string with radix","(42).toString(7)
parseInt('60', 7)",,,"none
int('60', 7)","base_convert(""42"", 10, 7);
base_convert(""60"", 7, 10);","42.to_s(7)
""60"".to_i(7)"
strings,,,,,,
,node.js,,,python,php,ruby
string type,String,,,"str

# Python 2:
unicode","# array of bytes:
string",String
string literal,"don\'t say ""no""'
""don't say \""no\""""",,"\word","don\'t say ""no""'
""don't say \""no\""""
""don't "" 'say ""no""'

# Python 2 (and Python 3):
u'lorem'
u""ipsum""","""don't say \""no\""""
'don\'t say ""no""'","""don't say \""no\""""
'don\'t say ""no""'
""don't "" 'say ""no""'"
newline in literal,"// backquote literals only:
`first line
second line`

// Backslashes can be used to break
// long strings.",,,"# triple quote literals only:
'''first line
second line'''

""""""first line
second line""""""","first line
second line'

""first line
second line""","first line
second line'

""first line
second line"""
literal escapes,"single and double quotes:
\b \f \n \r \t \v \xhh \"" \' \\
\uhhhh \u{hhhhh}",,,"\newline \\ \' \"" \a \b \f \n \r \t \v \ooo \xhh \uhhhh \Uhhhhhhhh

In Python 2, \u and \U only available in string literals with u prefix","double quoted:
\f \n \r \t \v \xhh \$ \"" \\ \ooo

single quoted:
\' \\","double quoted:
\a \b \cx \e \f \n \r \s \t \v \xhh \ooo \uhhhh \u{hhhhh}

single quoted:
\' \\"
here document,none,,,none,"$word = ""amet"";

$s = <<<EOF
lorem ipsum
dolor sit $word
EOF;","word = ""amet""

s = <<EOF
lorem ipsum
dolor sit #{word}
EOF"
variable interpolation,"let count = 3;
let item = 'ball';
let s = `${count} ${item}s`;",,"""#""","count = 3
item = 'ball'
print('{count} {item}s'.format(
 **locals()))

# Python 3.6:
print(f'{count} {item}s')","$count = 3;
$item = ""ball"";
echo ""$count ${item}s\n"";","count = 3
item = ""ball""
puts ""#{count} #{item}s"""
expression interpolation,`1 + 1 = ${1 + 1}`,,,"1 + 1 = {}'.format(1 + 1)

# Python 3.6:
f'1 + 1 = {1 + 1}'",none,"""1 + 1 = #{1 + 1}"""
format string,"// None; use string concatenation.
// Evaluates to ""12.35"":
12.3456.toFixed(2)",,,"lorem %s %d %f' % ('ipsum', 13, 3.7)

fmt = 'lorem {0} {1} {2}'
fmt.format('ipsum', 13, 3.7)","$fmt = ""lorem %s %d %f"";
sprintf($fmt, ""ipsum"", 13, 3.7);","""lorem %s %d %f"" % [""ipsum"", 13, 3.7]"
are strings mutable?,no,,,no,"$s = ""bar"";
$s2 = $s;
# sets s to ""baz""; s2 is unchanged:
$s[2] = ""z"";","s = ""bar""
s2 = s
# sets s and s2 to ""baz"":
s[2] = ""z"""
copy string,none,,,none,$s2 = $s;,"s = ""bar""
s2 = s.clone
# s2 is not altered:
s[2] = ""z"""
concatenate,"s = 'Hello, ' + 'World!';",,+,"s = 'Hello, '
s2 = s + 'World!'

# juxtaposition can be used to
# concatenate literals:
s2 = 'Hello, ' ""World!""","$s = ""Hello, "";
$s2 = $s . ""World!"";","s = ""Hello, ""
s2 = s + ""World!""

# juxtaposition can be used to
# concatenate literals:
s2 = ""Hello, "" 'World!'"
replicate,"let hbar = _.repeat('-', 80);",,,hbar = '-' * 80,"$hbar = str_repeat(""-"", 80);","hbar = ""-"" * 80"
"translate case
to upper, to lower","lorem'.toUpperCase()
'LOREM'.toLowerCase()",,,"lorem'.upper()
'LOREM'.lower()","mb_strtoupper(""lorem"")
mb_strtolower(""LOREM"")
# strtoupper/strtolower are ASCII only","""lorem"".upcase
""LOREM"".downcase"
"capitalize
string, words","_.capitalize('lorem');
none",,,"import string

'lorem'.capitalize()
string.capwords('lorem ipsum')","# ASCII only:
ucfirst(strtolower(""lorem""))
ucwords(strtolower(""lorem ipsum""))
# Unicode title case:
mb_convert_case(""lorem ipsum"", MB_CASE_TITLE)","""lorem"".capitalize
none"
"trim
both sides, left, right"," lorem '.trim()
' lorem'.trimLeft()
'lorem '.trimRight()",,," lorem '.strip()
' lorem'.lstrip()
'lorem '.rstrip()","trim("" lorem "")
ltrim("" lorem"")
rtrim(""lorem "")",""" lorem "".strip
"" lorem"".lstrip
""lorem "".rstrip"
"pad
on right, on left, centered","_.padStart('lorem', 10)
_.padEnd('lorem', 10)
_.pad('lorem', 10)",,,"lorem'.ljust(10)
'lorem'.rjust(10)
'lorem'.center(10)","$s = ""lorem"";
$delta = strlen($s) - mb_strlen($s);
str_pad($s, 10 + $delta)
str_pad(""$s, 10 + $delta, "" "", STR_PAD_LEFT)
str_pad($s, 10 + $delta, "" "", STR_PAD_BOTH)","""lorem"".ljust(10)
""lorem"".rjust(10)
""lorem"".center(10)"
number to string,value: ' + 8,,,value: ' + str(8),"""value: "" . 8","""value: "" + 8.to_s"
format float,' + Math.round(Math.PI * 100) / 100,,,"import math

'%.2f' % math.pi
'{:.3}'.format(math.pi)
# Python 3.6:
f'{math.pi:.{3}}'","number_format(M_PI, 2)","include Math

'%.2f' % PI
""#{PI.round(2)}"""
string to number,"7 + parseInt('12;, 10)
73.9 + parseFloat('.037')

// 12:
parseInt('12A')
// NaN:
parseInt('A')",,,"7 + int('12')
73.9 + float('.037')

# raises ValueError:
int('12A')
# raises ValueError:
int('A')","7 + ""12""
73.9 + "".037""

# 12:
0 + ""12A""
# 0:
0 + ""A""","7 + ""12"".to_i
73.9 + "".037"".to_f

# 12:
""12A"".to_i
# 0:
""A"".to_i"
string join,"['do', 're', 'mi'].join(' ')",,," '.join(['do', 're', 'mi', 'fa'])

# raises TypeError:
' '.join([1, 2, 3])","$a = [""do"", ""re"", ""mi"", ""fa""];
implode("" "", $a)","%w(do re mi fa).join(' ')

# implicitly converted to strings:
[1, 2, 3].join(' ')"
split,"// [ 'do', 're', '', 'mi', '' ]:
'do re mi '.split(' ')

// [ 'do', 're', 'mi', '' ]:
'do re mi '.split(/\s+/)",,,"# ['do', 're', '', 'mi', '']:
'do re mi '.split(' ')

# ['do', 're', 'mi']:
'do re mi '.split()","# [ ""do"", ""re"", """", ""mi"", """" ]:
explode("" "", ""do re mi "")

# [ ""do"", ""re"", ""mi"", """" ]:
preg_split('/\s+/', ""do re mi "")","# [""do"", ""re"", """", ""mi""]:
""do re mi "".split(/ /)

# [""do"", ""re"", ""mi""]:
""do re mi "".split"
split in two,"do re mi fa'.split(/\s+/, 2)",,,"do re mi fa'.split(None, 1)","preg_split('/\s+/', ""do re mi fa"", 2)","""do re mi fa"".split(/\s+/, 2)"
split and keep delimiters,none,,,"re.split('(\s+)', 'do re mi fa')","preg_split('/(\s+)/', ""do re mi fa"",
 NULL, PREG_SPLIT_DELIM_CAPTURE)","""do re mi fa"".split(/(\s+)/)"
prefix and suffix test,"foobar'.startsWith('foo')
'foobar'.endsWith('bar')",,,"foobar'.startswith('foo')
'foobar'.endswith('bar')",,"foobar'.start_with?('foo')
'foobar'.end_with?('bar')"
length,lorem'.length,,,len('lorem'),"mb_strlen(""lorem"")
# strlen() counts bytes","""lorem"".length
""lorem"".size"
"index of substring
first, last","// returns -1 if not found:
'lorem ipsum'.indexOf('ipsum')",,,"# raises ValueError if not found:
'do re re'.index('re')
'do re re'.rindex('re')

# returns -1 if not found:
'do re re'.find('re')
'do re re'.rfind('re')","# returns FALSE if not found:
mb_strpos(""do re re"", ""re"")
mb_strrpos(""do re re"", ""re"")","# returns nil if not found:
""do re re"".index(""re"")
""do re re"".rindex(""re"")"
"extract substring
by start and length, by start and end, by successive starts","lorem ipsum'.substr(6, 5)
'lorem ipsum'.substring(6, 11)",,,"none
none
'lorem ipsum'[6:11]","mb_substr(""lorem ipsum"", 6, 5)
none
none","""lorem ipsum""[6, 5]
""lorem ipsum""[6..10]
""lorem ipsum""[6...11]"
byte array type,Buffer,,,"bytes

# In Python 2, str also byte array type",string,Array of Fixnum
byte array to string,"let a = Buffer.from([0xce, 0xbb]);
let s = a.toString('utf-8');",,,s = b'\xce\xbb'.decode('utf-8'),strings are byte arrays,"a = ""\u03bb"".bytes
s = a.pack(""C*"").force_encoding('utf-8')"
string to byte array,a = Buffer.from('\u03bb'),,,"a = '\u03bb'.encode('utf-8')

# Python 2:
a = u'\u03bb'.encode('utf-8')",strings are byte arrays,"a = ""\u03bb"".bytes"
character lookup,lorem ipsum'[6],,,lorem ipsum'[6],"mb_substr(""lorem ipsum"", 6, 1)
# byte lookup:
""lorem ipsum""[6]","""lorem ipsum""[6]"
chr and ord,"String.fromCharCode(65)
'A'.charCodeAt(0)",,,"chr(65)
ord('A')","# ASCII only:
chr(65)
ord(""A"")","65.chr('UTF-8')
""A"".ord"
to array of characters,abcd'.split(''),,,list('abcd'),"str_split(""abcd"")","""abcd"".split("""")"
translate characters,none,,,"from string import ascii_lowercase

ins = ascii_lowercase
outs = ins[13:] + ins[:13]
table = str.maketrans(ins, outs)
'hello'.translate(table)","$ins = implode(range(""a"", ""z""));
$outs = substr($ins, 13, 13) .
 substr($ins, 0, 13);
strtr(""hello"", $ins, $outs)","""hello"".tr(""a-z"", ""n-za-m"")"
delete characters,none,,,"table = {ord(ch): None for ch in ""aeiou""}
""disemvowel me"".translate(table)","$vowels = str_split(""aeiou"");
$s = ""disemvowel me"";
$s = str_replace($vowels, """", $s);","""disemvowel me"".delete(""aeiou"")"
squeeze characters,none,,,"re.sub('(\s)+', r'\1',
 'too much space')","$s = ""too much space"";
$s = = preg_replace('/(\s)+/', '\1', $s);","""too much space"".squeeze("" "")"
regular expressions,,,,,,
,node.js,,,python,php,ruby
"literal, custom delimited literal",/lorem|ipsum/,,,"re.compile(r'lorem|ipsum')
none","/lorem|ipsum/'
'(/etc/hosts)'","/lorem|ipsum/
%r(/etc/hosts)
# double quoted string escapes
# and #{} substitution can be used"
ascii character class abbreviations,". [^\n]
\d [0-9]
\D [^0-9]
\s [ \t\r\n\f]
\S [^ \t\r\n\f]
\w [A-Za-z0-9_]
\W [^A-Za-z0-9_]",,,". [^\n] with re.S modifier matches all chars
\d [0-9]
\D [^0-9]
\s [ \t\r\n\f]
\S [^ \t\r\n\f]
\w [A-Za-z0-9_]
\W [^A-Za-z0-9_]

In Python 3, the above definitions are used when re.A is in effect.",". [^\n]
\d [0-9]
\D [^0-9]
\h [ \t]
\H [^ \t]
\s [ \t\r\n\f]
\S [^ \t\r\n\f]
\w [A-Za-z0-9_]
\W [^A-Za-z0-9_]",". [^\n] with m modifier matches all chars
\d [0-9]
\D [^0-9]
\h [0-9a-fA-F]
\H [^0-9a-fA-F]
\s [ \t\r\n\f]
\S [^ \t\r\n\f]
\w [A-Za-z0-9_]
\W [^A-Za-z0-9_]"
unicode character class abbreviations,none,,,". [^\n] with re.S modifier matches all chars
\d [Nd] Nd: Number, decimal digit
\D [^Nd]
\s [Z\t\n\r\f\v\x1c\x1d\x1e\x1f\x85]
\S [^Z\t\n\r\f\v\x1c\x1d\x1e\x1f\x85]
\w [LN_] L: Letter; N: Number
\W [^LN_]

In Python 2, the above definitions are used when re.U is in effect.","POSIX character classes such as [[:alpha:]] are available, but they match sets of ASCII characters. General category values (e.g. \p{L}, \p{Lu}) can be used. Morever, they can be used inside character classes (.e.g. [\p{L}\p{N}]).",".
\p{Digit}
\p{^Digit}
\p{Space}
\p{^Space}
\p{Word}
\p{^Word}

POSIX character classes (e.g. [[:alpha:]]), general category values (e.g. \p{L}, \p{Lu}), and script names (e.g. \p{Greek}) also supported."
anchors,"^ start of string or line with m modifier
$ end of string or line with m modifier
\b word boundary: \w\W or \W\w
\B non word boundary",,,"^ start of string or line with re.M
$ end of string or line with re.M
\A start of string
\b word boundary: \w\W or \W\w
\B non word boundary
\Z end of string","^ start of string or line with m modifier
$ end of string or line with m modifier
\A start of string
\b word boundary: \w\W or \W\w
\B non word boundary
\z end of string
\Z end of string, excluding final newline","^ start of line
$ end of line
\A start of string
\b unicode-aware word boundary
\B unicode-aware non word boundary
\z end of string
\Z end of string, excluding final newline"
match test,"if (s.match(/1999/)) {
 console.log('party!');
}",,,"if re.search('1999', s):
 print('party!')","if (preg_match('/1999/', $s)) {
 echo ""party!\n"";
}","if /1999/.match(s)
 puts ""party!""
end"
case insensitive match test,Lorem'.match(/lorem/i),,,"re.search('lorem', 'Lorem', re.I)","preg_match('/lorem/i', ""Lorem"")","/lorem/i.match(""Lorem"")"
modifiers,"g used for global substitution and scanning
i make case insensitive
m change meaning of ^ and $
u \u{} syntax and astral character support
y used to scan in loop",,,"re.A change meaning of \b \B \d \D \s \S \w \W
re.I make case insensitive
re.M change meaning of ^ and $
re.S change meaning of .
re.X ignore whitespace outside char class","i make case insensitive
m change meaning of ^ and $
s change meaning of .
x ignore whitespace outside char class","i make case insensitive
o interpolate #{} in literal once
m change meaning of .
x ignore whitespace outside char class"
substitution,"s = 'do re mi mi mi';
s.replace(/mi/g, 'ma');",,,"s = 'do re mi mi mi'
s = re.compile('mi').sub('ma', s)","$s = ""do re mi mi mi"";
$s = preg_replace('/mi/', ""ma"", $s);","s = ""do re mi mi mi""
s.gsub!(/mi/, ""ma"")"
"match, prematch, postmatch","m = /\d{4}/.exec(s);
if (m) {
 match = m[0];
 // no prematch or postmatch
}",,,"m = re.search('\d{4}', s)
if m:
 match = m.group()
 prematch = s[0:m.start(0)]
 postmatch = s[m.end(0):len(s)]",none,"m = /\d{4}/.match(s)
if m
 match = m[0]
 prematch = m.pre_match
 postmatch = m.post_match
end"
group capture,"rx = /^(\d{4})-(\d{2})-(\d{2})$/;
m = rx.exec('2009-06-03');
yr = m[1];
mo = m[2];
dy = m[3];",,,"rx = '(\d{4})-(\d{2})-(\d{2})'
m = re.search(rx, '2010-06-03')
yr, mo, dy = m.groups()","$s = ""2010-06-03"";
$rx = '/(\d{4})-(\d{2})-(\d{2})/';
preg_match($rx, $s, $m);
list($_, $yr, $mo, $dy) = $m;","rx = /(\d{4})-(\d{2})-(\d{2})/
m = rx.match(""2010-06-03"")
yr, mo, dy = m[1..3]"
named group capture,none,,,"rx = '^(?P<file>.+)\.(?P<suffix>.+)$'
m = re.search(rx, 'foo.txt')

m.groupdict()['file']
m.groupdict()['suffix']","$s = ""foo.txt"";
$rx = '/^(?P<file>.+)\.(?P<suffix>.+)$/';
preg_match($rx, $s, $m);

$m[""file""]
$m[""suffix""]","rx = /^(?<file>.+)\.(?<suffix>.+)$/
m = rx.match('foo.txt')

m[""file""]
m[""suffix""]"
scan,let a = 'dolor sit amet'.match(/\w+/g);,,,"s = 'dolor sit amet'
a = re.findall('\w+', s)","$s = ""dolor sit amet"";
preg_match_all('/\w+/', $s, $m);
$a = $m[0];","a = ""dolor sit amet"".scan(/\w+/)"
backreference in match and substitution,"/(\w+) \1/.exec('do do')

'do re'.replace(/(\w+) (\w+)/, '$2 $1')",,,"none

rx = re.compile('(\w+) (\w+)')
rx.sub(r'\2 \1', 'do re')","preg_match('/(\w+) \1/', ""do do"")

$s = ""do re"";
$rx = '/(\w+) (\w+)/';
$s = preg_replace($rx, '\2 \1', $s);","/(\w+) \1/.match(""do do"")

""do re"".sub(/(\w+) (\w+)/, '\2 \1')"
recursive regex,none,,,none,/\(([^()]*|($R))\)/',/(?<foo>\(([^()]*|\g<foo>)*\))/
dates and time,,,,,,
,node.js,,,python,php,ruby
broken-down datetime type,Date,,,datetime.datetime,DateTime,Time
current datetime,let t = new Date();,,,"import datetime

t = datetime.datetime.now()
utc = datetime.datetime.utcnow()","$t = new DateTime(""now"");
$utc_tmz = new DateTimeZone(""UTC"");
$utc = new DateTime(""now"", $utc_tmz);","t = Time.now
utc = Time.now.utc"
current unix epoch,(new Date()).getTime() / 1000,,,"import datetime

t = datetime.datetime.now()
epoch = int(t.strftime(""%s""))",$epoch = time();,epoch = Time.now.to_i
broken-down datetime to unix epoch,Math.round(t.getTime() / 1000),,,"from datetime import datetime as dt

epoch = int(t.strftime(""%s""))",$epoch = $t->getTimestamp();,epoch = t.to_i
unix epoch to broken-down datetime,"let epoch = 1315716177;
let t2 = new Date(epoch * 1000);",,,t = dt.fromtimestamp(1304442000),"$t2 = new DateTime();
$t2->setTimestamp(1304442000);",t = Time.at(1304442000)
format datetime,"// npm install moment
let moment = require('moment');

let t = moment(new Date());
let fmt = 'YYYY-MM-DD HH:mm:ss';
console.log(t.format(fmt));",,,t.strftime('%Y-%m-%d %H:%M:%S'),"strftime(""%Y-%m-%d %H:%M:%S"", $epoch);
date(""Y-m-d H:i:s"", $epoch);
$t->format(""Y-m-d H:i:s"");","t.strftime(""%Y-%m-%d %H:%M:%S"")"
parse datetime,"// npm install moment
let moment = require('moment');

let fmt = 'YYYY-MM-DD HH:mm:ss';
let s = '2011-05-03 10:00:00';
let t = moment(s, fmt);",,,"from datetime import datetime

s = '2011-05-03 10:00:00'
fmt = '%Y-%m-%d %H:%M:%S'
t = datetime.strptime(s, fmt)","$fmt = ""Y-m-d H:i:s"";
$s = ""2011-05-03 10:00:00"";
$t = DateTime::createFromFormat($fmt,
 $s);","require 'date'

s = ""2011-05-03 10:00:00""
fmt = ""%Y-%m-%d %H:%M:%S""
t = DateTime.strptime(s, fmt).to_time"
parse datetime w/o format,"let t = new Date('July 7, 1999');",,,"# pip install python-dateutil
import dateutil.parser

s = 'July 7, 1999'
t = dateutil.parser.parse(s)","$epoch = strtotime(""July 7, 1999"");","require 'date'

s = ""July 7, 1999""
t = Date.parse(s).to_time"
date parts,"t.getFullYear()
t.getMonth() + 1
t.getDate() // getDay() is day of week",,,"t.year
t.month
t.day","(int)$t->format(""Y"")
(int)$t->format(""m"")
(int)$t->format(""d"")","t.year
t.month
t.day"
time parts,"t.getHours()
t.getMinutes()
t.getSeconds()",,,"t.hour
t.minute
t.second","(int)$t->format(""H"")
(int)$t->format(""i"")
(int)$t->format(""s"")","t.hour
t.min
t.sec"
build broken-down datetime,"let yr = 1999;
let mo = 9;
let dy = 10;
let hr = 23;
let mi = 30;
let ss = 0;
let t = new Date(yr, mo - 1, dy,
 hr, mi, ss);",,,"import datetime

yr = 1999
mo = 9
dy = 10
hr = 23
mi = 30
ss = 0
t = datetime.datetime(yr, mo, dy, hr, mi, ss)",,"yr = 1999
mo = 9
dy = 10
hr = 23
mi = 30
ss = 0
t = Time.new(yr, mo, dy, hr, mi, ss)"
datetime subtraction,number containing time difference in milliseconds,,,"datetime.timedelta object

use total_seconds() method to convert to float representing difference in seconds","# DateInterval object if diff method used:
$fmt = ""Y-m-d H:i:s"";
$s = ""2011-05-03 10:00:00"";
$then = DateTime::createFromFormat($fmt, $s);
$now = new DateTime(""now"");
$interval = $now->diff($then);",Float containing time difference in seconds
add duration,"let t1 = new Date();
let delta = (10 * 60 + 3) * 1000;
let t2 = new Date(t1.getTime() + delta);",,,"import datetime

delta = datetime.timedelta(
 minutes=10,
 seconds=3)
t = datetime.datetime.now() + delta","$now = new DateTime(""now"");
$now->add(new DateInterval(""PT10M3S"");","require 'date/delta'

s = ""10 min, 3 s""
delta = Date::Delta.parse(s).in_secs
t = Time.now + delta"
local time zone determination,TZ environment variable or host time zone,,,a datetime object has no time zone information unless a tzinfo object is provided when it is created,"# DateTime objects can be instantiated
# without specifying the time zone
# if a default is set:
$s = ""America/Los_Angeles"";
date_default_timezone_set($s);",if no time zone is specified the local time zone is used
nonlocal time zone,,,,"# pip install pytz
import pytz
import datetime

tmz = pytz.timezone('Asia/Tokyo')
utc = datetime.datetime.utcnow()
utc_dt = datetime.datetime(
 *utc.timetuple()[0:6],
 tzinfo=pytz.utc)
jp_dt = utc_dt.astimezone(tmz)",,"# gem install tzinfo
require 'tzinfo'

tmz = TZInfo::Timezone.get(""Asia/Tokyo"")
jp_time = tmz.utc_to_local(Time.now.utc)"
"time zone info

name and UTC offset",,,,"import time

tm = time.localtime()
 
time.tzname[tm.tm_isdst]
(time.timezone / -3600) + tm.tm_isdst","$tmz = date_timezone_get($t);

timezone_name_get($tmz);
date_offset_get($t) / 3600;","t.zone
t.utc_offset / 3600"
daylight savings test,"// npm install moment
let moment = require('moment');

moment(new Date()).isDST()",,,"import time

tm = time.localtime()
 
tm.tm_isdst","$t->format(""I"");",t.dst?
microseconds,"t.getMilliseconds() * 1000

// [sec, nanosec] since system boot:
process.hrtime()",,,t.microsecond,"list($frac, $sec) = explode("" "", microtime());
$usec = $frac * 1000 * 1000;",t.usec
arrays,,,,,,
,node.js,,,python,php,ruby
literal,"a = [1, 2, 3, 4]",,,"a = [1, 2, 3, 4]","$a = [1, 2, 3, 4];

# older syntax:
$a = array(1, 2, 3, 4);","a = [1, 2, 3, 4]

# a = ['do', 're', 'mi']
a = %w(do re mi)"
size,a.length,,,len(a),count($a),"a.size
a.length"
empty test,"// TypeError if a is null or undefined:
a.length === 0",,,"# None tests as empty:
not a","# NULL tests as empty:
!$a","# NoMethodError if a is nil:
a.empty?"
lookup,a[0],,,"a[0]

# returns last element:
a[-1]","$a[0]

# PHP uses the same type for arrays and
# dictionaries; indices can be negative
# integers or strings","a[0]

# returns last element:
a[-1]"
update,a[0] = 'lorem',,,a[0] = 'lorem',"$a[0] = ""lorem"";","a[0] = ""lorem"""
out-of-bounds behavior,returns undefined,,,"a = []
# raises IndexError:
a[10]
# raises IndexError:
a[10] = 'lorem'","$a = [];
# evaluates as NULL:
$a[10];
# increases array size to one:
$a[10] = ""lorem"";","a = []
# evaluates as nil:
a[10]
# increases array size to 11:
a[10] = ""lorem"""
"element index

first and last occurrence","// return -1 if not found:
[6, 7, 7, 8].indexOf(7)
[6, 7, 7, 8].lastIndexOf(7)",,,"a = ['x', 'y', 'y', 'z']

# raises ValueError if not found:
a.index('y')
none","$a = [""x"", ""y"", ""y"", ""z""];

# returns FALSE if not found:
$i = array_search(""y"", $a, TRUE);
none","a = %w(x y y z)

# return nil if not found:
a.index('y')
a.rindex('y')"
"slice
by endpoints, by length","// select 3rd and 4th elements:
['a', 'b', 'c', 'd'].slice(2, 4)
none",,,"# select 3rd and 4th elements:
a[2:4]
a[2:2 + 2]","# select 3rd and 4th elements:
none
array_slice($a, 2, 2)","# select 3rd and 4th elements:
a[2..3]
a[2, 2]"
slice to end,"['a', 'b', 'c', 'd'].slice(1)",,,a[1:],"array_slice($a, 1)",a[1..-1]
manipulate back,"a = [6, 7, 8];
a.push(9);
i = a.pop();",,,"a = [6, 7, 8]
a.append(9)
a.pop()","$a = [6, 7, 8];
array_push($a, 9);
$a[] = 9; # same as array_push
array_pop($a);","a = [6, 7, 8]
a.push(9)
a << 9 # same as push
a.pop"
manipulate front,"a = [6, 7, 8];
a.unshift(5);
i = a.shift();",,,"a = [6, 7, 8]
a.insert(0, 5)
a.pop(0)","$a = [6, 7, 8];
array_unshift($a, 5);
array_shift($a);","a = [6, 7, 8]
a.unshift(5)
a.shift"
concatenate,"a = [1, 2, 3].concat([4, 5, 6]);",,,"a = [1, 2, 3]
a2 = a + [4, 5, 6]
a.extend([4, 5, 6])","$a = [1, 2, 3];
$a2 = array_merge($a, [4, 5, 6]);
$a = array_merge($a, [4, 5, 6]);","a = [1, 2, 3]
a2 = a + [4, 5, 6]
a.concat([4, 5, 6])"
replicate,Array(10).fill(null),,,"a = [None] * 10
a = [None for i in range(0, 10)]","$a = array_fill(0, 10, NULL);","a = [nil] * 10
a = Array.new(10, nil)"
"copy
address copy, shallow copy, deep copy","a = [1, 2, [3, 4]];
a2 = a;
a3 = a.slice(0);
a4 = JSON.parse(JSON.stringify(a));",,,"import copy

a = [1,2,[3,4]]
a2 = a
a3 = list(a)
a4 = copy.deepcopy(a)","$a = [1, 2, [3, 4]];
$a2 =& $a;
none
$a4 = $a;","a = [1,2,[3,4]]
a2 = a
a3 = a.dup
a4 = Marshal.load(Marshal.dump(a))"
array as function argument,parameter contains address copy,,,parameter contains address copy,parameter contains deep copy,parameter contains address copy
iterate over elements,"[6, 7, 8].forEach((n) => {
 console.log(n);
});

// new in ES6:
for (let n of [6, 7, 8]) {
 console.log(n);
}",,,"for i in [1, 2, 3]:
 print(i)","foreach ([1, 2, 3] as $i) {
 echo ""$i\n"";
}","[1, 2, 3].each { |i| puts i }"
iterate over indices and elements,"for (let i = 0; i < a.length; ++i) {
 console.log(a[i]);
}

// indices not guaranteed to be in order:
for (let i in a) {
 console.log(a[i]);
}",,,"a = ['do', 're', 'mi', 'fa']
for i, s in enumerate(a):
 print('%s at index %d' % (s, i))","$a = [""do"", ""re"", ""mi"" ""fa""];
foreach ($a as $i => $s) {
 echo ""$s at index $i\n"";
}","a = %w(do re mi fa)
a.each_with_index do |s, i|
 puts ""#{s} at index #{i}""
end"
iterate over range,not space efficient; use C-style for loop,,,"# use range() in Python 3:
for i in xrange(1, 1000001):
 code",not space efficient; use C-style for loop,"(1..1_000_000).each do |i|
 code
end"
instantiate range as array,"let a = _.range(1, 11);",,,"a = range(1, 11)
Python 3:
a = list(range(1, 11))","$a = range(1, 10);",a = (1..10).to_a
"reverse
non-destructive, in-place","let a = [1, 2, 3];

let a2 = a.slice(0).reverse();
a.reverse();",,,"a = [1, 2, 3]

a[::-1]
a.reverse()","$a = [1, 2, 3];

array_reverse($a);
$a = array_reverse($a);","a = [1, 2, 3]

a.reverse
a.reverse!"
"sort
non-destructive,
in-place,
custom comparision","let a = [3, 1, 4, 2];

let a2 = a.slice(0).sort();
a.sort();",,,"a = ['b', 'A', 'a', 'B']

sorted(a)
a.sort()
# custom binary comparision
# removed from Python 3:
a.sort(key=str.lower)","$a = [""b"", ""A"", ""a"", ""B""];

none
sort($a);
none, but usort sorts in place","a = %w(b A a B)

a.sort
a.sort!
a.sort do |x, y|
 x.downcase <=> y.downcase
end"
"dedupe
non-destructive, in-place","let a = [1, 2, 2, 3];

let a2 = _.uniq(a);
a = _.uniq(a);",,,"a = [1, 2, 2, 3]

a2 = list(set(a))
a = list(set(a))","$a = [1, 2, 2, 3];

$a2 = array_unique($a);
$a = array_unique($a);","a = [1, 2, 2, 3]

a2 = a.uniq
a.uniq!"
membership,a.includes(7),,,7 in a,"in_array(7, $a)",a.include?(7)
intersection,"_.intersection([1, 2], [2, 3, 4])",,,"{1, 2} & {2, 3, 4}","$a = [1, 2];
$b = [2, 3, 4]
array_intersect($a, $b)","[1, 2] & [2 ,3, 4]"
union,"_.union([1, 2], [2, 3, 4])",,,"{1, 2} | {2, 3, 4}","$a1 = [1, 2];
$a2 = [2, 3, 4];
array_unique(array_merge($a1, $a2))","[1, 2] | [2, 3, 4]"
"relative complement, symmetric difference","_.difference([1, 2, 3], [2])
none",,,"{1, 2, 3} - {2}
{1, 2} ^ {2, 3, 4}","$a1 = [1, 2, 3];
$a2 = [2];
array_values(array_diff($a1, $a2))
none","require 'set'

[1, 2, 3] - [2]
Set[1, 2] ^ Set[2 ,3, 4]"
map,"// callback gets 3 args:
// value, index, array
a.map((x) => x * x)",,,"map(lambda x: x * x, [1, 2, 3])
# or use list comprehension:
[x * x for x in [1, 2, 3]]","array_map(function ($x) {
  return $x * $x;
 }, [1, 2, 3])","[1, 2, 3].map { |o| o * o }"
filter,a.filter((x) => x > 1),,,"filter(lambda x: x > 1, [1, 2, 3])
# or use list comprehension:
[x for x in [1, 2, 3] if x > 1]","array_filter([1, 2, 3],
 function ($x) {
  return $x>1;
 })","[1, 2, 3].select { |o| o > 1 }"
reduce,"a.reduce((m, o) => m + o, 0)",,,"# import needed in Python 3 only
from functools import reduce

reduce(lambda x, y: x + y, [1, 2, 3], 0)","array_reduce([1, 2, 3],
 function($x,$y) {
  return $x + $y;
 }, 0)","[1, 2, 3].inject(0) { |m, o| m + o }"
universal and existential tests,"let a = [1, 2, 3, 4];

a.every((n) => n % 2 === 0)
a.some((n) => n % 2 === 0)",,,"all(i % 2 == 0 for i in [1, 2, 3, 4])
any(i % 2 == 0 for i in [1, 2, 3, 4])",use array_filter,"[1, 2, 3, 4].all? {|i| i.even? }
[1, 2, 3, 4].any? {|i| i.even? }"
shuffle and sample,"let a = [1, 2, 3, 4];

a = _.shuffle(a);
let samp = _.sampleSize([1, 2, 3, 4], 2);",,,"from random import shuffle, sample

a = [1, 2, 3, 4]
shuffle(a)
samp = sample([1, 2, 3, 4], 2)","$a = [1, 2, 3, 4];

shuffle($a);
$samp = array_rand(|[1, 2, 3, 4], 2);","[1, 2, 3, 4].shuffle!
samp = [1, 2, 3, 4].sample(2)"
"flatten
one level, completely","let a = [1, [2, [3, 4]]];

let a2 = _.flatten(a);
let a3 = _.flattenDeep(a);",,,none,none,"a = [1, [2, [3, 4]]]
a2 = a.flatten(1)
a3 = a.flatten"
zip,"let a = _.zip([1, 2, 3], ['a', 'b', 'c']);

// shorter array padded with undefined:
_.zip([1, 2, 3], ['a', 'b'])",,,"list(zip([1, 2, 3], ['a', 'b', 'c']))

# extras in longer array dropped:
list(zip([1, 2, 3], ['a', 'b']))","$a = array_map(NULL,
 [1, 2, 3],
 [""a"", ""b"", ""c""]);

# shorter array padded with NULLs","[1, 2, 3].zip([""a"", ""b"", ""c""])

# shorter array padded with nil:
[1, 2, 3].zip([""a"", ""b""])"
dictionaries,,,,,,
,node.js,,,python,php,ruby
literal,"d = {t: 1, f: 0};
// keys do not need to be quoted if they
// are a legal JavaScript variable name
// and not a reserved word",,,"d = {'t': 1, 'f': 0}","$d = [""t"" => 1, ""f"" => 0];

# older syntax:
$d = array(""t"" => 1, ""f"" => 0);","d = {'t' => 1, 'f' => 0}

# keys are symbols:
symbol_to_int = {t: 1, f: 0}"
size,"_.size(d)
Object.getOwnPropertyNames(d).length",,,len(d),count($d),"d.size
d.length"
lookup,"d.hasOwnProperty(""t"") ? d[""t""] : undefined
d.hasOwnProperty(""t"") ? d.t : undefined

// JavaScript dictionaries are objects
// and inherit properties from Object.",,,d['t'],"$d[""t""]",d['t']
update,"d['t'] = 2;
d.t = 2;",,,"d['t'] = 2

# provide default to avoid KeyError:
d.get('t', None)","$d[""t""] = 2;",d['t'] = 2
missing key behavior,"let d = {};
// undefined:
d[""lorem""];
// adds key/value pair:
d[""lorem""] = ""ipsum"";",,,"d = {}
# raises KeyError:
d['lorem']
# adds key/value pair:
d['lorem'] = 'ipsum'","$d = [];
# NULL:
$d[""lorem""];
# adds key/value pair:
$d[""lorem""] = ""ipsum"";","d = {}
# nil:
d['lorem']
# adds key/value pair:
d['lorem'] = 'ipsum'"
is key present,"d.hasOwnProperty(""t"");",,,y' in d,"array_key_exists(""y"", $d);",d.key?('y')
delete,"delete d[""t""];
delete d.t;",,,"d = {1: True, 0: False}
del d[1]","$d = [1 => ""t"", 0 => ""f""];
unset($d[1]);","d = {1 => true, 0 => false}
d.delete(1)"
"from array of pairs, from even length array","let a = [['a', 1], ['b', 2], ['c', 3]];
let d = _.fromPairs(a);

none",,,"a = [['a', 1], ['b', 2], ['c', 3]]
d = dict(a)

a = ['a', 1, 'b', 2, 'c', 3]
d = dict(zip(a[::2], a[1::2]))",,"a = [['a', 1], ['b', 2], ['c', 3]]
d = Hash[a]

a = ['a', 1, 'b', 2, 'c', 3]
d = Hash[*a]"
merge,"let d1 = {a: 1, b: 2};
let d2 = {b: 3, c: 4};
// d2 overwrites shared keys in d1:
d1 = _.assignIn(d1, d2);",,,"d1 = {'a': 1, 'b': 2}
d2 = {'b': 3, 'c': 4}
d1.update(d2)","$d1 = [""a"" => 1, ""b"" => 2];
$d2 = [""b"" => 3, ""c"" => 4];
$d1 = array_merge($d1, $d2);","d1 = {'a' => 1, 'b' => 2}
d2 = {'b' => 3, 'c' => 4}
d1.merge!(d2)"
invert,"let let2num = {t: 1, f: 0};
let num2let = _.invert(let2num);",,,"to_num = {'t': 1, 'f': 0}
# dict comprehensions added in 2.7:
to_let = {v: k for k, v
 in to_num.items()}","$to_num = [""t"" => 1, ""f"" => 0];
$to_let = array_flip($to_num);","to_num = {'t' => 1, 'f' => 0}
to_let = to_num.invert"
iterate,"for (let k in d) {
 console.log(`value at ${k} is ${d[k]}`);
}",,,"for k, v in d.items():
 print('value at {} is {}'.format(k, v)

# Python 2: use iteritems()","foreach ($d as $k => $v) {
 echo ""value at ${k} is ${v}"";
}","d.each do |k,v|
 puts ""value at #{k} is #{v}""
end"
keys and values as arrays,"Object.keys(d)
_.values(d)",,,"list(d.keys())
list(d.values())

# keys() and values return iterators
# in Python 3 and lists in Python 2","array_keys($d)
array_values($d)","d.keys
d.values"
sort by values,"let cmp = (a, b) => a[1] - b[1];
let d = {t: 1, f: 0};

for (let p of _.toPairs(d).sort(cmp)) {
 console.log(p);
}",,,"from operator import itemgetter

pairs = sorted(d.items(), key=itemgetter(1))

for k, v in pairs:
 print('{}: {}'.format(k, v))","asort($d);

foreach ($d as $k => $v) {
 print ""$k: $v\n"";
}","d.sort_by { |k, v| v }.each do |k, v|
 puts ""#{k}: #{v}""
end"
"default value, computed value",none,,,"from collections import defaultdict

counts = defaultdict(lambda: 0)
counts['foo'] += 1

class Factorial(dict):
 def __missing__(self, k):
  if k > 1:
   return k * self[k-1]
  else:
   return 1

factorial = Factorial()","$counts = [];
$counts['foo'] += 1;

# For computed values and defaults other than
# zero or empty string, extend ArrayObject.","counts = Hash.new(0)
counts['foo'] += 1

factorial = Hash.new do |h,k|
 k > 1 ? k * h[k-1] : 1
end"
functions,,,,,,
,node.js,,,python,php,ruby
define,"function add3 (x1, x2, x3) {
 return x1 + x2 + x3;
}",,,"def add3(x1, x2, x3):
 return x1 + x2 + x3","function add3($x1, $x2, $x3)
{
 return $x1 + $x2 + $x3;
}","def add3(x1, x2, x3)
 x1 + x2 + x3
end

# parens are optional and customarily
# omitted when defining functions
# with no parameters"
invoke,"add3(1, 2, 3)",,,"add3(1, 2, 3)","add3(1, 2, 3);

# function names are case insensitive:
ADD3(1, 2, 3);","add3(1, 2, 3)

# parens are optional:
add3 1, 2, 3"
missing argument behavior,set to undefined,,,raises TypeError if number of arguments doesn't match function arity,set to NULL with warning,raises ArgumentError if number of arguments doesn't match function arity
extra argument behavior,ignored,,,raises TypeError if number of arguments doesn't match function arity,ignored,raises ArgumentError if number of arguments doesn't match function arity
default argument,"// new in ES6:
function myLog (x, base = 10) {
 return Math.log(x) / Math.log(base);
}",,,"import math

def my_log(x, base=10):
 return math.log(x) / math.log(base)

my_log(42)
my_log(42, math.e)","function my_log($x, $base=10)
{
 return log($x) / log($base);
}

my_log(42);
my_log(42, M_E);","def my_log(x, base=10)
 Math.log(x) / Math.log(base)
end

my_log(42)
my_log(42, Math::E)"
variadic function,"function firstAndLast() {
 if (arguments.length >= 1) {
  console.log('first: ' + arguments[0]);
 }
 if (arguments.length >= 2) {
  console.log('last: ' + arguments[1]);
 }
}

// ... operator new in ES6:
function firstAndLast(...a) {
 if (a.length >= 1) {
  console.log('first: ' + a[0]);
 }
 if (a.length >= 2) {
  console.log('last: ' + a[1]);
 }
}",,,"def first_and_last(*a):

 if len(a) >= 1:
  print('first: ' + str(a[0]))

 if len(a) >= 2:
  print('last: ' + str(a[-1]))","function first_and_last()
{

 $arg_cnt = func_num_args();

 if ($arg_cnt >= 1) {
  $n = func_get_arg(0);
  echo ""first: "" . $n . ""\n"";
 }

 if ($arg_cnt >= 2) {
  $a = func_get_args();
  $n = $a[$arg_cnt-1];
  echo ""last: "" . $n . ""\n"";
 }
}","def first_and_last(*a)

 if a.size >= 1
  puts ""first: #{a[0]}""
 end

 if a.size >= 2
  puts ""last: #{a[-1]}""
 end
end"
pass array elements as separate arguments,"let a = [1, 2, 3];

let sum = add3(...a);",,,"a = [2, 3]

add3(1, *a)

# splat operator can only be used once
# and must appear after other
# unnamed arguments","$a = [1, 2, 3];

call_user_func_array(""add3"", $a);","a = [2, 3]

add3(1, *a)

# splat operator can be used multiple
# times and can appear before regular
# arguments"
parameter alias,none,,,none,"function first_and_second(&$a)
{
 return [$a[0], $a[1]];
}",none
named parameters,none,,,"def fequal(x, y, eps=0.01):
 return abs(x - y) < eps

fequal(1.0, 1.001)
fequal(1.0, 1.001, eps=0.1**10)",none,"def fequals(x, y, eps: 0.01)
 (x - y).abs < eps
end

fequals(1.0, 1.001)
fequals(1.0, 1.001, eps: 0.1**10)"
return value,"return arg or undefined.

If invoked with new and return value not an object, returns this.",,,return arg or None,return arg or NULL,return arg or last expression evaluated
multiple return values,"function firstAndSecond(a) {
 return [a[0], a[1]];
}

let [x, y] = firstAndSecond([6, 7, 8]);",,,"def first_and_second(a):
 return a[0], a[1]

x, y = first_and_second([6, 7, 8])","function first_and_second(&$a)
{
 return [$a[0], $a[1]];
}

$a = [6, 7, 8];
list($x, $y) =
 first_and_second($a);","def first_and_second(a)
 return a[0], a[1]
end

x, y = first_and_second([6, 7, 8])"
anonymous function literal,"let square = function (x) {
 return x * x;
};

// => new in ES6:
let square = (x) => { return x * x; };

// expression body variant:
let square = (x) => x * x;",,,"# body must be an expression:
square = lambda x: x * x","$square = function ($x) {
 return $x * $x;
};",square = lambda { |x| x * x }
invoke anonymous function,"square(2)

((x) => (x * x)(2)",,,"square(2)

(lambda x: x * x)(2)",$square(2),"square.call(2)

# alternative syntax:
square[2]"
function as value,let func = add3;,,,func = add3,"$func = ""add3"";",func = lambda { |*args| add3(*args) }
function with private state,"function counter() {
 counter.i += 1;
 return counter.i;
}

counter.i = 0;
console.log(counter());",,,"# state not private:
def counter():
 counter.i += 1
 return counter.i

counter.i = 0
print(counter())","function counter()
{
 static $i = 0;
 return ++$i;
}

echo counter();",none
closure,"function makeCounter () {
 let i = 0;

 return function () {
  i += 1;
  return i;
 };
}

let nays = makeCounter();
console.log(nays());",,,"def make_counter():
 i = 0
 def counter():
  # new in Python 3:
  nonlocal i
  i += 1
  return i
 return counter

nays = make_counter()
print(nays())","function make_counter()
{
 $i = 0;
 return function () use (&$i) {
  return ++$i;
 };
}

$nays = make_counter();
echo $nays();","def make_counter
 i = 0
 return lambda { i +=1; i }
end

nays = make_counter
puts nays.call"
generator,"function * makeCounter () {
 let i = 0;
 while (true) {
  yield ++i;
 }
}

let nays = makeCounter();
for (let cnt of nays) {
 console.log(cnt);
 if (cnt > 100) {
  break;
 }
}",,,"# cf. itertools library

def make_counter():
 i = 0
 while True:
  i += 1
  yield i

nays = make_counter()
# Python 2: nays.next()
print(next(nays))

for cnt in nays:
 print(cnt)
 if cnt > 100:
  break

# Returning without yielding raises
# StopIteration exception.","# PHP 5.5:
function make_counter() {
 $i = 0;
 while (1) {
  yield ++$i;
 }
}

$nays = make_counter();
# does not return a value:
$nays->next();
# runs generator if generator has not
# yet yielded:
echo $nays->current();","def make_counter
 return Fiber.new do
  i = 0
  while true
   i += 1
   Fiber.yield i
  end
 end
end

nays = make_counter
puts nays.resume"
decorator,none,,,"def logcall(f):
 def wrapper(*a, **opts):
  print('calling ' + f.__name__)
  f(*a, **opts)
  print('called ' + f.__name__)
 return wrapper

@logcall
def square(x):
 return x * x",,
invoke operator like function,none,,,"import operator

operator.mul(3, 7)

a = ['foo', 'bar', 'baz']
operator.itemgetter(2)(a)",,"3.*(7)

a = ['foo', 'bar', 'baz']
a.[](2)"
execution control,,,,,,
,node.js,,,python,php,ruby
if,"if (n === 0) {
 console.log('no hits');
} else if (n === 1) {
 console.log('1 hit');
} else {
 console.log(n + ' hits');
}",,,"if 0 == n:
 print('no hits')
elif 1 == n:
 print('one hit')
else:
 print(str(n) + ' hits')","if ( 0 == $n ) {
 echo ""no hits\n"";
} elseif ( 1 == $n ) {
 echo ""one hit\n"";
} else {
 echo ""$n hits\n"";
}","if n == 0
 puts ""no hits""
elsif 1 == n
 puts ""one hit""
else
 puts ""#{n} hits""
end"
switch,"switch (n) {
case 0:
 console.log('no hits\n;);
 break;
case 1:
 console.log('one hit\n');
 break;
default:
 console.log(n + ' hits\n');
}",,,none,"switch ($n) {
case 0:
 echo ""no hits\n"";
 break;
case 1:
 echo ""one hit\n"";
 break;
default:
 echo ""$n hits\n"";
}","case n
when 0
 puts ""no hits""
when 1
 puts ""one hit""
else
 puts ""#{n} hits""
end"
while,"while (i < 100) {
 i += 1;
}",,,"while i < 100:
 i += 1",while ( $i < 100 ) { $i++; },"while i < 100 do
 i += 1
end"
for,"for (let i = 0; i < 10; ++i) {
 console.log(i);
}",,,"for i in range(1, 11):
 print(i)","for ($i = 1; $i <= 10; $i++) {
 echo ""$i\n"";
}",none
break,"for (let i = 30; i < 50; ++i) {
 if (i % 7 === 0) {
  console.log('first multiple: ' + i);
  break;
 }
}",,,break,break,break
continue,"for (let i = 30; i < 50; ++i) {
 if (i % 7 === 0) {
  continue;
 }
 console.log('not divisible: ' + i);
}",,,continue,continue,next
statement modifiers,none,,,none,none,"puts ""positive"" if i > 0
puts ""nonzero"" unless i == 0"
exceptions,,,,,,
,node.js,,,python,php,ruby
base exception,Any value can be thrown.,,,"BaseException

User-defined exceptions should subclass Exception.

In Python 2 old-style classes can be thrown.",Exception,"Exception

User-defined exceptions should subclass StandardError."
predefined exceptions,"Error
 EvalError
 RangeError
 ReferenceError
 SyntaxError
 TypeError
 URIError",,,"BaseException
 Exception
  TypeError
  ImportError
  AssertionError
  ArithmeticError
   FloatingPointError
   OverflowError
   ZeroDivisionError
  SyntaxError
  OSError
  MemoryError
  StopIteration
  Error
  SystemError
  ValueError
   UnicodeError
    UnicodeEncodeError
    UnicodeDecodeError
    UnicodeTranslateError
   UnsupportedOperation
  NameError
  AttributeError
  RuntimeError
  LookupError
   IndexError
   KeyError
  EOFError
 GeneratorExit
 KeyboardInterrupt
 SystemExit","Exception
 LogicException
  BadFunctionCallException
   BadMethodCallException
  DomainException
  InvalidArgumentException
  LengthException
  OutOfRangeException
 RuntimeException
  OutOfBoundsException
  OverflowException
  RangeException
  UnderflowException
  UnexpectedValueException","Exception
 NoMemoryError
 ScriptError
  LoadError
  NotImplementedError
  SyntaxError
 SignalException
 StandardError
  ArgumentError
  IOError
   EOFError
  IndexError
  LocalJumpError
  NameError
  RangeError
  RegexpError
  RuntimeError
  SecurityError
  SocketError
  SystemCallError
   Errno::*
  SystemStackError
  ThreadError
  TypeError
  ZeroDivisionError
 SystemExit
 fatal"
raise exception,"throw new Error(""bad arg"");",,,raise Exception('bad arg'),"throw new Exception(""bad arg"");","# raises RuntimeError
raise ""bad arg"""
catch-all handler,"try {
 risky();
} catch (e) {
 console.log(
  'risky failed: ' + e.message);
}",,,"try:
 risky()
except:
 print('risky failed')","try {
 risky();
} catch (Exception $e) {
 echo ""risky failed: "",
  $e->getMessage(), ""\n"";
}","# catches StandardError
begin
 risky
rescue
 print ""risky failed: ""
 puts $!.message
end"
re-raise exception,"try {
 throw new Error(""bam!"");
} catch (e) {
 console.log('re-raising...');
 throw e;
}",,,"try:
 raise Exception('bam!')
except:
 print('re-raising...')
 raise",,"begin
 raise ""bam!""
rescue
 puts ""re-raising…""
 raise
end

# if rescue clause raises different exception,
# original exception preserved at e.cause"
global variable for last exception,none,,,last exception: sys.exc_info()[1],none,"last exception: $!
backtrace array of exc.: $@
exit status of child: $?"
define exception,"function Bam(msg) {
 this.message = msg;
}

Bam.prototype = new Error;",,,"class Bam(Exception):
 def __init__(self):
  super(Bam, self).__init__('bam!')","class Bam extends Exception
{
 function __construct()
 {
  parent::__construct(""bam!"");
 }
}","class Bam < Exception
 def initialize
  super(""bam!"")
 end
end"
handle exception,"try {
 throw new Bam(""bam!"");
} catch (e) {
 if (e instanceof Bam) {
  console.log(e.message);
 }
 else {
  throw e;
 }
}",,,"try:
 raise Bam()
except Bam as e:
 print(e)","try {
 throw new Bam;
} catch (Bam $e) {
 echo $e->getMessage(), ""\n"";
}","begin
 raise Bam.new
rescue Bam => e
 puts e.message
end"
finally block,"acquireResource();
try {
 risky();
} finally {
 releaseResource();
}",,,"acquire_resource()
try:
 risky()
finally:
 release_resource()","PHP 5.5:
acquire_resource();
try {
 risky();
}
finally {
 release_resource();
}","acquire_resource
begin
 risky
ensure
 release_resource
end"
threads,,,,,,
,node.js,,,python,php,ruby
start thread,,,,"class sleep10(threading.Thread):
 def run(self):
  time.sleep(10)

thr = sleep10()
thr.start()",,thr = Thread.new { sleep 10 }
wait on thread,,,,thr.join(),,thr.join
sleep,,,,"import time

time.sleep(0.5)","# a float argument will be truncated
# to an integer:
sleep(1);",sleep(0.5)
timeout,,,,"import signal, time

class Timeout(Exception): pass

def timeout_handler(signo, fm):
 raise Timeout()

signal.signal(signal.SIGALRM,
 timeout_handler)

try:
 signal.alarm(5)
 might_take_too_long()
except Timeout:
 pass
signal.alarm(0)",use set_time_limit to limit execution time of the entire script; use stream_set_timeout to limit time spent reading from a stream opened with fopen or fsockopen,"require 'timeout'

begin
 Timeout.timeout(5) do
  might_take_too_long
 end
rescue Timeout::Error
end"
,_____________________________________________________,,,_____________________________________________________,_____________________________________________________,_____________________________________________________
,,,,,,
sheet two: streams | asynchronous events | files | directories | processes and environment | option parsing | libraries and namespaces | objects | inheritance and polymorphism | reflection | net and web | gui | databases | unit tests | logging | debugging,,,,,,
,,,,,,
Version,,,,,,
,,,,,,
version used,,,,,,
,,,,,,
The versions used for testing code in the reference sheet.,,,,,,
,,,,,,
show version,,,,,,
,,,,,,
How to get the version.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
The function phpversion() will return the version number as a string.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
The following function will return the version number as a string:,,,,,,
,,,,,,
import platform,,,,,,
platform.python_version(),,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
Also available in the global constant RUBY_VERSION.,,,,,,
,,,,,,
implicit prologue,,,,,,
,,,,,,
Code which examples in the sheet assume to have already been executed.,,,,,,
,,,,,,
javascript:,,,,,,
,,,,,,
underscore.js adds some convenience functions as attributes of an object which is normally stored in the underscore _ variable. E.g.:,,,,,,
,,,,,,
"_.map([1, 2, 3], function(n){ return n * n; });",,,,,,
,,,,,,
cdnjs hosts underscore.js and other JavaScript libraries for situations where it is inconvenient to have the webserver host the libraries.,,,,,,
,,,,,,
"When using underscore.js with the Node REPL, there is a conflict, since the Node REPL uses the underscore _ variable to store the result of the last evaluation.",,,,,,
,,,,,,
$ npm install underscore,,,,,,
$ node,,,,,,
> var us = require('underscore'); _,,,,,,
"> us.keys({""one"": 1, ""two"": 2});",,,,,,
"[ 'one', 'two' ]",,,,,,
,,,,,,
php:,,,,,,
,,,,,,
The mbstring package adds UTF-8 aware string functions with mb_ prefixes.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"We assume that os, re, and sys are always imported.",,,,,,
,,,,,,
Grammar and Execution,,,,,,
,,,,,,
interpreter,,,,,,
,,,,,,
The customary name of the interpreter and how to invoke it.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
php -f will only execute portions of the source file within a <?php php code ?> tag as php code. Portions of the source file outside of such tags is not treated as executable code and is echoed to standard out.,,,,,,
,,,,,,
"If short tags are enabled, then php code can also be placed inside <? php code ?> and <?= php code ?> tags.",,,,,,
,,,,,,
<?= php code ?> is identical to <?php echo php code ?>.,,,,,,
,,,,,,
repl,,,,,,
,,,,,,
The customary name of the repl.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
The php -a REPL does not save or display the result of an expression.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
The python repl saves the result of the last statement in _.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
irb saves the result of the last statement in _.,,,,,,
,,,,,,
command line program,,,,,,
,,,,,,
How to pass the code to be executed to the interpreter as a command line argument.,,,,,,
,,,,,,
block delimiters,,,,,,
,,,,,,
How blocks are delimited.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"Python blocks begin with a line that ends in a colon. The block ends with the first line that is not indented further than the initial line. Python raises an IndentationError if the statements in the block that are not in a nested block are not all indented the same. Using tabs in Python source code is unrecommended and many editors replace them automatically with spaces. If the Python interpreter encounters a tab, it is treated as 8 spaces.",,,,,,
,,,,,,
The python repl switches from a >>> prompt to a … prompt inside a block. A blank line terminates the block.,,,,,,
,,,,,,
Colons are also used to separate keys from values in dictionary literals and in sequence slice notation.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
Curly brackets {} delimit blocks. A matched curly bracket pair can be replaced by the do and end keywords. By convention curly brackets are used for one line blocks.,,,,,,
,,,,,,
"The end keyword also terminates blocks started by def, class, or module.",,,,,,
,,,,,,
"Curly brackets are also used for hash literals, and the #{ } notation is used to interpolate expressions into strings.",,,,,,
,,,,,,
statement separator,,,,,,
,,,,,,
How the parser determines the end of a statement.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
Inside braces statements must be terminated by a semicolon. The following causes a parse error:,,,,,,
,,,,,,
"<? if (true) { echo ""true"" } ?>",,,,,,
,,,,,,
"The last statement inside <?= ?> or <? ?> tags does not need to be semicolon terminated, however. The following code is legal:",,,,,,
,,,,,,
<?= $a = 1 ?>,,,,,,
<? echo $a ?>,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
Newline does not terminate a statement when:,,,,,,
,,,,,,
inside parens,,,,,,
inside list [] or dictionary {} literals,,,,,,
,,,,,,
"Python single quote '' and double quote """" strings cannot contain newlines except as the two character escaped form \n. Putting a newline in these strings results in a syntax error. There is however a multi-line string literal which starts and ends with three single quotes ''' or three double quotes: """""".",,,,,,
,,,,,,
A newline that would normally terminate a statement can be escaped with a backslash.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
Newline does not terminate a statement when:,,,,,,
,,,,,,
"inside single quotes '', double quotes """", backticks ``, or parens ()",,,,,,
"after an operator such as + or , that expects another argument",,,,,,
,,,,,,
"Ruby permits newlines in array [] or hash literals, but only after a comma , or associator =>. Putting a newline before the comma or associator results in a syntax error.",,,,,,
,,,,,,
A newline that would normally terminate a statement can be escaped with a backslash.,,,,,,
,,,,,,
source code encoding,,,,,,
,,,,,,
How to identify the character encoding for a source code file.,,,,,,
,,,,,,
Setting the source code encoding makes it possible to safely use non-ASCII characters in string literals and regular expression literals.,,,,,,
,,,,,,
end-of-line comment,,,,,,
,,,,,,
How to create a comment that ends at the next newline.,,,,,,
,,,,,,
multiple line comment,,,,,,
,,,,,,
How to comment out multiple lines.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"The triple single quote ''' and triple double quote """""" syntax is a syntax for string literals.",,,,,,
,,,,,,
Variables and Expressions,,,,,,
,,,,,,
local variable,,,,,,
,,,,,,
How to declare variables which are local to the scope defining region which immediately contain them.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
"Variables do not need to be declared and there is no syntax for declaring a local variable. If a variable with no previous reference is accessed, its value is NULL.",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"A variable is created by assignment if one does not already exist. If the variable is inside a function or method, then its scope is the body of the function or method. Otherwise it is a global.",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
Variables are created by assignment. If the variable does not have a dollar sign ($) or ampersand (@) as its first character then its scope is scope defining region which most immediately contains it.,,,,,,
,,,,,,
"A lower case name can refer to a local variable or method. If both are defined, the local variable takes precedence. To invoke the method make the receiver explicit: e.g. self.name. However, outside of class and modules local variables hide functions because functions are private methods in the class Object. Assignment to name will create a local variable if one with that name does not exist, even if there is a method name.",,,,,,
,,,,,,
file scope variable,,,,,,
,,,,,,
How to define a variable with scope bound by the source file.,,,,,,
,,,,,,
global variable,,,,,,
,,,,,,
How to declare and access a variable with global scope.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
A variable is global if it is used at the top level (i.e. outside any function definition) or if it is declared inside a function with the global keyword. A function must use the global keyword to access the global variable.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"A variable is global if it is defined at the top level of a file (i.e. outside any function definition). Although the variable is global, it must be imported individually or be prefixed with the module name prefix to be accessed from another file. To be accessed from inside a function or method it must be declared with the global keyword.",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
A variable is global if it starts with a dollar sign: $.,,,,,,
,,,,,,
constant,,,,,,
,,,,,,
How to declare a constant.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
A constant can be declared inside a class:,,,,,,
,,,,,,
class Math {,,,,,,
const pi = 3.14;,,,,,,
},,,,,,
,,,,,,
Refer to a class constant like this:,,,,,,
,,,,,,
Math::pi,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"Capitalized variables contain constants and class/module names. By convention, constants are all caps and class/module names are camel case. The ruby interpreter does not prevent modification of constants, it only gives a warning. Capitalized variables are globally visible, but a full or relative namespace name must be used to reach them: e.g. Math::PI.",,,,,,
,,,,,,
assignment,,,,,,
,,,,,,
How to assign a value to a variable.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"If the variable on the left has not previously been defined in the current scope, then it is created. This may hide a variable in a containing scope.",,,,,,
,,,,,,
"Assignment does not return a value and cannot be used in an expression. Thus, assignment cannot be used in a conditional test, removing the possibility of using assignment (=) when an equality test (==) was intended. Assignments can nevertheless be chained to assign a value to multiple variables:",,,,,,
,,,,,,
a = b = 3,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"Assignment operators have right precedence and evaluate to the right argument, so they can be chained. If the variable on the left does not exist, then it is created.",,,,,,
,,,,,,
parallel assignment,,,,,,
,,,,,,
How to assign values to variables in parallel.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
The r-value can be a list or tuple:,,,,,,
,,,,,,
"nums = [1, 2, 3]",,,,,,
"a, b, c = nums",,,,,,
"more_nums = (6, 7, 8)",,,,,,
"d, e, f = more_nums",,,,,,
,,,,,,
"Nested sequences of expression can be assigned to a nested sequences of l-values, provided the nesting matches. This assignment will set a to 1, b to 2, and c to 3:",,,,,,
,,,,,,
"(a,[b,c]) = [1,(2,3)]",,,,,,
,,,,,,
This assignment will raise a TypeError:,,,,,,
,,,,,,
"(a,(b,c)) = ((1,2),3)",,,,,,
,,,,,,
In Python 3 the splat operator * can be used to collect the remaining right side elements in a list:,,,,,,
,,,,,,
"x, y, *z = 1, 2        # assigns [] to z",,,,,,
"x, y, *z = 1, 2, 3     # assigns [3] to z",,,,,,
"x, y, *z = 1, 2, 3, 4  # assigns [3, 4] to z",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
The r-value can be an array:,,,,,,
,,,,,,
"nums = [1, 2, 3]",,,,,,
"a,b,c = nums",,,,,,
,,,,,,
swap,,,,,,
,,,,,,
How to swap the values held by two variables.,,,,,,
,,,,,,
compound assignment,,,,,,
,,,,,,
"Compound assignment operators mutate a variable, setting it to the value of an operation which takes the previous value of the variable as an argument.",,,,,,
,,,,,,
"If <OP> is a binary operator and the language has the compound assignment operator <OP>=, then the following are equivalent:",,,,,,
,,,,,,
x <OP>= y,,,,,,
x = x <OP> y,,,,,,
,,,,,,
The compound assignment operators are displayed in this order:,,,,,,
,,,,,,
"First row: arithmetic operator assignment: addition, subtraction, multiplication, (float) division, integer division, modulus, and exponentiation.",,,,,,
Second row: string concatenation assignment and string replication assignment,,,,,,
"Third row: logical operator assignment: and, or, xor",,,,,,
"Fourth row: bit operator assignment: left shift, right shift, and, or, xor.",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
Python compound assignment operators do not return a value and hence cannot be used in expressions.,,,,,,
,,,,,,
increment and decrement,,,,,,
,,,,,,
"The C-style increment and decrement operators can be used to increment or decrement values. They return values and thus can be used in expressions. The prefix versions return the value in the variable after mutation, and the postfix version return the value before mutation.",,,,,,
,,,,,,
Incrementing a value two or more times in an expression makes the order of evaluation significant:,,,,,,
,,,,,,
x = 1;,,,,,,
"foo(++x, ++x); // foo(2, 3) or foo(3, 2)?",,,,,,
x = 1;,,,,,,
y = ++x/++x;  // y = 2/3 or y = 3/2?,,,,,,
,,,,,,
Python avoids the problem by not having an in-expression increment or decrement.,,,,,,
,,,,,,
"Ruby mostly avoids the problem by providing a non-mutating increment and decrement. However, here is a Ruby expression which is dependent on order of evaluation:",,,,,,
,,,,,,
x = 1,,,,,,
y = (x += 1)/(x += 1),,,,,,
,,,,,,
php:,,,,,,
,,,,,,
The increment and decrement operators also work on strings. There are postfix versions of these operators which evaluate to the value before mutation:,,,,,,
,,,,,,
$x = 1;,,,,,,
$x++;,,,,,,
$x--;,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"The Integer class defines succ, pred, and next, which is a synonym for succ.",,,,,,
,,,,,,
"The String class defines succ, succ!, next, and next!. succ! and next! mutate the string.",,,,,,
,,,,,,
null,,,,,,
,,,,,,
The null literal.,,,,,,
,,,,,,
null test,,,,,,
,,,,,,
How to test if a variable contains null.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
"$v == NULL does not imply that $v is NULL, since any comparison between NULL and a falsehood will return true. In particular, the following comparisons are true:",,,,,,
,,,,,,
$v = NULL;,,,,,,
"if ($v == NULL) { echo ""true""; }",,,,,,
$v = 0;,,,,,,
"if ($v == NULL) { echo ""sadly true""; }",,,,,,
$v = '';,,,,,,
"if ($v == NULL) { echo ""sadly true""; }",,,,,,
,,,,,,
undefined variable,,,,,,
,,,,,,
The result of attempting to access an undefined variable.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"Because a class can implement an eq method to change the implementation of v == None, the expression can be True when v is not None.",,,,,,
,,,,,,
php:,,,,,,
,,,,,,
PHP does not provide the programmer with a mechanism to distinguish an undefined variable from a variable which has been set to NULL.,,,,,,
,,,,,,
A test showing that isset is the logical negation of is_null.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
How to test if a variable is defined:,,,,,,
,,,,,,
not_defined = False,,,,,,
try: v,,,,,,
except NameError:,,,,,,
not_defined = True,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
How to test if a variable is defined:,,,,,,
,,,,,,
! defined?(v),,,,,,
,,,,,,
conditional expression,,,,,,
,,,,,,
How to write a conditional expression. A ternary operator is an operator which takes three arguments. Since,,,,,,
,,,,,,
condition ? true value : false value,,,,,,
,,,,,,
"is the only ternary operator in C, it is unambiguous to refer to it as the ternary operator.",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
The Python conditional expression comes from Algol.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
The Ruby if statement is also an expression:,,,,,,
,,,,,,
x = if x > 0,,,,,,
x,,,,,,
else,,,,,,
-x,,,,,,
end,,,,,,
,,,,,,
Arithmetic and Logic,,,,,,
,,,,,,
true and false,,,,,,
,,,,,,
Literals for the booleans.,,,,,,
,,,,,,
These are the return values of the relational operators.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
Any identifier which matches TRUE case-insensitive can be used for the TRUE boolean. Similarly for FALSE.,,,,,,
,,,,,,
"In general, PHP variable names are case-sensitive, but function names are case-insensitive.",,,,,,
,,,,,,
"When converted to a string for display purposes, TRUE renders as ""1"" and FALSE as """". The equality tests TRUE == 1 and FALSE == """" evaluate as TRUE but the equality tests TRUE === 1 and FALSE === """" evaluate as FALSE.",,,,,,
,,,,,,
falsehoods,,,,,,
,,,,,,
Values which behave like the false boolean in a conditional context.,,,,,,
,,,,,,
Examples of conditional contexts are the conditional clause of an if statement and the test of a while loop.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
Whether a object evaluates to True or False in a boolean context can be customized by implementing a __nonzero__ (Python 2) or __bool__ (Python 3) instance method for the class.,,,,,,
,,,,,,
logical operators,,,,,,
,,,,,,
"Logical and, or, and not.",,,,,,
,,,,,,
"php, ruby:",,,,,,
,,,,,,
"&& and || have higher precedence than assignment, compound assignment, and the ternary operator (?:), which have higher precedence than and and or.",,,,,,
,,,,,,
relational operators,,,,,,
,,,,,,
"Equality, inequality, greater than, less than, greater than or equal, less than or equal.",,,,,,
,,,,,,
php:,,,,,,
,,,,,,
"Most of the relational operators will convert a string to a number if the other operand is a number. Thus 0 == ""0"" is true. The operators === and !== do not perform this conversion, so 0 === ""0"" is false.",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
Relational operators can be chained. The following expressions evaluate to true:,,,,,,
,,,,,,
1 < 2 < 3,,,,,,
1 == 1 != 2,,,,,,
,,,,,,
"In general if Ai are expressions and opi are relational operators, then",,,,,,
,,,,,,
A1 op1 A2 op2 A3 … An opn An+1,,,,,,
,,,,,,
is true if and only if each of the following is true,,,,,,
,,,,,,
A1 op1 A2,,,,,,
A2 op2 A3,,,,,,
…,,,,,,
An opn An+1,,,,,,
,,,,,,
min and max,,,,,,
,,,,,,
How to get the min and max.,,,,,,
,,,,,,
arithmetic operators,,,,,,
,,,,,,
"The operators for addition, subtraction, multiplication, float division, integer division, modulus, and exponentiation.",,,,,,
,,,,,,
integer division,,,,,,
,,,,,,
How to get the integer quotient of two integers.,,,,,,
,,,,,,
divmod,,,,,,
,,,,,,
How to get the quotient and remainder with single function call.,,,,,,
,,,,,,
integer division by zero,,,,,,
,,,,,,
What happens when an integer is divided by zero.,,,,,,
,,,,,,
float division,,,,,,
,,,,,,
"How to perform floating point division, even if the operands might be integers.",,,,,,
,,,,,,
float division by zero,,,,,,
,,,,,,
What happens when a float is divided by zero.,,,,,,
,,,,,,
power,,,,,,
,,,,,,
How to get the value of a number raised to a power.,,,,,,
,,,,,,
sqrt,,,,,,
,,,,,,
The square root function.,,,,,,
,,,,,,
sqrt -1,,,,,,
,,,,,,
The result of taking the square root of negative one.,,,,,,
,,,,,,
transcendental functions,,,,,,
,,,,,,
Some mathematical functions. Trigonometric functions are in radians unless otherwise noted. Logarithms are natural unless otherwise noted.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"Python also has math.log10. To compute the log of x for base b, use:",,,,,,
,,,,,,
math.log(x)/math.log(b),,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"Ruby also has Math.log2, Math.log10. To compute the log of x for base b, use",,,,,,
,,,,,,
Math.log(x)/Math.log(b),,,,,,
,,,,,,
transcendental constants,,,,,,
,,,,,,
Constants for π and Euler's constant.,,,,,,
,,,,,,
float truncation,,,,,,
,,,,,,
How to truncate a float to the nearest integer towards zero; how to round a float to the nearest integer; how to find the nearest integer above a float; how to find the nearest integer below a float; how to take the absolute value.,,,,,,
,,,,,,
absolute value,,,,,,
,,,,,,
How to get the absolute value of a number.,,,,,,
,,,,,,
integer overflow,,,,,,
,,,,,,
What happens when the largest representable integer is exceeded.,,,,,,
,,,,,,
float overflow,,,,,,
,,,,,,
What happens when the largest representable float is exceeded.,,,,,,
,,,,,,
rational numbers,,,,,,
,,,,,,
How to create rational numbers and get the numerator and denominator.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
Require the library mathn and integer division will yield rationals instead of truncated integers.,,,,,,
,,,,,,
complex numbers,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
Most of the functions in math have analogues in cmath which will work correctly on complex numbers.,,,,,,
,,,,,,
"random integer, uniform float, normal float",,,,,,
,,,,,,
"How to generate a random integer between 0 and 99, include, float between zero and one in a uniform distribution, or a float in a normal distribution with mean zero and standard deviation one.",,,,,,
,,,,,,
"set random seed, get and restore seed",,,,,,
,,,,,,
How to set the random seed; how to get the current random seed and later restore it.,,,,,,
,,,,,,
"All the languages in the sheet set the seed automatically to a value that is difficult to predict. The Ruby MRI interpreter uses the current time and process ID, for example. As a result there is usually no need to set the seed.",,,,,,
,,,,,,
Setting the seed to a hardcoded value yields a random but repeatable sequence of numbers. This can be used to ensure that unit tests which cover code using random numbers doesn't intermittently fail.,,,,,,
,,,,,,
The seed is global state. If multiple functions are generating random numbers then saving and restoring the seed may be necessary to produce a repeatable sequence.,,,,,,
,,,,,,
bit operators,,,,,,
,,,,,,
"The bit operators for left shift, right shift, and, inclusive or, exclusive or, and negation.",,,,,,
,,,,,,
"binary, octal, and hex literals",,,,,,
,,,,,,
"Binary, octal, and hex integer literals",,,,,,
,,,,,,
radix,,,,,,
,,,,,,
How to convert integers to strings of digits of a given base. How to convert such strings into integers.,,,,,,
,,,,,,
python,,,,,,
,,,,,,
"Python has the functions bin, oct, and hex which take an integer and return a string encoding the integer in base 2, 8, and 16.",,,,,,
,,,,,,
bin(42),,,,,,
oct(42),,,,,,
hex(42),,,,,,
,,,,,,
Strings,,,,,,
,,,,,,
string type,,,,,,
,,,,,,
The type for a string of Unicode characters.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
PHP assumes all strings have single byte characters.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
In Python 2.7 the str type assumes single byte characters. A separate unicode type is available for working with Unicode strings.,,,,,,
,,,,,,
In Python 3 the str type supports multibtye characters and the unicode type has been removed.,,,,,,
,,,,,,
There is a mutable bytearray type and an immutable bytes type for working with sequences of bytes.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
The String type supports multibtye characters. All strings have an explicit Encoding.,,,,,,
,,,,,,
string literal,,,,,,
,,,,,,
The syntax for string literals.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
String literals may have a u prefix,,,,,,
,,,,,,
u'lorem ipsum',,,,,,
"u""lorem ipsum""",,,,,,
u'''lorem,,,,,,
ipsum''',,,,,,
"u""""""lorem",,,,,,
"ipsum""""""",,,,,,
,,,,,,
"In Python 3, these are identical to literals without the u prefix.",,,,,,
,,,,,,
"In Python 2, these create unicode strings instead of str strings. Since the Python 2 unicode type corresponds to the Python 3 str type, portable code will use the u prefix.",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"How to specify custom delimiters for single and double quoted strings. These can be used to avoid backslash escaping. If the left delimiter is (, [, or { the right delimiter must be ), ], or }, respectively.",,,,,,
,,,,,,
s1 = %q(lorem ipsum),,,,,,
s2 = %Q(#{s1} dolor sit amet),,,,,,
,,,,,,
newline in literal,,,,,,
,,,,,,
Whether newlines are permitted in string literals.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"Newlines are not permitted in single quote and double quote string literals. A string can continue onto the following line if the last character on the line is a backslash. In this case, neither the backslash nor the newline are taken to be part of the string.",,,,,,
,,,,,,
"Triple quote literals, which are string literals terminated by three single quotes or three double quotes, can contain newlines:",,,,,,
,,,,,,
''This is,,,,,,
two lines''',,,,,,
"""""""This is also",,,,,,
"two lines""""""",,,,,,
,,,,,,
literal escapes,,,,,,
,,,,,,
Backslash escape sequences for inserting special characters into string literals.,,,,,,
,,,,,,
unrecognized backslash escape sequence,,,,,,
,double quote,,,single quote,,
JavaScript,,,,,,
PHP,preserve backslash,,,preserve backslash,,
Python,preserve backslash,,,preserve backslash,,
Ruby,drop backslash,,,preserve backslash,,
,,,,,,
python:,,,,,,
,,,,,,
"When string literals have an r or R prefix there are no backslash escape sequences and any backslashes thus appear in the created string. The delimiter can be inserted into a string if it is preceded by a backslash, but the backslash is also inserted. It is thus not possible to create a string with an r or R prefix that ends in a backslash. The r and R prefixes can be used with single or double quotes:",,,,,,
,,,,,,
r'C:\Documents and Settings\Admin',,,,,,
"r""C:\Windows\System32""",,,,,,
,,,,,,
The \uhhhh escapes are also available inside Python 2 Unicode literals. Unicode literals have a u prefiix:,,,,,,
,,,,,,
u'lambda: \u03bb',,,,,,
,,,,,,
"This syntax is also available in Python 3.3, but not Python 3.2. In Python 3.3 it creates a string of type str which has the same features as the unicode type of Python 2.7.",,,,,,
,,,,,,
here document,,,,,,
,,,,,,
Here documents are strings terminated by a custom identifier. They perform variable substitution and honor the same backslash escapes as double quoted strings.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"Triple quotes honor the same backslash escape sequences as regular quotes, so triple quotes can otherwise be used like here documents:",,,,,,
,,,,,,
s = '''here document,,,,,,
there computer,,,,,,
'',,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
Put the customer identifier in single quotes to prevent variable interpolation and backslash escape interpretation:,,,,,,
,,,,,,
s = <<'EOF',,,,,,
Ruby code uses #{var} type syntax,,,,,,
to interpolate variables into strings.,,,,,,
EOF,,,,,,
,,,,,,
variable interpolation,,,,,,
,,,,,,
How to interpolate variables into strings.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"The f'1 + 1 = {1 + 1}' and f""1 + 1 = {1 + 1}"" literals, which support variable interpolation and expression interpolation, are new in Python 3.6.",,,,,,
,,,,,,
str.format will take named or positional parameters. When used with named parameters str.format can mimic the variable interpolation feature of the other languages.,,,,,,
,,,,,,
A selection of variables in scope can be passed explicitly:,,,,,,
,,,,,,
count = 3,,,,,,
item = 'ball',,,,,,
print('{count} {item}s'.format(,,,,,,
"count=count,",,,,,,
item=item)),,,,,,
,,,,,,
Python 3 has format_map which accepts a dict as an argument:,,,,,,
,,,,,,
count = 3,,,,,,
item = 'ball',,,,,,
print('{count} {item}s'.format_map(locals())),,,,,,
,,,,,,
expression interpolation,,,,,,
,,,,,,
How to interpolate the result of evaluating an expression into a string.,,,,,,
,,,,,,
format string,,,,,,
,,,,,,
How to create a string using a printf style format.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
The % operator will interpolate arguments into printf-style format strings.,,,,,,
,,,,,,
"The str.format with positional parameters provides an alternative format using curly braces {0}, {1}, … for replacement fields.",,,,,,
,,,,,,
The curly braces are escaped by doubling:,,,,,,
,,,,,,
"to insert parameter {0} into a format, use {{{0}}}'.format(3)",,,,,,
,,,,,,
"If the replacement fields appear in sequential order and aren't repeated, the numbers can be omitted:",,,,,,
,,,,,,
"lorem {} {} {}'.format('ipsum', 13, 3.7)",,,,,,
,,,,,,
are strings mutable?,,,,,,
,,,,,,
Are strings mutable?,,,,,,
,,,,,,
copy string,,,,,,
,,,,,,
How to copy a string such that changes to the original do not modify the copy.,,,,,,
,,,,,,
concatenate,,,,,,
,,,,,,
The string concatenation operator.,,,,,,
,,,,,,
replicate,,,,,,
,,,,,,
The string replication operator.,,,,,,
,,,,,,
translate case,,,,,,
,,,,,,
How to put a string into all caps or all lower case letters.,,,,,,
,,,,,,
capitalize,,,,,,
,,,,,,
How to capitalize a string and the words in a string.,,,,,,
,,,,,,
The examples lowercase non-initial letters.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
How to define a UTF-8 aware version of ucfirst. This version also puts the rest of the string in lowercase:,,,,,,
,,,,,,
"function mb_ucfirst($string, $encoding = ""UTF-8"")",,,,,,
{,,,,,,
"$strlen = mb_strlen($string, $encoding);",,,,,,
"$firstChar = mb_substr($string, 0, 1, $encoding);",,,,,,
"$then = mb_substr(mb_strtolower($string), 1, $strlen - 1, $encoding);",,,,,,
"return mb_strtoupper($firstChar, $encoding) . $then;",,,,,,
},,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
Rails monkey patches the String class with the titleize method for capitalizing the words in a string.,,,,,,
,,,,,,
trim,,,,,,
,,,,,,
How to remove whitespace from the ends of a string.,,,,,,
,,,,,,
pad,,,,,,
,,,,,,
How to pad the edge of a string with spaces so that it is a prescribed length.,,,,,,
,,,,,,
number to string,,,,,,
,,,,,,
How to convert numeric data to string data.,,,,,,
,,,,,,
format float,,,,,,
,,,,,,
How to control the number of digits in a float when converting it to a string.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
The number after the decimal controls the number of digits after the decimal:,,,,,,
,,,,,,
>>> '%.2f' % math.pi,,,,,,
3.14',,,,,,
,,,,,,
The number after the decimal controls the total number of digits:,,,,,,
,,,,,,
>>> '{:.3}'.format(math.pi),,,,,,
3.14',,,,,,
,,,,,,
string to number,,,,,,
,,,,,,
How to convert string data to numeric data.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
"PHP converts a scalar to the desired type automatically and does not raise an error if the string contains non-numeric data. If the start of the string is not numeric, the string evaluates to zero in a numeric context.",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
float and int raise an error if called on a string and any part of the string is not numeric.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"to_i and to_f always succeed on a string, returning the numeric value of the digits at the start of the string, or zero if there are no initial digits.",,,,,,
,,,,,,
string join,,,,,,
,,,,,,
How to concatenate the elements of an array into a string with a separator.,,,,,,
,,,,,,
split,,,,,,
,,,,,,
How to split a string containing a separator into an array of substrings.,,,,,,
,,,,,,
See also scan.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
str.split() takes simple strings as delimiters; use re.split() to split on a regular expression:,,,,,,
,,,,,,
"re.split('\s+', 'do re mi fa')",,,,,,
"re.split('\s+', 'do re mi fa', 1)",,,,,,
,,,,,,
split in two,,,,,,
,,,,,,
How to split a string in two.,,,,,,
,,,,,,
javascript:,,,,,,
,,,,,,
A regular expression is probably the best method for splitting a string in two:,,,,,,
,,,,,,
"var m = /^([^ ]+) (.+)/.exec(""do re mi"");",,,,,,
var first = m[1];,,,,,,
var rest = m[2];,,,,,,
,,,,,,
This technique works when the delimiter is a fixed string:,,,,,,
,,,,,,
"var a = ""do re mi"".split("" "");",,,,,,
var first = a[0];,,,,,,
"var rest = a.splice(1).join("" "");",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
Methods for splitting a string into three parts using the first or last occurrence of a substring:,,,,,,
,,,,,,
"do re mi'.partition(' ')         # returns ('do', ' ', 're mi')",,,,,,
"do re mi'.rpartition(' ')        # returns ('do re', ' ', 'mi')",,,,,,
,,,,,,
split and keep delimiters,,,,,,
,,,,,,
How to split a string with the delimiters preserved as separate elements.,,,,,,
,,,,,,
prefix and suffix test,,,,,,
,,,,,,
How to test whether a string begins or ends with a substring.,,,,,,
,,,,,,
length,,,,,,
,,,,,,
How to get the length in characters of a string.,,,,,,
,,,,,,
index of substring,,,,,,
,,,,,,
How to find the index of the leftmost occurrence of a substring in a string; how to find the index of the rightmost occurrence.,,,,,,
,,,,,,
extract substring,,,,,,
,,,,,,
How to extract a substring from a string by index.,,,,,,
,,,,,,
byte array type,,,,,,
,,,,,,
The type for an array of bytes.,,,,,,
,,,,,,
byte array to string,,,,,,
,,,,,,
How to convert an array of bytes to a string of Unicode characters.,,,,,,
,,,,,,
string to byte array,,,,,,
,,,,,,
How to convert a string of Unicode characters to an array of bytes.,,,,,,
,,,,,,
character lookup,,,,,,
,,,,,,
How to look up the character in a string at an index.,,,,,,
,,,,,,
chr and ord,,,,,,
,,,,,,
Converting characters to ASCII codes and back.,,,,,,
,,,,,,
"The languages in this reference sheet do not have character literals, so characters are represented by strings of length one.",,,,,,
,,,,,,
to array of characters,,,,,,
,,,,,,
How to split a string into an array of single character strings.,,,,,,
,,,,,,
translate characters,,,,,,
,,,,,,
How to apply a character mapping to a string.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"In Python 2, the string of lowercase letters is in string.lowercase instead of string.ascii_lowercase.",,,,,,
,,,,,,
"In Python 2, the maketrans function is in the module string instead of str.",,,,,,
,,,,,,
delete characters,,,,,,
,,,,,,
How to remove all specified characters from a string; how to remove all but the specified characters from a string.,,,,,,
,,,,,,
squeeze characters,,,,,,
,,,,,,
How to replace multiple adjacent occurrences of a character with a single occurrence.,,,,,,
,,,,,,
Regular Expressions,,,,,,
PHP PCRE Regexes,,,,,,
"Python re library: 2.7, 3.1",,,,,,
Ruby Regexp,,,,,,
,,,,,,
"Regular expressions or regexes are a way of specifying sets of strings. If a string belongs to the set, the string and regex ""match"". Regexes can also be used to parse strings.",,,,,,
,,,,,,
The modern notation for regexes was introduced by Unix command line tools in the 1970s. POSIX standardized the notation into two types: extended regexes and the more archaic basic regexes. Perl regexes are extended regexes augmented by new character class abbreviations and a few other features introduced by the Perl interpreter in the 1990s. All the languages in this sheet use Perl regexes.,,,,,,
,,,,,,
Any string that doesn't contain regex metacharacters is a regex which matches itself. The regex metacharacters are: [ ] . | ( ) * + ? { } ^ $ \,,,,,,
,,,,,,
character classes: [ ] .,,,,,,
,,,,,,
A character class is a set of characters in brackets: [ ]. When used in a regex it matches any character it contains.,,,,,,
,,,,,,
Character classes have their own set of metacharacters: ^ - \ ],,,,,,
,,,,,,
"The ^ is only special when it is the first character in the character class. Such a character class matches its complement; that is, any character not inside the brackets. When not the first character the ^ refers to itself.",,,,,,
,,,,,,
The hyphen is used to specify character ranges: e.g. 0-9 or A-Z. When the hyphen is first or last inside the brackets it matches itself.,,,,,,
,,,,,,
The backslash can be used to escape the above characters or the terminal character class delimiter: ]. It can be used in character class abbreviations or string backslash escapes.,,,,,,
,,,,,,
The period . is a character class abbreviation which matches any character except for newline. In all languages the period can be made to match all characters. PHP uses the m modifier. Python uses the re.M flag. Ruby uses the s modifier.,,,,,,
,,,,,,
,,,,,,
character class abbreviations:,,,,,,
,,,,,,
abbrev,name,,,character class,,
\d,digit,,,[0-9],,
\D,nondigit,,,[^0-9],,
\h,"PHP: horizontal whitespace character
Ruby: hex digit",,,"PHP: [ \t]
Ruby: [0-9a-fA-F]",,
\H,"PHP: not a horizontal whitespace character
Ruby: not a hex digit",,,"PHP: [^ \t]
Ruby: [^0-9a-fA-F]",,
\s,whitespace character,,,[ \t\r\n\f],,
\S,non whitespace character,,,[^ \t\r\n\f],,
\v,vertical whitespace character,,,[\r\n\f],,
\V,not a vertical whitespace character,,,[^\r\n\f],,
\w,word character,,,[A-Za-z0-9_],,
\W,non word character,,,[^A-Za-z0-9_],,
,,,,,,
alternation and grouping: | ( ),,,,,,
,,,,,,
The vertical pipe | is used for alternation and parens () for grouping.,,,,,,
,,,,,,
"A vertical pipe takes as its arguments everything up to the next vertical pipe, enclosing paren, or end of string.",,,,,,
,,,,,,
"Parentheses control the scope of alternation and the quantifiers described below. They are also used for capturing groups, which are the substrings which matched parenthesized parts of the regular expression. Each language numbers the groups and provides a mechanism for extracting them when a match is made. A parenthesized subexpression can be removed from the groups with this syntax: (?:expr)",,,,,,
,,,,,,
quantifiers: * + ? { },,,,,,
,,,,,,
"As an argument quantifiers take the preceding regular character, character class, or group. The argument can itself be quantified, so that ^a{4}*$ matches strings with the letter a in multiples of 4.",,,,,,
,,,,,,
quantifier,# of occurrences of argument matched,,,,,
*,"zero or more, greedy",,,,,
#ERROR!,"one or more, greedy",,,,,
?,"zero or one, greedy",,,,,
"{m,n}","m to n, greedy",,,,,
{n},exactly n,,,,,
"{m,}","m or more, greedy",,,,,
"{,n}","zero to n, greedy",,,,,
*?,"zero or more, lazy",,,,,
#ERROR!,"one or more, lazy",,,,,
"{m,n}?","m to n, lazy",,,,,
"{m,}?","m or more, lazy",,,,,
"{,n}?","zero to n, lazy",,,,,
,,,,,,
"When there is a choice, greedy quantifiers will match the maximum possible number of occurrences of the argument. Lazy quantifiers match the minimum possible number.",,,,,,
,,,,,,
anchors: ^ $,,,,,,
,,,,,,
anchor,matches,,,,,
^,beginning of a string. In Ruby or when m modifier is used also matches right side of a newline,,,,,
$,end of a string. In Ruby or when m modifier is used also matches left side of a newline,,,,,
\A,beginning of the string,,,,,
\b,word boundary. In between a \w and a \W character or in between a \w character and the edge of the string,,,,,
\B,not a word boundary. In between two \w characters or two \W characters,,,,,
\z,end of the string,,,,,
\Z,"end of the string unless it is a newline, in which case it matches the left side of the terminal newline",,,,,
,,,,,,
escaping: \,,,,,,
,,,,,,
"To match a metacharacter, put a backslash in front of it. To match a backslash use two backslashes.",,,,,,
,,,,,,
php:,,,,,,
,,,,,,
"PHP 5.3 still supports the EREG engine, though the functions which use it are deprecated. These include the split function and functions which start with ereg. The preferred functions are preg_split and the other functions with a preg prefix.",,,,,,
,,,,,,
"literal, custom delimited literal",,,,,,
,,,,,,
The literal for a regular expression; the literal for a regular expression with a custom delimiter.,,,,,,
,,,,,,
javascript:,,,,,,
,,,,,,
The constructor for a regular expression is:,,,,,,
,,,,,,
"var rx = RegExp(""lorem|ipsum"");",,,,,,
,,,,,,
php:,,,,,,
,,,,,,
"PHP regex literals are strings. The first character is the delimiter and it must also be the last character. If the start delimiter is (, {, or [ the end delimiter must be ), }, or ], respectively.",,,,,,
,,,,,,
Here are the signatures from the PHP manual for the preg functions used in this sheet:,,,,,,
,,,,,,
"array preg_split ( string $pattern , string $subject [, int $limit = -1 [, int $flags = 0 ]] )",,,,,,
"int preg_match ( string $pattern , string $subject [, array &$matches [, int $flags = 0 [, int $offset = 0 ]]] )",,,,,,
"mixed preg_replace ( mixed $pattern , mixed $replacement , mixed $subject [, int $limit = -1 [, int &$count ]] )",,,,,,
"int preg_match_all ( string $pattern , string $subject [, array &$matches [, int $flags = PREG_PATTERN_ORDER [, int $offset = 0 ]]] )",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"Python does not have a regex literal, but the re.compile function can be used to create regex objects.",,,,,,
,,,,,,
Compiling regexes can always be avoided:,,,,,,
,,,,,,
re.compile('\d{4}').search('1999'),,,,,,
"re.search('\d{4}', '1999')",,,,,,
"re.compile('foo').sub('bar', 'foo bar')",,,,,,
"re.sub('foo', 'bar', 'foo bar')",,,,,,
re.compile('\w+').findall('do re me'),,,,,,
"re.findall('\w+', 'do re me')",,,,,,
,,,,,,
ascii character class abbreviations,,,,,,
,,,,,,
The supported character class abbreviations.,,,,,,
,,,,,,
Note that \h refers to horizontal whitespace (i.e. a space or tab) in PHP and a hex digit in Ruby. Similarly \H refers to something that isn't horizontal whitespace in PHP and isn't a hex digit in Ruby.,,,,,,
,,,,,,
unicode character class abbreviations,,,,,,
,,,,,,
The supported character class abbreviations for sets of Unicode characters.,,,,,,
,,,,,,
Each Unicode character belongs to one of these major categories:,,,,,,
,,,,,,
C,Other,,,,,
L,Letter,,,,,
M,Mark,,,,,
N,Number,,,,,
P,Punctuation,,,,,
S,Symbol,,,,,
Z,Separator,,,,,
,,,,,,
"Each major category is subdivided into multiple minor categories. Each minor category has a two letter code, where the first letter is the major category. For example, Nd is ""Number, decimal digit"".",,,,,,
,,,,,,
Download UnicodeData.txt to find out which major and minor category and character belongs to.,,,,,,
,,,,,,
anchors,,,,,,
,,,,,,
The supported anchors.,,,,,,
,,,,,,
match test,,,,,,
,,,,,,
How to test whether a string matches a regular expression.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
The re.match function returns true only if the regular expression matches the beginning of the string. re.search returns true if the regular expression matches any substring of the of string.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
match is a method of both Regexp and String so can match with both,,,,,,
,,,,,,
"/1999/.match(""1999"")",,,,,,
,,,,,,
and,,,,,,
,,,,,,
"""1999"".match(/1999/)",,,,,,
,,,,,,
When variables are involved it is safer to invoke the Regexp method because string variables are more likely to contain nil.,,,,,,
,,,,,,
case insensitive match test,,,,,,
,,,,,,
How to perform a case insensitive match test.,,,,,,
,,,,,,
modifiers,,,,,,
,,,,,,
Modifiers that can be used to adjust the behavior of a regular expression.,,,,,,
,,,,,,
The lists are not comprehensive. For all languages except Ruby there are additional modifiers.,,,,,,
,,,,,,
modifier,behavior,,,,,
e,"PHP: when used with preg_replace, the replacement string, after backreferences are substituted, is eval'ed as PHP code and the result is used as the replacement.",,,,,
g,JavaScript: read all non-overlapping matches into an array.,,,,,
"i, re.I",all: ignores case. Upper case letters match lower case letters and vice versa.,,,,,
"m, re.M","JavaScript, PHP, Python: makes the ^ and $ match the right and left edge of newlines in addition to the beginning and end of the string.
Ruby: makes the period . match newline characters.",,,,,
o,Ruby: performs variable interpolation #{ } only once per execution of the program.,,,,,
"s, re.S","PHP, Python: makes the period . match newline characters.",,,,,
"x, re.X",all: ignores whitespace (outside of [] character classes) and #-style comments in the regex.,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"Python modifiers are bit flags. To use more than one flag at the same time, join them with bit or: |",,,,,,
,,,,,,
There are alternative identifiers for the modifiers:,,,,,,
,,,,,,
re.A,re.ASCII,,,,,
re.I,re.IGNORECASE,,,,,
re.M,re.MULTILINE,,,,,
re.S,re.DOTALL,,,,,
re.X,re.VERBOSE,,,,,
,,,,,,
substitution,,,,,,
,,,,,,
How to replace all occurrences of a matching pattern in a string with the provided substitution string.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
The number of occurrences replaced can be controlled with a 4th argument to preg_replace:,,,,,,
,,,,,,
"$s = ""foo bar bar"";",,,,,,
"preg_replace('/bar/', ""baz"", $s, 1);",,,,,,
,,,,,,
"If no 4th argument is provided, all occurrences are replaced.",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
The 3rd argument to sub controls the number of occurrences which are replaced.,,,,,,
,,,,,,
s = 'foo bar bar',,,,,,
"re.compile('bar').sub('baz', s, 1)",,,,,,
,,,,,,
"If there is no 3rd argument, all occurrences are replaced.",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"The gsub operator returns a copy of the string with the substitution made, if any. The gsub! performs the substitution on the original string and returns the modified string.",,,,,,
,,,,,,
The sub and sub! operators only replace the first occurrence of the match pattern.,,,,,,
,,,,,,
"match, prematch, postmatch",,,,,,
,,,,,,
"How to get the substring that matched the regular expression, as well as the part of the string before and after the matching substring.",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"The special variables $&, $`, and $' also contain the match, prematch, and postmatch.",,,,,,
,,,,,,
group capture,,,,,,
,,,,,,
How to get the substrings which matched the parenthesized parts of a regular expression.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"Ruby has syntax for extracting a group from a match in a single expression. The following evaluates to ""1999"":",,,,,,
,,,,,,
"""1999-07-08""[/(\d{4})-(\d{2})-(\d{2})/, 1]",,,,,,
,,,,,,
named group capture,,,,,,
,,,,,,
How to get the substrings which matched the parenthesized parts of a regular expression and put them into a dictionary.,,,,,,
,,,,,,
"For reference, we call the (?P<foo>...) notation Python-style and the (?<foo>...) notation Perl-style.",,,,,,
,,,,,,
php:,,,,,,
,,,,,,
PHP originally supported Python-style named groups since that was the style that was added to the PCRE regex engine. Perl-style named groups were added to PHP 5.2.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
The Python interpreter was the first to support named groups.,,,,,,
,,,,,,
scan,,,,,,
,,,,,,
How to return all non-overlapping substrings which match a regular expression as an array.,,,,,,
,,,,,,
backreference in match and substitution,,,,,,
,,,,,,
How to use backreferences in a regex; how to use backreferences in the replacement string of substitution.,,,,,,
,,,,,,
recursive regex,,,,,,
,,,,,,
An examples of a recursive regex.,,,,,,
,,,,,,
The example matches substrings containing balanced parens.,,,,,,
,,,,,,
Date and Time,,,,,,
,,,,,,
"In ISO 8601 terminology, a date specifies a day in the Gregorian calendar and a time does not contain date information; it merely specifies a time of day. A data type which combines both date and time information is convenient, but ISO 8601 doesn't provide a name for such an entity. PHP, Python, and C# use the compound noun datetime for combined date and time values and we adopt it here as a generic term.",,,,,,
,,,,,,
"An useful property of ISO 8601 dates, times, and datetimes is that they are correctly ordered by a lexical sort on their string representations. This is because they are big-endian (the year is the leftmost element) and they used fixed-length, zero-padded fields with numerical values for each term in the string representation.",,,,,,
,,,,,,
"The C standard library provides two methods for representing dates. The first is the Unix epoch, which is the seconds since the beginning of January 1, 1970 in UTC. If such a time were stored in a 32-bit signed integer, the rollover would happen on January 18, 2038. The Unix epoch is an example of a serial datetime, in which the value is stored as a single numeric value representing the difference in time in some unit from a specially designated datetime called the epoch.",,,,,,
,,,,,,
"Another serial datetime is the Windows file time, which is the number of 100 nanosecond intervals since the beginning of January 1, 1601 UTC. It was introduced when journaling was added to NTFS as part of the Windows 2000 launch.",,,,,,
,,,,,,
"Some serial datetimes use days as the unit. The Excel serial number is the number of days since December 31, 1899. The Julian day number, used in astronomy, is the number of days since November 24, 4714 BCE in the proleptic Gregorian calendar. Julian days start at noon GMT.",,,,,,
,,,,,,
"A broken-down datetime uses multiple numeric values to represent the components of a calendar date and time. An example from the C standard library is the tm struct, a definition of which can be found on Unix systems in /usr/include/time.h:",,,,,,
,,,,,,
struct tm {,,,,,,
int     tm_sec;         /* seconds after the minute [0-60] */,,,,,,
int     tm_min;         /* minutes after the hour [0-59] */,,,,,,
int     tm_hour;        /* hours since midnight [0-23] */,,,,,,
int     tm_mday;        /* day of the month [1-31] */,,,,,,
int     tm_mon;         /* months since January [0-11] */,,,,,,
int     tm_year;        /* years since 1900 */,,,,,,
int     tm_wday;        /* days since Sunday [0-6] */,,,,,,
int     tm_yday;        /* days since January 1 [0-365] */,,,,,,
int     tm_isdst;       /* Daylight Savings Time flag */,,,,,,
long    tm_gmtoff;      /* offset from CUT in seconds */,,,,,,
char    *tm_zone;       /* timezone abbreviation */,,,,,,
};,,,,,,
,,,,,,
"The Linux man pages call the tm struct a ""broken-down"" date and time, whereas the BSD man pages call it a ""broken-out"" date and time.",,,,,,
,,,,,,
"The first day in the Gregorian calendar was 15 October 1582. The proleptic Gregorian calendar is an extension of the Gregorian calendar to earlier dates. When such dates are used, they should be called out to be precise. The epoch in the proleptic Gregorian calendar is the year 0001, also written 1 AD or 1 CE. The previous year is the year 0000, also written 1 BC or 1 BCE. The year before that is the year -0001, also written 2 BC or 2 BCE. The ISO 8601 standard recommends that years before 0000 or after 9999 be written with a plus or minus sign prefix.",,,,,,
,,,,,,
"An ordinal date is a broken-down date consisting of a year, followed by the day of the year. The ISO 8601 standard recommends that it be written in YYYY-DDD or YYYYDDD format. The corresponding strftime formats are %Y-%j and %Y%j.",,,,,,
,,,,,,
"A week date is a type of calendar which uses the year, week of the year, and day of the week to refer to to dates. In the ISO 8601 week date, the first week of the year is the week starting from Monday which contains January 4th. An ISO 8601 week date can thus have a different year number than the corresponding Gregorian date. The first week of the year is numbered 01, and the first day of the week, Monday, is numbered 1. Weeks are written in YYYY-Www-D or YYYYWwwD format, where the upper case W is literal. The corresponding strftime literals are %G-W%V-%u and %GW%V%u.",,,,,,
,,,,,,
"Common years have 365 days and leap years have 366 days. The extra day in February 29th. Leap years are years divisible by 4 but not 100, or years divisible by 400.",,,,,,
,,,,,,
"In 1967, the definition of a second was changed from 1/86,400 of a solar day to a value expressed in terms of radiation produced by 133Cs. Because the length of a solar day is irregular, leap seconds are occasionally used to keep things in sync. This is accomplished by occasionally adding a leap second to the end of June 30th or December 31st. The system also allows for removing the last second of June 30th or December 31st, though as of 2014 this hasn't been done.",,,,,,
,,,,,,
broken-down datetime type,,,,,,
,,,,,,
The data type used to hold a combined date and time.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
Python uses and exposes the tm struct of the C standard library. Python has a module called time which is a thin wrapper to the standard library functions which operate on this struct. Here is how get a tm struct in Python:,,,,,,
,,,,,,
import time,,,,,,
utc = time.gmtime(time.time()),,,,,,
t = time.localtime(time.time()),,,,,,
,,,,,,
current datetime,,,,,,
,,,,,,
How to get the combined date and time for the present moment in both local time and UTC.,,,,,,
,,,,,,
current unix epoch,,,,,,
,,,,,,
How to get the current time as a Unix epoch timestamp.,,,,,,
,,,,,,
broken-down datetime to unix epoch,,,,,,
,,,,,,
"How to convert a datetime type to the Unix epoch which is the number of seconds since the start of January 1, 1970 UTC.",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
The Python datetime object created by now() and utcnow() has no timezone information associated with it. The strftime() method assumes a receiver with no time zone information represents a local time. Thus it is an error to call strftime() on the return value of utcnow().,,,,,,
,,,,,,
Here are two different ways to get the current Unix epoch. The second way is faster:,,,,,,
,,,,,,
import calendar,,,,,,
import datetime,,,,,,
int(datetime.datetime.now().strftime('%s')),,,,,,
calendar.timegm(datetime.datetime.utcnow().utctimetuple()),,,,,,
,,,,,,
"Replacing now() with utcnow() in the first way, or utcnow() with now() in the second way produces an incorrect value.",,,,,,
,,,,,,
unix epoch to broken-down datetime,,,,,,
,,,,,,
How to convert the Unix epoch to a broken-down datetime.,,,,,,
,,,,,,
format datetime,,,,,,
,,,,,,
How to format a datetime as a string using using a string of format specifiers.,,,,,,
,,,,,,
The format specifiers used by the strftime function from the standard C library and the Unix date command:,,,,,,
,,,,,,
,numeric,,,alphanumeric,notes,
year,%Y %C%y,,,,%C and %y are the first two and last two digits of a 4 digit year,
month,%m,,,%B %b %h,"%m is zero padded in {01, …, 12}
%h is blank padded in {1, …, 12}",
day of month,%d %e,,,,"%d is zero padded in {01, …, 31}
%e is blank padded in {1, …, 31}",
hour,%H %k,,,%I%p %l%p,%H and %k are in zero and blank padded,
minute,%M,,,,"%M is zero padded in the range {00, …, 59}",
second,%S,,,,"%S is zero padded, due to leap seconds it is in the range {00, …, 60}",
day of year,%j,,,,"%j is zero padded in the range {000, …, 366}",
week date year,%G %g,,,,the ISO 8601 week date year. Used with %V and %u.,
week of year,%V %U %W,,,,"%V is the ISO 8601 week of year. In {01, 53}. Used with %G
%U is the week number when Sunday starts the week. In {00, 53}. Used with %Y and %C%y.
%W is the week number when Monday starts the week. In {00, 53}. Used with %Y and %C%y.",
day of week,%u %w,,,%A %a,"%u is in {{1, …, 7} starting at Monday
%w is in {0, …, 6} starting at Sunday",
unix epoch,%s,,,,,
date,%D %F %x,,,%v,"%D is %m/%d/%y
%F is %Y-%m-%d
%x locale dependent; same as %D in US",
time,%T %R %X,,,%r,"%T is %H:%M:%S
%R is %H:%M
%X is locale dependent; same as %T in US
%r is %I:%M:%S %p",
date and time,,,,%c,locale dependent,
"date, time, and tmz",,,,%+,locale dependent,
time zone name,,,,%Z,"the ambiguous 3 letter abbrevation; e.g. ""PST""",
time zone offset,%z,,,,"""-0800"" for Pacific Standard Time",
percent sign,,,,%%,,
newline,,,,%n,,
tab,,,,%t,,
,,,,,,
php:,,,,,,
,,,,,,
"PHP supports strftime but it also has its own time formatting system used by date, DateTime::format, and DateTime::createFromFormat. The letters used in the PHP time formatting system are described here.",,,,,,
,,,,,,
parse datetime,,,,,,
,,,,,,
How to parse a datetime using the format notation of the strptime function from the standard C library.,,,,,,
,,,,,,
parse datetime w/o format,,,,,,
,,,,,,
How to parse a date without providing a format string.,,,,,,
,,,,,,
date parts,,,,,,
,,,,,,
"How to get the year, month, and day of month from a datetime.",,,,,,
,,,,,,
time parts,,,,,,
,,,,,,
"How to the hour, minute, and second from a datetime.",,,,,,
,,,,,,
build broken-down datetime,,,,,,
,,,,,,
How to build a broken-down datetime from the date parts and the time parts.,,,,,,
,,,,,,
datetime subtraction,,,,,,
,,,,,,
The data type that results when subtraction is performed on two combined date and time values.,,,,,,
,,,,,,
add duration,,,,,,
,,,,,,
How to add a duration to a datetime.,,,,,,
,,,,,,
A duration can easily be added to a datetime value when the value is a Unix epoch value.,,,,,,
,,,,,,
"ISO 8601 distinguishes between a time interval, which is defined by two datetime endpoints, and a duration, which is the length of a time interval and can be defined by a unit of time such as '10 minutes'. A time interval can also be defined by date and time representing the start of the interval and a duration.",,,,,,
,,,,,,
"ISO 8601 defines notation for durations. This notation starts with a 'P' and uses a 'T' to separate the day and larger units from the hour and smaller units. Observing the location relative to the 'T' is important for interpreting the letter 'M', which is used for both months and minutes.",,,,,,
,,,,,,
local time zone determination,,,,,,
,,,,,,
"Do datetime values include time zone information. When a datetime value for the local time is created, how the local time zone is determined.",,,,,,
,,,,,,
On Unix systems processes determine the local time zone by inspecting the binary file /etc/localtime. To examine it from the command line use zdump:,,,,,,
,,,,,,
$ zdump /etc/localtime,,,,,,
/etc/localtime  Tue Dec 30 10:03:27 2014 PST,,,,,,
,,,,,,
On Windows the time zone name is stored in the registry at HKLM\SYSTEM\CurrentControlSet\Control\TimeZoneInformation\TimeZoneKeyName.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
The default time zone can also be set in the php.ini file.,,,,,,
,,,,,,
"date.timezone = ""America/Los_Angeles""",,,,,,
,,,,,,
Here is the list of timezones supported by PHP.,,,,,,
,,,,,,
nonlocal time zone,,,,,,
,,,,,,
How to convert a datetime to the equivalent datetime in an arbitrary time zone.,,,,,,
,,,,,,
time zone info,,,,,,
,,,,,,
How to get the name of the time zone and the offset in hours from UTC.,,,,,,
,,,,,,
Timezones are often identified by three or four letter abbreviations. Many of the abbreviations do not uniquely identify a time zone. Furthermore many of the time zones have been altered in the past. The Olson database (aka Tz database) decomposes the world into zones in which the local clocks have all been set to the same time since 1970; it gives these zones unique names.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
The Time class has a zone method which returns the time zone abbreviation for the object. There is a tzinfo gem which can be used to create time zone objects using the Olson database name. This can in turn be used to convert between UTC times and local times which are daylight saving aware.,,,,,,
,,,,,,
daylight savings test,,,,,,
,,,,,,
Is a datetime in daylight savings time?,,,,,,
,,,,,,
microseconds,,,,,,
,,,,,,
"How to get the microseconds component of a combined date and time value. The SI abbreviations for milliseconds and microseconds are ms and μs, respectively. The C standard library uses the letter u as an abbreviation for micro. Here is a struct defined in /usr/include/sys/time.h:",,,,,,
,,,,,,
struct timeval {,,,,,,
"time_t       tv_sec;   /* seconds since Jan. 1, 1970 */",,,,,,
suseconds_t  tv_usec;  /* and microseconds */,,,,,,
};,,,,,,
,,,,,,
sleep,,,,,,
,,,,,,
How to put the process to sleep for a specified number of seconds. In Python and Ruby the default version of sleep supports a fractional number of seconds.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
PHP provides usleep which takes an argument in microseconds:,,,,,,
,,,,,,
usleep(500000);,,,,,,
,,,,,,
timeout,,,,,,
,,,,,,
How to cause a process to timeout if it takes too long.,,,,,,
,,,,,,
Techniques relying on SIGALRM only work on Unix systems.,,,,,,
,,,,,,
Arrays,,,,,,
,,,,,,
What the languages call their basic container types:,,,,,,
,,,,,,
,javascript,,,php,python,ruby
array,,,,array,"list, tuple, sequence","Array, Enumerable"
dictionary,,,,array,"dict, mapping",Hash
,,,,,,
javascript:,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
PHP uses the same data structure for arrays and dictionaries.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"Python has the mutable list and the immutable tuple. Both are sequences. To be a sequence, a class must implement __getitem__, __setitem__, __delitem__, __len__, __contains__, __iter__, __add__, __mul__, __radd__, and __rmul__.",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"Ruby provides an Array datatype. If a class defines an each iterator and a comparison operator <=>, then it can mix in the Enumerable module.",,,,,,
,,,,,,
literal,,,,,,
,,,,,,
Array literal syntax.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"The %w operator splits the following string on whitespace and creates an array of strings from the words. The character following the %w is the string delimiter. If the following character is (, [, or {, then the character which terminates the string must be ), ], or }.",,,,,,
,,,,,,
"The %W operator is like the %w operator, except that double-quote style #{ } expressions will be interpolated.",,,,,,
,,,,,,
quote words,,,,,,
,,,,,,
"The quote words operator, which is a literal for arrays of strings where each string contains a single word.",,,,,,
,,,,,,
size,,,,,,
,,,,,,
How to get the number of elements in an array.,,,,,,
,,,,,,
empty test,,,,,,
,,,,,,
How to test whether an array is empty.,,,,,,
,,,,,,
lookup,,,,,,
,,,,,,
How to access a value in an array by index.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
A negative index refers to the length - index element.,,,,,,
,,,,,,
">>> a = [1, 2, 3]",,,,,,
>>> a[-1],,,,,,
3,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
A negative index refers to to the length - index element.,,,,,,
,,,,,,
update,,,,,,
,,,,,,
How to update the value at an index.,,,,,,
,,,,,,
out-of-bounds behavior,,,,,,
,,,,,,
What happens when the value at an out-of-bounds index is referenced.,,,,,,
,,,,,,
element index,,,,,,
,,,,,,
How to get the index of an element in an array.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
"Setting the 3rd argument of array_search to true makes the search use === for an equality test. Otherwise the == test is performed, which makes use of implicit type conversions.",,,,,,
,,,,,,
slice,,,,,,
,,,,,,
How to slice a subarray from an array by specifying a start index and an end index; how to slice a subarray from an array by specifying an offset index and a length index.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"Slices can leave the first or last index unspecified, in which case the first or last index of the sequence is used:",,,,,,
,,,,,,
">>> a=[1, 2, 3, 4, 5]",,,,,,
>>> a[:3],,,,,,
"[1, 2, 3]",,,,,,
,,,,,,
Python has notation for taking every nth element:,,,,,,
,,,,,,
">>> a=[1, 2, 3, 4, 5]",,,,,,
>>> a[::2],,,,,,
"[1, 3, 5]",,,,,,
,,,,,,
"The third argument in the colon-delimited slice argument can be negative, which reverses the order of the result:",,,,,,
,,,,,,
">>> a = [1, 2, 3, 4]",,,,,,
>>> a[::-1],,,,,,
"[4, 3, 2, 1]",,,,,,
,,,,,,
slice to end,,,,,,
,,,,,,
How to slice to the end of an array.,,,,,,
,,,,,,
The examples take all but the first element of the array.,,,,,,
,,,,,,
manipulate back,,,,,,
,,,,,,
How to add and remove elements from the back or high index end of an array.,,,,,,
,,,,,,
These operations can be used to use the array as a stack.,,,,,,
,,,,,,
manipulate front,,,,,,
,,,,,,
How to add and remove elements from the front or low index end of an array.,,,,,,
,,,,,,
These operations can be used to use the array as a stack. They can be used with the operations that manipulate the back of the array to use the array as a queue.,,,,,,
,,,,,,
concatenate,,,,,,
,,,,,,
How to create an array by concatenating two arrays; how to modify an array by concatenating another array to the end of it.,,,,,,
,,,,,,
replicate,,,,,,
,,,,,,
How to create an array containing the same value replicated n times.,,,,,,
,,,,,,
copy,,,,,,
,,,,,,
"How to make an address copy, a shallow copy, and a deep copy of an array.",,,,,,
,,,,,,
"After an address copy is made, modifications to the copy also modify the original array.",,,,,,
,,,,,,
"After a shallow copy is made, the addition, removal, or replacement of elements in the copy does not modify of the original array. However, if elements in the copy are modified, those elements are also modified in the original array.",,,,,,
,,,,,,
A deep copy is a recursive copy. The original array is copied and a deep copy is performed on all elements of the array. No change to the contents of the copy will modify the contents of the original array.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
The slice operator can be used to make a shallow copy:,,,,,,
,,,,,,
a2 = a[:],,,,,,
,,,,,,
"list(v) always returns a list, but v[:] returns a value of the same as v. The slice operator can be used in this manner on strings and tuples but there is little incentive to do so since both are immutable.",,,,,,
,,,,,,
copy.copy can be used to make a shallow copy on types that don't support the slice operator such as a dictionary. Like the slice operator copy.copy returns a value with the same type as the argument.,,,,,,
,,,,,,
array as function argument,,,,,,
,,,,,,
How an array is passed to a function when provided as an argument.,,,,,,
,,,,,,
iterate over elements,,,,,,
,,,,,,
How to iterate over the elements of an array.,,,,,,
,,,,,,
iterate over indices and elements,,,,,,
,,,,,,
How to iterate over the element-index pairs.,,,,,,
,,,,,,
iterate over range,,,,,,
,,,,,,
Iterate over a range without instantiating it as a list.,,,,,,
,,,,,,
instantiate range as array,,,,,,
,,,,,,
How to convert a range to an array.,,,,,,
,,,,,,
Python 3 ranges and Ruby ranges implement some of the functionality of arrays without allocating space to hold all the elements.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
In Python 2 range() returns a list.,,,,,,
,,,,,,
In Python 3 range() returns an object which implements the immutable sequence API.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
The Range class includes the Enumerable module.,,,,,,
,,,,,,
reverse,,,,,,
,,,,,,
"How to create a reversed copy of an array, and how to reverse an array in place.",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
reversed returns an iterator which can be used in a for/in construct:,,,,,,
,,,,,,
"print(""counting down:"")",,,,,,
"for i in reversed([1, 2, 3]):",,,,,,
print(i),,,,,,
,,,,,,
reversed can be used to create a reversed list:,,,,,,
,,,,,,
"a = list(reversed([1, 2, 3]))",,,,,,
,,,,,,
sort,,,,,,
,,,,,,
"How to create a sorted copy of an array, and how to sort an array in place. Also, how to set the comparison function when sorting.",,,,,,
,,,,,,
php:,,,,,,
,,,,,,
usort sorts an array in place and accepts a comparison function as a 2nd argument:,,,,,,
,,,,,,
"function cmp($x, $y) {",,,,,,
$lx = strtolower($x);,,,,,,
$ly = strtolower($y);,,,,,,
if ( $lx < $ly ) { return -1; },,,,,,
if ( $lx == $ly ) { return 0; },,,,,,
return 1;,,,,,,
},,,,,,
"$a = [""b"", ""A"", ""a"", ""B""];",,,,,,
"usort($a, ""cmp"");",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
In Python 2 it is possible to specify a binary comparision function when calling sort:,,,,,,
,,,,,,
"a = [(1, 3), (2, 2), (3, 1)]",,,,,,
"a.sort(cmp=lambda a, b: -1 if a[1] < b[1] else 1)",,,,,,
# a now contains:,,,,,,
"[(3, 1), (2, 2), (1, 3)]",,,,,,
,,,,,,
In Python 3 the cmp parameter was removed. One can achieve the same effect by defining cmp method on the class of the list element.,,,,,,
,,,,,,
dedupe,,,,,,
,,,,,,
How to remove extra occurrences of elements from an array.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"Python sets support the len, in, and for operators. It may be more efficient to work with the result of the set constructor directly rather than convert it back to a list.",,,,,,
,,,,,,
membership,,,,,,
,,,,,,
How to test for membership in an array.,,,,,,
,,,,,,
intersection,,,,,,
,,,,,,
How to compute an intersection.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
Python has literal notation for sets:,,,,,,
,,,,,,
"{1, 2, 3}",,,,,,
,,,,,,
Use set and list to convert lists to sets and vice versa:,,,,,,
,,,,,,
"a = list({1, 2, 3})",,,,,,
"ensemble = set([1, 2, 3])",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
The intersect operator & always produces an array with no duplicates.,,,,,,
,,,,,,
union,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
The union operator | always produces an array with no duplicates.,,,,,,
,,,,,,
"relative complement, symmetric difference",,,,,,
,,,,,,
How to compute the relative complement of two arrays or sets; how to compute the symmetric difference.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"If an element is in the right argument, then it will not be in the return value even if it is contained in the left argument multiple times.",,,,,,
,,,,,,
map,,,,,,
,,,,,,
Create an array by applying a function to each element of a source array.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
The map! method applies the function to the elements of the array in place.,,,,,,
,,,,,,
collect and collect! are synonyms for map and map!.,,,,,,
,,,,,,
filter,,,,,,
,,,,,,
Create an array containing the elements of a source array which match a predicate.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
The in place version is select!.,,,,,,
,,,,,,
reject returns the complement of select. reject! is the in place version.,,,,,,
,,,,,,
The partition method returns two arrays:,,,,,,
,,,,,,
"a = [1, 2, 3]",,,,,,
"lt2, ge2 = a.partition { |n| n < 2 }",,,,,,
,,,,,,
reduce,,,,,,
,,,,,,
Return the result of applying a binary operator to all the elements of the array.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
reduce is not needed to sum a list of numbers:,,,,,,
,,,,,,
"sum([1, 2, 3])",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
The code for the reduction step can be provided by name. The name can be a symbol or a string:,,,,,,
,,,,,,
"[1, 2, 3].inject(:+)",,,,,,
"[1, 2, 3].inject(""+"")",,,,,,
"[1, 2, 3].inject(0, :+)",,,,,,
"[1, 2, 3].inject(0, ""+"")",,,,,,
,,,,,,
universal and existential tests,,,,,,
,,,,,,
How to test whether a condition holds for all members of an array; how to test whether a condition holds for at least one member of any array.,,,,,,
,,,,,,
A universal test is always true for an empty array. An existential test is always false for an empty array.,,,,,,
,,,,,,
"A existential test can readily be implemented with a filter. A universal test can also be implemented with a filter, but it is more work: one must set the condition of the filter to the negation of the predicate and test whether the result is empty.",,,,,,
,,,,,,
shuffle and sample,,,,,,
,,,,,,
How to shuffle an array. How to extract a random sample from an array.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
The array_rand function returns a random sample of the indices of an array. The result can easily be converted to a random sample of array values:,,,,,,
,,,,,,
"$a = [1, 2, 3, 4];",,,,,,
$sample = [];,,,,,,
"foreach (array_rand($a, 2) as $i) { array_push($sample, $a[$i]); }",,,,,,
,,,,,,
flatten,,,,,,
,,,,,,
How to flatten nested arrays by one level or completely.,,,,,,
,,,,,,
"When nested arrays are flattened by one level, the depth of each element which is not in the top level array is reduced by one.",,,,,,
,,,,,,
Flattening nested arrays completely leaves no nested arrays. This is equivalent to extracting the leaf nodes of a tree.,,,,,,
,,,,,,
"php, python:",,,,,,
,,,,,,
To flatten by one level use reduce. Remember to handle the case where an element is not array.,,,,,,
,,,,,,
To flatten completely write a recursive function.,,,,,,
,,,,,,
zip,,,,,,
,,,,,,
How to interleave arrays. In the case of two arrays the result is an array of pairs or an associative list.,,,,,,
,,,,,,
Dictionaries,,,,,,
,,,,,,
literal,,,,,,
,,,,,,
The syntax for a dictionary literal.,,,,,,
,,,,,,
size,,,,,,
,,,,,,
How to get the number of dictionary keys in a dictionary.,,,,,,
,,,,,,
lookup,,,,,,
,,,,,,
How to lookup a dictionary value using a dictionary key.,,,,,,
,,,,,,
missing key behavior,,,,,,
,,,,,,
What happens when a lookup is performed on a key that is not in a dictionary.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
Use dict.get() to avoid handling KeyError exceptions:,,,,,,
,,,,,,
d = {},,,,,,
d.get('lorem')      # returns None,,,,,,
"d.get('lorem', '')  # returns ''",,,,,,
,,,,,,
is key present,,,,,,
,,,,,,
How to check for the presence of a key in a dictionary without raising an exception. Distinguishes from the case where the key is present but mapped to null or a value which evaluates to false.,,,,,,
,,,,,,
delete,,,,,,
,,,,,,
How to remove a key/value pair from a dictionary.,,,,,,
,,,,,,
"from array of pairs, from even length array",,,,,,
,,,,,,
How to create a dictionary from an array of pairs; how to create a dictionary from an even length array.,,,,,,
,,,,,,
merge,,,,,,
,,,,,,
How to merge the values of two dictionaries.,,,,,,
,,,,,,
"In the examples, if the dictionaries d1 and d2 share keys then the values from d2 will be used in the merged dictionary.",,,,,,
,,,,,,
invert,,,,,,
,,,,,,
"How to turn a dictionary into its inverse. If a key 'foo' is mapped to value 'bar' by a dictionary, then its inverse will map the key 'bar' to the value 'foo'. However, if multiple keys are mapped to the same value in the original dictionary, then some of the keys will be discarded in the inverse.",,,,,,
,,,,,,
iteration,,,,,,
,,,,,,
How to iterate through the key/value pairs in a dictionary.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
In Python 2.7 dict.items() returns a list of pairs and dict.iteritems() returns an iterator on the list of pairs.,,,,,,
,,,,,,
In Python 3 dict.items() returns an iterator and dict.iteritems() has been removed.,,,,,,
,,,,,,
keys and values as arrays,,,,,,
,,,,,,
How to convert the keys of a dictionary to an array; how to convert the values of a dictionary to an array.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
In Python 3 dict.keys() and dict.values() return read-only views into the dict. The following code illustrates the change in behavior:,,,,,,
,,,,,,
d = {},,,,,,
keys = d.keys(),,,,,,
d['foo'] = 'bar',,,,,,
if 'foo' in keys:,,,,,,
print('running Python 3'),,,,,,
else:,,,,,,
print('running Python 2'),,,,,,
,,,,,,
sort by values,,,,,,
,,,,,,
How to iterate through the key-value pairs in the order of the values.,,,,,,
,,,,,,
"default value, computed value",,,,,,
,,,,,,
How to create a dictionary with a default value for missing keys; how to compute and store the value on lookup.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
Extend ArrayObject to compute values on lookup:,,,,,,
,,,,,,
class Factorial extends ArrayObject {,,,,,,
public function offsetExists($i) {,,,,,,
return true;,,,,,,
},,,,,,
public function offsetGet($i) {,,,,,,
if(!parent::offsetExists($i)) {,,,,,,
if ( $i < 2 ) {,,,,,,
"parent::offsetSet($i, 1);",,,,,,
},,,,,,
else {,,,,,,
$n = $this->offsetGet($i-1);,,,,,,
"parent::offsetSet($i, $i*$n);",,,,,,
},,,,,,
},,,,,,
return parent::offsetGet($i);,,,,,,
},,,,,,
},,,,,,
$factorial = new Factorial();,,,,,,
,,,,,,
Functions,,,,,,
,,,,,,
Python has both functions and methods. Ruby only has methods: functions defined at the top level are in fact methods on a special main object. Perl subroutines can be invoked with a function syntax or a method syntax.,,,,,,
,,,,,,
define,,,,,,
,,,,,,
How to define a function.,,,,,,
,,,,,,
invoke,,,,,,
,,,,,,
How to invoke a function.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"Parens are mandatory, even for functions which take no arguments. Omitting the parens returns the function or method as an object. Whitespace can occur between the function name and the following left paren.",,,,,,
,,,,,,
In Python 3 print is a function instead of a keyword; parens are mandatory around the argument.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"Ruby parens are optional. Leaving out the parens results in ambiguity when function invocations are nested. The interpreter resolves the ambiguity by assigning as many arguments as possible to the innermost function invocation, regardless of its actual arity. It is mandatory that the left paren not be separated from the method name by whitespace.",,,,,,
,,,,,,
apply function to array,,,,,,
,,,,,,
How to apply a function to an array.,,,,,,
,,,,,,
perl:,,,,,,
,,,,,,
"Perl passes the elements of arrays as individual arguments. In the following invocation, the function foo() does not know which arguments came from which array. For that matter it does not know how many arrays were used in the invocation:",,,,,,
,,,,,,
"foo(@a, @b);",,,,,,
,,,,,,
If the elements must be kept in their respective arrays the arrays must be passed by reference:,,,,,,
,,,,,,
sub foo {,,,,,,
my @a = @{$_[0]};,,,,,,
my @b = @{$_[1]};,,,,,,
},,,,,,
"foo(\@a, \@b);",,,,,,
,,,,,,
"When hashes are used as arguments, each key and value becomes its own argument.",,,,,,
,,,,,,
missing argument behavior,,,,,,
,,,,,,
What happens when a function is invoked with too few arguments.,,,,,,
,,,,,,
extra argument behavior,,,,,,
,,,,,,
What happens when a function is invoked with too many arguments.,,,,,,
,,,,,,
default argument,,,,,,
,,,,,,
How to declare a default value for an argument.,,,,,,
,,,,,,
variadic function,,,,,,
,,,,,,
How to write a function which accepts a variable number of argument.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
This function accepts one or more arguments. Invoking it without any arguments raises a TypeError:,,,,,,
,,,,,,
"def poker(dealer, *players):",,,,,,
...,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
This function accepts one or more arguments. Invoking it without any arguments raises an ArgumentError:,,,,,,
,,,,,,
"def poker(dealer, *players)",,,,,,
...,,,,,,
end,,,,,,
,,,,,,
parameter alias,,,,,,
,,,,,,
How to make a parameter an alias of a variable in the caller.,,,,,,
,,,,,,
named parameters,,,,,,
,,,,,,
How to write a function which uses named parameters and how to invoke it.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
The caller can use named parameter syntax at the point of invocation even if the function was defined using positional parameters.,,,,,,
,,,,,,
"The splat operator * collects the remaining arguments into a list. In a function invocation, the splat can be used to expand an array into separate arguments.",,,,,,
,,,,,,
"The double splat operator ** collects named parameters into a dictionary. In a function invocation, the double splat expands a dictionary into named parameters.",,,,,,
,,,,,,
A double splat operator can be used to force the caller to use named parameter syntax. This method has the disadvantage that spelling errors in the parameter name are not caught:,,,,,,
,,,,,,
"def fequal(x, y, **kwargs):",,,,,,
eps = opts.get('eps') or 0.01,,,,,,
return abs(x - y) < eps,,,,,,
,,,,,,
In Python 3 named parameters can be made mandatory:,,,,,,
,,,,,,
"def fequal(x, y, *, eps):",,,,,,
return abs(x-y) < eps,,,,,,
"fequal(1.0, 1.001, eps=0.01)  # True",,,,,,
"fequal(1.0, 1.001)                 # raises TypeError",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
In Ruby 2.1 named parameters can be made mandatory:,,,,,,
,,,,,,
"def fequals(x, y, eps:)",,,,,,
(x - y).abs < eps,,,,,,
end,,,,,,
# false:,,,,,,
"fequals(1.0, 1.001, eps: 0.1**10)",,,,,,
# ArgumentError:,,,,,,
"fequals(1.0, 1.001)",,,,,,
,,,,,,
return value,,,,,,
,,,,,,
How the return value of a function is determined.,,,,,,
,,,,,,
multiple return values,,,,,,
,,,,,,
How to return multiple values from a function.,,,,,,
,,,,,,
anonymous function literal,,,,,,
,,,,,,
The syntax for an anonymous function literal; i.e. a lambda function.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"Python lambdas cannot contain newlines or semicolons, and thus are limited to a single statement or expression. Unlike named functions, the value of the last statement or expression is returned, and a return is not necessary or permitted. Lambdas are closures and can refer to local variables in scope, even if they are returned from that scope.",,,,,,
,,,,,,
"If a closure function is needed that contains more than one statement, use a nested function:",,,,,,
,,,,,,
def make_nest(x):,,,,,,
b = 37,,,,,,
def nest(y):,,,,,,
c = x*y,,,,,,
c *= b,,,,,,
return c,,,,,,
return nest,,,,,,
n = make_nest(12*2),,,,,,
print(n(23)),,,,,,
,,,,,,
Python closures are read only.,,,,,,
,,,,,,
"A nested function can be returned and hence be invoked outside of its containing function, but it is not visible by its name outside of its containing function.",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
The following lambda and Proc object behave identically:,,,,,,
,,,,,,
sqr = lambda { |x| x * x },,,,,,
sqr = Proc.new {|x| x * x },,,,,,
,,,,,,
"With respect to control words, Proc objects behave like blocks and lambdas like functions. In particular, when the body of a Proc object contains a return or break statement, it acts like a return or break in the code which invoked the Proc object. A return in a lambda merely causes the lambda to exit, and a break inside a lambda must be inside an appropriate control structure contained with the lambda body.",,,,,,
,,,,,,
Ruby are alternate syntax for defining lambdas and invoking them:,,,,,,
,,,,,,
sqr = ->(x) {x*x},,,,,,
sqr.(2),,,,,,
,,,,,,
invoke anonymous function,,,,,,
,,,,,,
The syntax for invoking an anonymous function.,,,,,,
,,,,,,
function as value,,,,,,
,,,,,,
How to store a function in a variable and pass it as an argument.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
If a variable containing a string is used like a function then PHP will look for a function with the name in the string and attempt to invoke it.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
Python function are stored in variables by default. As a result a function and a variable with the same name cannot share the same scope. This is also the reason parens are mandatory when invoking Python functions.,,,,,,
,,,,,,
function with private state,,,,,,
,,,,,,
How to create a function with private state which persists between function invocations.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
Here is a technique for creating private state which exploits the fact that the expression for a default value is evaluated only once:,,,,,,
,,,,,,
def counter(_state=[0]):,,,,,,
_state[0] += 1,,,,,,
return _state[0],,,,,,
print(counter()),,,,,,
,,,,,,
closure,,,,,,
,,,,,,
How to create a first class function with access to the local variables of the local scope in which it was created.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
Python 2 has limited closures: access to local variables in the containing scope is read only and the bodies of anonymous functions must consist of a single expression.,,,,,,
,,,,,,
Python 3 permits write access to local variables outside the immediate scope when declared with nonlocal.,,,,,,
,,,,,,
generator,,,,,,
,,,,,,
How to create a function which can yield a value back to its caller and suspend execution.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
A Python generator is a function which returns an iterator.,,,,,,
,,,,,,
"An iterator is an object with two methods: iter(), which returns the iterator itself, and next(), which returns the next item or raises a StopIteration exception.",,,,,,
,,,,,,
"Python sequences, of which lists are an example, define an iter() for returned an iterator which traverses the sequence.",,,,,,
,,,,,,
Python iterators can be used in for/in statements and list comprehensions.,,,,,,
,,,,,,
"In the table below, p and q are variables for iterators.",,,,,,
,,,,,,
itertools,,,,,,
generator,description,,,,,
"count(start=0, step=1)",arithmetic sequence of integers,,,,,
cyle(p),cycle over p endlessly,,,,,
"repeat(v, [n])","return v n times, or endlessly",,,,,
"chain(p, q)",p followed by q,,,,,
"compress(p, q)",p if q,,,,,
"groupby(p, func)",,,,,,
"ifilter(pred, p)",p if pred(p),,,,,
"ifilterfalse(pred, p)",p if not pred(p),,,,,
"islice(p, [start], stop, [step])",,,,,,
imap,,,,,,
starmap(),,,,,,
tee(),,,,,,
takewhile(),,,,,,
izip(),,,,,,
izip_longest(),,,,,,
product(),,,,,,
permutations(),,,,,,
combinations(),,,,,,
combinations_with_replacement(),,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
Ruby generators are called fibers.,,,,,,
,,,,,,
decorator,,,,,,
,,,,,,
A decorator replaces an invocation of one function with another in a way that that is imperceptible to the client.,,,,,,
,,,,,,
Normally a decorator will add a small amount of functionality to the original function which it invokes. A decorator can modify the arguments before passing them to the original function or modify the return value before returning it to the client. Or it can leave the arguments and return value unmodified but perform a side effect such as logging the call.,,,,,,
,,,,,,
invoke operator like function,,,,,,
,,,,,,
How to call an operator using the function invocation syntax.,,,,,,
,,,,,,
This is useful when dealing with an API which accepts a function as an argument.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
The operator module provides functions which perform the same operations as the various operators. Using these functions is more efficient than wrapping the operators in lambdas.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
All operators can be invoked with method invocation syntax. The binary operator invocation syntax can be regarded as syntactic sugar.,,,,,,
,,,,,,
Execution Control,,,,,,
,,,,,,
if,,,,,,
,,,,,,
The conditional branch statement.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
PHP has the following alternate syntax for if statements:,,,,,,
,,,,,,
if ($n == 0):,,,,,,
"echo ""no hits\n"";",,,,,,
elseif ($n == 1):,,,,,,
"echo ""one hit\n"";",,,,,,
else:,,,,,,
"echo ""$n hits\n"";",,,,,,
endif;,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"If an if statement is the last statement executed in a function, the return value is the value of the branch that executed.",,,,,,
,,,,,,
Ruby if statements are expressions. They can be used on the right hand side of assignments:,,,,,,
,,,,,,
m = if n,,,,,,
1,,,,,,
else,,,,,,
0,,,,,,
end,,,,,,
,,,,,,
switch,,,,,,
,,,,,,
A statement which branches based on the value of an expression.,,,,,,
,,,,,,
while,,,,,,
,,,,,,
How to loop over a block while a condition is true.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
PHP provides a do-while loop. The body of such a loop is guaranteed to execute at least once.,,,,,,
,,,,,,
$i = 0;,,,,,,
do {,,,,,,
echo $i;,,,,,,
} while ($i > 0);,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
Ruby provides a loop with no exit condition:,,,,,,
,,,,,,
"def yes(expletive=""y"")",,,,,,
loop do,,,,,,
puts expletive,,,,,,
end,,,,,,
end,,,,,,
,,,,,,
Ruby also provides the until loop.,,,,,,
,,,,,,
Ruby loops can be used in expression contexts but they always evaluate to nil.,,,,,,
,,,,,,
for,,,,,,
,,,,,,
How to write a C-style for loop.,,,,,,
,,,,,,
break,,,,,,
,,,,,,
A break statement exits a while or for loop immediately.,,,,,,
,,,,,,
continue,,,,,,
,,,,,,
A continue statement skips ahead to the next iteration of a while or for loop.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"There is also a redo statement, which restarts the current iteration of a loop.",,,,,,
,,,,,,
statement modifiers,,,,,,
,,,,,,
Clauses added to the end of a statement to control execution.,,,,,,
,,,,,,
Ruby has conditional statement modifiers. Ruby also has looping statement modifiers.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
Ruby has the looping statement modifiers while and until:,,,,,,
,,,,,,
i = 0,,,,,,
i += 1 while i < 10,,,,,,
j = 10,,,,,,
j -= 1 until j < 0,,,,,,
,,,,,,
Exceptions,,,,,,
,,,,,,
base exception,,,,,,
,,,,,,
The base exception type or class that can be used to catch all exceptions.,,,,,,
,,,,,,
predefined exceptions,,,,,,
,,,,,,
A list of the more commonly encountered exceptions.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
Code for inspecting the descendants of a base class:,,,,,,
,,,,,,
"def print_class_hierarchy(cls, indent=0):",,,,,,
"print(' ' * indent, cls.__name__)",,,,,,
for subclass in cls.__subclasses__():,,,,,,
"print_class_hierarchy(subclass, indent + 2)",,,,,,
,,,,,,
The complete Python 3.5 exception hierarchy:,,,,,,
,,,,,,
BaseException,,,,,,
Exception,,,,,,
TypeError,,,,,,
ImportError,,,,,,
ZipImportError,,,,,,
AssertionError,,,,,,
error,,,,,,
ArithmeticError,,,,,,
FloatingPointError,,,,,,
OverflowError,,,,,,
ZeroDivisionError,,,,,,
SyntaxError,,,,,,
IndentationError,,,,,,
TabError,,,,,,
OSError,,,,,,
BlockingIOError,,,,,,
TimeoutError,,,,,,
PermissionError,,,,,,
FileExistsError,,,,,,
ConnectionError,,,,,,
BrokenPipeError,,,,,,
ConnectionAbortedError,,,,,,
ConnectionResetError,,,,,,
ConnectionRefusedError,,,,,,
NotADirectoryError,,,,,,
UnsupportedOperation,,,,,,
ChildProcessError,,,,,,
IsADirectoryError,,,,,,
ItimerError,,,,,,
InterruptedError,,,,,,
FileNotFoundError,,,,,,
ProcessLookupError,,,,,,
BufferError,,,,,,
ReferenceError,,,,,,
MemoryError,,,,,,
StopIteration,,,,,,
StopAsyncIteration,,,,,,
Error,,,,,,
SystemError,,,,,,
CodecRegistryError,,,,,,
ValueError,,,,,,
UnicodeError,,,,,,
UnicodeEncodeError,,,,,,
UnicodeDecodeError,,,,,,
UnicodeTranslateError,,,,,,
UnsupportedOperation,,,,,,
NameError,,,,,,
UnboundLocalError,,,,,,
AttributeError,,,,,,
Warning,,,,,,
DeprecationWarning,,,,,,
SyntaxWarning,,,,,,
FutureWarning,,,,,,
RuntimeWarning,,,,,,
UserWarning,,,,,,
UnicodeWarning,,,,,,
BytesWarning,,,,,,
PendingDeprecationWarning,,,,,,
ResourceWarning,,,,,,
ImportWarning,,,,,,
RuntimeError,,,,,,
RecursionError,,,,,,
NotImplementedError,,,,,,
_DeadlockError,,,,,,
LookupError,,,,,,
IndexError,,,,,,
KeyError,,,,,,
CodecRegistryError,,,,,,
EOFError,,,,,,
GeneratorExit,,,,,,
KeyboardInterrupt,,,,,,
SystemExit,,,,,,
,,,,,,
raise exception,,,,,,
,,,,,,
How to raise exceptions.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"Ruby has a throw keyword in addition to raise. throw can have a symbol as an argument, and will not convert a string to a RuntimeError exception.",,,,,,
,,,,,,
catch-all handler,,,,,,
,,,,,,
How to catch exceptions.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
PHP code must specify a variable name for the caught exception. Exception is the top of the exception hierarchy and will catch all exceptions.,,,,,,
,,,,,,
Internal PHP functions usually do not throw exceptions. They can be converted to exceptions with this signal handler:,,,,,,
,,,,,,
"function exception_error_handler($errno, $errstr, $errfile, $errline ) {",,,,,,
"throw new ErrorException($errstr, 0, $errno, $errfile, $errline);",,,,,,
},,,,,,
"set_error_handler(""exception_error_handler"");",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
A rescue Exception clause will catch any exception. A rescue clause with no exception type specified will catch exceptions that are subclasses of StandardError. Exceptions outside StandardError are usually unrecoverable and hence not handled in code.,,,,,,
,,,,,,
"In a rescue clause, the retry keyword will cause the begin clause to be re-executed.",,,,,,
,,,,,,
"In addition to begin and rescue, ruby has catch:",,,,,,
,,,,,,
catch (:done) do,,,,,,
loop do,,,,,,
retval = work,,,,,,
throw :done if retval < 10,,,,,,
end,,,,,,
end,,,,,,
,,,,,,
re-raise exception,,,,,,
,,,,,,
How to re-raise an exception preserving the original stack trace.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"If the exception is assigned to a variable in the except clause and the variable is used as the argument to raise, then a new stack trace is created.",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"If the exception is assigned to a variable in the rescue clause and the variable is used as the argument to raise, then the original stack trace is preserved.",,,,,,
,,,,,,
global variable for last exception,,,,,,
,,,,,,
The global variable name for the last exception raised.,,,,,,
,,,,,,
define exception,,,,,,
,,,,,,
How to define a new variable class.,,,,,,
,,,,,,
handle exception,,,,,,
,,,,,,
How to catch exceptions of a specific type and assign the exception a name.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
PHP exceptions when caught must always be assigned a variable name.,,,,,,
,,,,,,
finally block,,,,,,
,,,,,,
A block of statements that is guaranteed to be executed even if an exception is thrown or caught.,,,,,,
,,,,,,
Threads,,,,,,
,,,,,,
start thread,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"Ruby MRI threads are operating system threads, but a global interpreter lock prevents more than one thread from executing Ruby code at a time.",,,,,,
,,,,,,
wait on thread,,,,,,
,,,,,,
How to make a thread wait for another thread to finish.,,,,,,
Hyperpolyglot,,,,,,
"Scripting Languages I: Node.js, Python, PHP, Ruby",,,,,,
a side-by-side reference sheet,,,,,,
sheet one: version | grammar and invocation | variables and expressions | arithmetic and logic | strings | regexes | dates and time | arrays | dictionaries | functions | execution control | exceptions | threads,,,,,,
sheet two: streams | asynchronous events | files | file formats | directories | processes and environment | option parsing | libraries and namespaces | objects | reflection | net and web | databases | unit tests | debugging,,,,,,
streams,,,,,,
,node.js,,,python,php,ruby
read from stdin,"let readline = require('readline');

let rl = readline.createInterface({
 input: process.stdin
});
rl.on('line', (line) => {
 // this code executes once for each line
});",,,"line = sys.stdin.readline()
s = line.rstrip('\r\n')","$stdin = fopen('php://stdin', 'r');
$line = rtrim(fgets($stdin));","line = gets
s = line.chomp"
write to stdout,"console.log('Hello, World!');",,,"print('Hello, World!')

sys.stdout.write('Hello, World!\n')","echo ""Hello, World!\n"";","puts ""Hello, World!""

$stdout.write(""Hello, World!\n"")"
write format to stdout,,,,"import math

print('%.2f' % math.pi)","printf(""%.2f\n"", M_PI);","printf(""%.2f\n"", Math::PI)"
write to stderr,console.error('bam!');,,,sys.stderr.write('bam!\n'),"$stderr = fopen('php://stderr', 'w');
fwrite($stderr, ""bam!\n"");","$stderr.puts ""bam!""

$stderr.write(""bam!\n"")"
open for reading,,,,"f = open('/etc/hosts',
 encoding='utf-8')

# Python 2: use codecs.open()","$f = fopen(""/etc/hosts"", ""r"");","f = File.open(""/etc/hosts"", ""r:utf-8"")"
open for reading bytes,"let fs = require('fs');

let f = fs.openSync(""/etc/hosts"", ""r"");",,,"f = open('/etc/hosts', 'rb')","$f = fopen(""/etc/hosts"", ""r"");","f = File.open(""/etc/hosts"", ""rb"")"
read line,,,,f.readline(),$line = fgets($f);,f.gets
iterate by line,"const readline = require('readline');
const fs = require('fs');

let f = fs.createReadStream('/etc/hosts');
const rl = readline.createInterface({
 input: f
});
rl.on('line', (line) => {
 console.log(line);
});",,,"for line in f:
 print(line)","while (!feof($f)) {
 $line = fgets($f);
 echo $line;
}","f.each do |line|
 print(line)
end"
read file into string,"let fs = require('fs');

let s = fs.readFileSync('/etc/hosts', 'utf8');",,,s = f.read(),"$s = file_get_contents(
 ""/etc/hosts"");",s = f.read
read file into array of strings,,,,a = f.readlines(),"$a = file(""/etc/hosts"");",a = f.lines.to_a
read fixed length,"let buf = Buffer.alloc(100);
// 3rd arg is offset into buf:
let n = fs.readSync(f, buf, 0, 100);
let s = buf.toString('utf-8', 0, n);",,,s = f.read(100),"$s = fread($f, 100);",s = f.read(100)
read char,,,,ch = f.read(1),"$ch = fread($f, 1);",ch = f.readchar
read serialized data,"let fs = require('fs');

let s = fs.readFileSync(""/tmp/data.json"");
let data = JSON.parse(s);",,,"import pickle

with open('/tmp/data.pickle', 'rb') as f:
 data = pickle.load(f)","$s = file_get_contents(""/tmp/data"");
$data = unserialize($s);","File.open('/tmp/data.marshal') do |f|
 data = Marshal.load(f)
end"
open for writing,"let fs = require('fs');

let f = fs.openSync(""/tmp/test"", ""w"");",,,"f = open('/tmp/test', 'w'
 encoding='utf-8')

# Python 2: use codecs.open()","$f = fopen(""/tmp/test"", ""w"");","f = File.open(""/tmp/test"", ""w:utf-8"")"
open for writing bytes,"let fs = require('fs');

let f = fs.openSync(""/tmp/test"", ""w"");",,,"f = open('/tmp/test', 'wb')","$f = fopen(""/tmp/test"", ""w"");","f = File.open(""/tmp/test"", ""wb"")"
open for appending,"et fs = require('fs');

let f = fs.openSync(""/tmp/test"", ""a"");",,,"f = open('/tmp/err.log', 'a')","$f = fopen(""/tmp/test"", ""a"");","f = File.open(""/tmp/err.log"", ""a"")"
write string,"fs.writeSync(f, 'lorem ipsum');

// writeSync() takes String or Buffer arg.
// A String is encoded as UTF-8.",,,f.write('lorem ipsum'),"fwrite($f, ""lorem ipsum"");","f.write(""lorem ipsum"")"
write line,"fs.writeSync(f, 'lorem ipsum\n');",,,f.write('lorem ipsum\n'),"fwrite($f, ""lorem ipsum\n"");","f.puts(""lorem ipsum"")"
write format,,,,"import math

f.write('%.2f\n', math.pi)","fprintf($f, ""%.2f\n"", M_PI);","f.printf(""%.2f\n"", Math::PI)"
write char,,,,f.write('A'),"fwrite($f, ""A"");",f.putc('A')
write serialized data,"let fs = require('fs');

let s = JSON.stringify({foo: [1, 2, 3]});
fs.writeFileSync(""/tmp/data.json"", s);",,,"import pickle

with open('/tmp/data.pickle', 'wb') as f:
 pickle.dump({'foo': [1, 2, 3]}, f)","$f = fopen(""/tmp/data"", ""w"");
$data = [""foo"" => [1, 2, 3]];
fwrite($f, serialize($data));
fclose($f);","File.open('/tmp/data.marshal', 'w') do |f|
 Marshal.dump({'foo': [1, 2, 3]}, f)
end"
close,fs.closeSync(f);,,,f.close(),fclose($f);,f.close
close on block exit,,,,"with open('/tmp/test', 'w') as f:
 f.write('lorem ipsum\n')",none,"File.open(""/tmp/test"", ""w"") do |f|
 f.puts(""lorem ipsum"")
end"
flush,writeSync() isn't buffered,,,f.flush(),"# CLI output isn't buffered
fflush($f);",f.flush
"position

get, set","// no get

let buf = Buffer.alloc(100);
// 5th arg is where in file to start read:
fs.readSync(f, buf, 0, 100, 0);
// 3rd arg is where in file to start write:
fs.writeSync(f2, buf, 0);",,,"f.tell()
f.seek(0)","ftell($f)
fseek($f, 0);","f.tell
f.seek(0)

f.pos
f.pos = 0"
open temporary file,"// npm install tmp
let tmp = require('tmp');
let fs = require('fs');

let file = tmp.fileSync();
fs.writeSync(file.fd, 'lorem ipsum');
console.log(`tmp file: ${file.name}`);
fs.closeSync(file.fd);",,,"import tempfile

f = tempfile.NamedTemporaryFile()
f.write('lorem ipsum\n')
print(""tmp file: %s"" % f.name)
f.close()

# file is removed when file handle is closed","$f = tmpfile();
fwrite($f, ""lorem ipsum\n"");
# no way to get file name
fclose($f);

# file is removed when file handle is closed","require 'tempfile'

f = Tempfile.new('')
f.puts ""lorem ipsum""
puts ""tmp file: #{f.path}""
f.close

# file removed when file handle
# garbage-collected or interpreter exits"
open in memory file,,,,"import io

f = io.StringIO()
f.write('lorem ipsum\n')
s = f.getvalue()

# Python2: in StringIO module","$meg = 1024 * 1024;
$mem = ""php://temp/maxmemory:$meg"";
$f = fopen($mem, ""r+"");
fputs($f, ""lorem ipsum"");
rewind($f);
$s = fread($f, $meg);","require 'stringio'

f = StringIO.new
f.puts(""lorem ipsum"")
f.rewind
s = f.read"
asynchronous events,,,,,,
,node.js,,,python,php,ruby
start event loop,,,,"# Python 3.4 and later:
import asyncio

asyncio.BaseEventLoop.run_forever()",,
read file asynchronously,,,,,,
write file asynchronously,,,,,,
promise,,,,,,
files,,,,,,
,node.js,,,python,php,ruby
"file exists test, file regular test","let fs = require('fs');

let exists = fs.existsSync('/etc/hosts');
let stat = fs.statSync('/etc/hosts');
let regular = stat.isFile();",,,"os.path.exists('/etc/hosts')
os.path.isfile('/etc/hosts')","file_exists(""/etc/hosts"")
is_file(""/etc/hosts"")","File.exists?(""/etc/hosts"")
File.file?(""/etc/hosts"")"
file size,"let fs = require('fs');

let stat = fs.statSync('/etc/hosts');
let size = stat.size;",,,os.path.getsize('/etc/hosts'),"filesize(""/etc/hosts"")","File.size(""/etc/hosts"")"
"is file readable, writable, executable","let fs = require('fs');

// no return values; exception thrown
// if not readable, writable, or executable:
fs.accessSync('/etc/hosts',
 fs.constants.R_OK);
fs.accessSync('/etc/hosts',
 fs.constants.W_OK);
fs.accessSync('/etc/hosts',
 fs.constants.X_OK);",,,"os.access('/etc/hosts', os.R_OK)
os.access('/etc/hosts', os.W_OK)
os.access('/etc/hosts', os.X_OK)","is_readable(""/etc/hosts"")
is_writable(""/etc/hosts"")
is_executable(""/etc/hosts"")","File.readable?(""/etc/hosts"")
File.writable?(""/etc/hosts"")
File.executable?(""/etc/hosts"")"
set file permissions,"let fs = require('fs');

fs.chmodSync('/tmp/foo', parseInt('755', 8));",,,"os.chmod('/tmp/foo', 0755)","chmod(""/tmp/foo"", 0755);","File.chmod(0755, ""/tmp/foo"")"
last modification time,"let fs = require('fs');

let stat = fs.statSync('/etc/hosts');
let dt = stat.mtime;",,,"from datetime import datetime as dt

# unix epoch:
t = os.stat('/etc/passwd').st_mtime

# datetime object:
t2 = dt.fromtimestamp(t)","# unix epoch:
$t = stat('/etc/passwd')['mtime'];

# DateTime object:
$t2 = new DateTime('UTC');
$t2->setTimestamp($t);","# Time object:
t2 = File.stat('/etc/passwd').mtime

# unix epoch:
t = t2.to_i"
"copy file, remove file, rename file","// npm install fs-extra
let fs = require('fs-extra');

fs.copySync('/tmp/foo', '/tmp/bar');
fs.unlinkSync('/tmp/foo');
fs.renameSync('/tmp/bar', '/tmp/foo');",,,"import shutil

shutil.copy('/tmp/foo', '/tmp/bar')
os.remove('/tmp/foo')
shutil.move('/tmp/bar', '/tmp/foo')","copy(""/tmp/foo"", ""/tmp/bar"");
unlink(""/tmp/foo"");
rename(""/tmp/bar"", ""/tmp/foo"");","require 'fileutils'

FileUtils.cp(""/tmp/foo"", ""/tmp/bar"")
FileUtils.rm(""/tmp/foo"")
FileUtils.mv(""/tmp/bar"", ""/tmp/foo"")"
"create symlink, symlink test, readlink","let fs = require('fs');

fs.symlinkSync('/etc/hosts', '/tmp/hosts');
let lstat = fs.lstatSync('/tmp/hosts');
let isLink = lstat.isSymbolicLink();
let path = fs.readlinkSync('/tmp/hosts');",,,"os.symlink('/etc/hosts', '/tmp/hosts')
os.path.islink('/tmp/hosts')
os.path.realpath('/tmp/hosts')","symlink(""/etc/hosts"", ""/tmp/hosts"");
is_link(""/etc/hosts"")
readlink(""/tmp/hosts"")","File.symlink(""/etc/hosts"", ""/tmp/hosts"")
File.symlink?(""/etc/hosts"")
File.realpath(""/tmp/hosts"")"
generate unused file name,"// npm install tempfile
let tempfile = require('tempfile');
let path = tempfile();",,,"import tempfile

f, path = tempfile.mkstemp(
 prefix='foo',
 dir='/tmp')","$path = tempnam(""/tmp"", ""foo"");
$f = fopen($path, ""w"");",
file formats,,,,,,
,node.js,,,python,php,ruby
parse csv,"let fs = require('fs');
// npm install csv
let csv = require('csv');

let path = 'no-header.csv';
let f = fs.createReadStream(path);
f.pipe(csv.parse()).pipe(
 csv.transform(function (record) {
  console.log(record.join('\t'));
 })
);",,,"import csv

with open('foo.csv') as f:
 cr = csv.reader(f)
 for row in cr:
  print('\t'.join(row))","$f = fopen(""no-header.csv"", ""r"");
while (($row = fgetcsv($f)) != FALSE) {
 echo implode(""\t"", $row) . ""\n"";
}","require 'csv'

CSV.foreach(""foo.csv"") do |row|
 puts row.join(""\t"")
end"
generate csv,,,,"import csv

with open('foo.csv', 'w') as f:
 cw = csv.writer(f)
 cw.writerow(['one', 'une', 'uno'])
 cw.writerow(['two', 'deux', 'dos'])",,"require 'csv'

CSV.open(""foo.csv"", ""w"") do |csv|
 csv << [""one"", ""une"", ""uno""]
 csv << [""two"", ""deux"", ""dos""]
end"
parse json,"let s = '{""t"":1,""f"":0}';
let data = JSON.parse(s);",,,"import json

d = json.loads('{""t"":1,""f"":0}')","$s1 = '{""t"":1,""f"":0}';
$a1 = json_decode($s1, TRUE);","require 'json'

d = JSON.parse('{""t"":1,""f"":0}')"
generate json,"let data = {'t': 1, 'f': 0};
let s = JSON.stringify(data);",,,"import json

s = json.dumps({'t': 1, 'f': 0})","$a2 = array(""t"" => 1, ""f"" => 0);
$s2 = json_encode($a2);","require 'json'

s = {'t' => 1,'f' => 0}.to_json"
parse yaml,,,,"# sudo pip install PyYAML
import yaml

data = yaml.safe_load('{f: 0, t: 1}\n')",,"# sudo gem install safe_yaml
require 'safe_yaml'

data = YAML.safe_load(""---\nt: 1\nf: 0\n"")"
generate yaml,,,,"# sudo pip install PyYAML
import yaml

s = yaml.safe_dump({'t': 1, 'f': 0})",,"# sudo gem install safe_yaml
require 'safe_yaml'

s = YAML.dump({'t' => 1, 'f' => 0})"
"parse xml
all nodes matching xpath query; first node matching xpath query","// npm install xmldom xpath
let dom = require('xmldom').DOMParser;
let xpath = require('xpath');

let xml = '<a><b><c ref=""3"">foo</c></b></a>';
let doc = new dom().parseFromString(xml);
let nodes = xpath.select('/a/b/c', doc);
nodes.length;
nodes[0].firstChild.data;",,,"from xml.etree import ElementTree

xml = '<a><b><c ref=""3"">foo</c></b></a>'

# raises xml.etree.ElementTree.ParseError
# if not well-formed:
doc = ElementTree.fromstring(xml)

nodes = doc.findall('b/c')
print(len(nodes))
print(nodes[0].text)

node = doc.find('b/c')
print(node.text)
print(node.attrib['ref'])","$xml = ""<a><b><c ref='3'>foo</c></b></a>"";

# returns NULL and emits warning if not
# well-formed:
$doc = simplexml_load_string($xml);

$nodes = $doc->xpath(""/a/b/c"");
echo count($nodes);
echo $nodes[0];

$node = $nodes[0];
echo $node;
echo $node[""ref""];","require 'rexml/document'
include REXML

xml = ""<a><b><c ref='3'>foo</c></b></a>""

# raises REXML::ParseException if
# not well-formed:
doc = Document.new(xml)

nodes = XPath.match(doc,""/a/b/c"")
puts nodes.size
puts nodes[0].text

node = XPath.first(doc,""/a/b/c"")
puts node.text
puts node.attributes[""ref""]"
generate xml,"// npm install xmlbuilder
let builder = require('xmlbuilder');

let xml = builder.create('a').ele('b', {id: 123}, 'foo').end();",,,"import xml.etree.ElementTree as ET

builder = ET.TreeBuilder()
builder.start('a', {})
builder.start('b', {'id': '123'})
builder.data('foo')
builder.end('b')
builder.end('a')
et = builder.close()

# <a><b id=""123"">foo</b></a>:
print(ET.tostring(et))","$xml = ""<a></a>"";
$sxe = new SimpleXMLElement($xml);
$b = $sxe->addChild(""b"", ""foo"");
$b->addAttribute(""id"", ""123"");

# <a><b id=""123"">foo</b></a>:
echo $sxe->asXML();","# gem install builder
require 'builder'

builder = Builder::XmlMarkup.new
xml = builder.a do |child|
 child.b(""foo"", :id=>""123"")
end

# <a><b id=""123"">foo</b></a>:
puts xml"
parse html,,,,"# pip install beautifulsoup4
import bs4

html = open('foo.html').read()
doc = bs4.BeautifulSoup(html)

for link in doc.find_all('a'):
 print(link.get('href'))","$html = file_get_contents(""foo.html"");
$doc = new DOMDocument;
$doc->loadHTML($html);
$xpath = new DOMXPath($doc);

$nodes = $xpath->query(""//a/@href"");
foreach($nodes as $href) {
 echo $href->nodeValue;
}","# gem install nokogiri
require 'nokogiri'

html = File.open(""foo.html"").read
doc = Nokogiri::HTML(html)
doc = doc.xpath(""//a"").each do |link|
 puts link[""href""]
end"
directories,,,,,,
,node.js,,,python,php,ruby
working directory,"let old_dir = process.cwd();

process.chdir(""/tmp"");",,,"old_dir = os.path.abspath('.')

os.chdir('/tmp')","$old_dir = getcwd();

chdir(""/tmp"");","old_dir = Dir.pwd

Dir.chdir(""/tmp"")"
build pathname,"let path = require('path');

path.join('/etc', 'hosts');",,,"os.path.join('/etc', 'hosts')","""/etc"" . DIRECTORY_SEPARATOR . ""hosts""","File.join(""/etc"", ""hosts"")"
dirname and basename,"let path = require('path');

path.dirname('/etc/hosts')
path.basename('/etc/hosts')",,,"os.path.dirname('/etc/hosts')
os.path.basename('/etc/hosts')","dirname(""/etc/hosts"")
basename(""/etc/hosts"")","File.dirname(""/etc/hosts"")
File.basename(""/etc/hosts"")"
"absolute pathname
and tilde expansion",,,,"# symbolic links are not resolved:
os.path.abspath('foo')
os.path.abspath('/foo')
os.path.abspath('../foo')
os.path.abspath('./foo')
os.path.expanduser('~/foo')","# file must exist; symbolic links are
# resolved:
realpath(""foo"")
realpath(""/foo"")
realpath(""../foo"")
realpath(""./foo"")
# no function for tilde expansion","# symbolic links are not resolved:
File.expand_path(""foo"")
File.expand_path(""/foo"")
File.expand_path(""../foo"")
File.expand_path(""./foo"")
File.expand_path(""~/foo"")"
iterate over directory by file,"let fs = require('fs');

fs.readdirSync('/etc').forEach(
 function(s) { console.log(s); }
);",,,"for filename in os.listdir('/etc'):
 print(filename)","if ($dir = opendir(""/etc"")) {
 while ($file = readdir($dir)) {
  echo ""$file\n"";
 }
 closedir($dir);
}","Dir.open(""/etc"").each do |file|
 puts file
end"
glob paths,"// npm install glob
let glob = require('glob');

glob('/etc/*', function(err, paths) {
 paths.forEach(function(path) {
  console.log(path);
 });
});",,,"import glob

for path in glob.glob('/etc/*'):
 print(path)","foreach (glob(""/etc/*"") as $file) {
 echo ""$file\n"";
}","Dir.glob(""/etc/*"").each do |path|
 puts path
end"
make directory,"const fs = require('fs');

if (!fs.existsSync('/tmp/foo')) {
 fs.mkdirSync('/tmp/foo', 0755);
}
fs.mkdirSync('/tmp/foo/bar', 0755);",,,"dirname = '/tmp/foo/bar'
if not os.path.isdir(dirname):
 os.makedirs(dirname)","mkdir(""/tmp/foo/bar"", 0755, TRUE);","require 'fileutils'

FileUtils.mkdir_p(""/tmp/foo/bar"")"
recursive copy,,,,"import shutil

shutil.copytree('/tmp/foodir',
 '/tmp/bardir')",none,"require 'fileutils'

FileUtils.cp_r(""/tmp/foodir"",
 ""/tmp/bardir"")"
remove empty directory,"const fs = require('fs');

fs.rmdirSync('/tmp/foodir');",,,os.rmdir('/tmp/foodir'),"rmdir(""/tmp/foodir"");","File.rmdir(""/tmp/foodir"")"
remove directory and contents,,,,"import shutil

shutil.rmtree('/tmp/foodir')",none,"require 'fileutils'

FileUtils.rm_rf(""/tmp/foodir"")"
directory test,,,,os.path.isdir('/tmp'),"is_dir(""/tmp"")","File.directory?(""/tmp"")"
generate unused directory,"const fs = require('fs');

const dir = fs.mkdtemp('/tmp/foo');",,,"import tempfile

path = tempfile.mkdtemp(dir='/tmp',
 prefix='foo')",,"require 'tmpdir'

path = Dir.mktmpdir(""/tmp/foo"")"
system temporary file directory,,,,"import tempfile

tempfile.gettempdir()",sys_get_temp_dir(),"require 'tmpdir'

Dir.tmpdir"
processes and environment,,,,,,
,node.js,,,python,php,ruby
"command line arguments
and script name","process.argv.slice(2)
process.argv[1]
// process.argv[0] contains ""node""",,,"sys.argv[1:]
sys.argv[0]","$argv
$_SERVER[""SCRIPT_NAME""]","ARGV
$PROGRAM_NAME"
"environment variable

get, set","process.env[""HOME""]

process.env[""PATH""] = ""/bin"";",,,"os.getenv('HOME')

os.environ['PATH'] = '/bin'","getenv(""HOME"")

putenv(""PATH=/bin"");","ENV[""HOME""]

ENV[""PATH""] = ""/bin"""
"get pid, parent pid","process.pid
none",,,"os.getpid()
os.getppid()","posix_getpid()
posix_getppid()","Process.pid
Process.ppid"
user id and name,,,,"import getpass

os.getuid()
getpass.getuser()","$uid = posix_getuid();
$uinfo = posix_getpwuid($uid);
$username = $uinfo[""name""];","require 'etc'

Process.uid
Etc.getpwuid(Process.uid)[""name""]"
exit,process.exit(0);,,,sys.exit(0),exit(0);,exit(0)
set signal handler,,,,"import signal

def handler(signo, frame):
 print('exiting...')
 sys.exit(1)

signal.signal(signal.SIGINT, handler)",,"Signal.trap(""INT"",
 lambda do |signo|
  puts ""exiting...""
  exit 1
 end
)"
external command,,,,"if os.system('ls -l /tmp'):
 raise Exception('ls failed')","system(""ls -l /tmp"", $retval);
if ($retval) {
 throw new Exception(""ls failed"");
}","unless system(""ls -l /tmp"")
 raise ""ls failed""
end"
shell-escaped external command,,,,"import subprocess

cmd = ['ls', '-l', '/tmp']
if subprocess.call(cmd):
 raise Exception('ls failed')","$path = chop(fgets(STDIN));
$safe = escapeshellarg($path);
system(""ls -l "" . $safe, $retval);
if ($retval) {
 throw new Exception(""ls failed"");
}","path = gets
path.chomp!
unless system(""ls"", ""-l"", path)
 raise ""ls failed""
end"
command substitution,,,,"import subprocess

cmd = ['ls', '-l', '/tmp']
files = subprocess.check_output(cmd)",$files = `ls -l /tmp`;,"files = `ls -l /tmp`
unless $?.success?
 raise ""ls failed""
end

files = %x(ls)
unless $?.success?
 raise ""ls failed""
end"
option parsing,,,,,,
,node.js,,,python,php,ruby
boolean flag,"// $ npm install commander
program = require('commander');

program.option('-v, --verbose')
 .parse(process.argv);

let verbose = program.verbose;",,,"import argparse

parser = argparse.ArgumentParser()
parser.add_argument('--verbose', '-v',
 dest='verbose',
 action='store_true')
args = parser.parse_args()

if args.verbose:
 print('Setting output to verbose.')","$opts = getopt(""v"", [""verbose""]);

if (array_key_exists(""v"", $opts) ||
  array_key_exists(""verbose"", $opts)) {
 $verbose = TRUE;
}","require 'optparse'

options = {}
OptionParser.new do |opts|
 opts.on('-v', '--verbose') do |arg|
  options[:verbose] = arg
 end
end.parse!

verbose = options[:verbose]"
string option,"// $ npm install commander
program = require('commander');

program.option('-f, --file <file>')
 .parse(process.argv);

let file = program.file;",,,"import argparse

parser = argparse.ArgumentParser()
parser.add_argument('--input', '-i',
 dest='input')
args = parser.parse_args()

if args.input:
 f = open(args.input)
else:
 f = sys.stdin","$opts = getopt(""f:"", [""file:""]);

$file = $opts[""f""] ? $opts[""f""] :
 $opts[""file""];","require 'optparse'

options = {}
OptionParser.new do |opts|
 opts.on('-i', '--input PATH') do |arg|
  options[:input] = arg
 end
end.parse!

if options[:input].nil?
 f = $stdin
else
 f = File.open(options[:input])
end"
numeric option,"// $ npm install commander
program = require('commander');
program.option('-c, --count <n>',
 'a count', parseInt);
program.option('-r, --ratio <n>',
 'a ratio', parseFloat);
program.parse(process.argv);

if (program.count)
 console.log(program.count);
if (program.ratio)
 console.log(program.ratio);",,,"import argparse

parser = argparse.ArgumentParser()
parser.add_argument('--count', '-c',
 dest='count', type=int)
parser.add_argument('--ratio', '-r',
 dest='ratio', type=float)
args = parser.parse_args()

if args.count:
 print('Count: %d' % args.count)
if args.ratio:
 print('Ratio: %.3f' % args.ratio)",,
unrecognized option behavior,"// error message and exit
// with nonzero status",,,# print usage and exit with nonzero status,"# Unrecognized options are ignored.
#
# Also, an option declared to have an
# argument is ignored if the argument
# is not provided on the command line.",
required option,"const fs = require('fs');
// $ npm install commander
const program = require('commander');

program.option('-i, --input <input>')
program.parse(process.argv);

if (program.input) {
 let f = fs.openSync(program.input, 'r');
} else {
 console.log('required: --input');
 program.outputHelp();
 process.exit(1);
}",,,"import argparse

parser = argparse.ArgumentParser()
parser.add_argument('--input', '-i',
 dest='input', required=True)
args = parser.parse_args()

f = open(args.input)",,
default option,"// $ npm install commander:
const program = require('commander');

program.option('-H, --hosts <hosts>',
 'the hosts file', '/etc/hosts');
program.parse(process.argv);
console.log('hosts: ' + program.hosts);",,,"import argparse

parser = argparse.ArgumentParser()
parser.add_argument('--hosts', '-H',
 dest='hosts', default='/etc/hosts')
args = parser.parse_args()

f = open(args.hosts)",,
delimited options,"// $ npm install commander
const program = require('commander');

function comma_split(val) {
 return val.split(',');
}

program.option('-w, --words <words>',
 'comma-delimited', comma_split);
program.parse(process.argv);
console.log(program.words.length);",,,"import argparse

parser = argparse.ArgumentParser()
# Take all arguments up to next flag.
# Use '+' to require at least one argument:
parser.add_argument('--words', '-w',
 dest='words', nargs='*')

# twiddle -w one two three
args = parser.parse_args()
# ['one', 'two', 'three']:
args.words",,
repeated options,"// $ npm install commander
const program = require('commander');

function collect(val, memo) {
 memo.push(val);
 return memo;
}

// $ node twiddle.js -w one -w two -w three
program.option('-w, --words <words>',
 'repeatable flag', collect, []);
program.parse(process.argv);
console.log(program.words.length);",,,"import argparse

parser = argparse.ArgumentParser()
parser.add_argument('--word', '-w',
 dest='words', action='append')

# twiddle -w one -w two -w three
args = parser.parse_args()
# ['one', 'two', 'three']:
args.words",,
positional parameters,"// Processing stops at
// first positional arg.
//
// Positional arguments are
// in program.args.",,,"import argparse

parser = argparse.ArgumentParser()
parser.add_argument('foo')
parser.add_argument('bar')
args = parser.parse_args()
print('foo: {}'.format(args.foo))
print('bar: {}'.format(args.bar))","# Processing stops at first positional arg.
#
# getopt() does not modify $argv or
# provide means to identify positional
# arguments.","# Options can follow positional args.
#
# After calling OptionParser.parse! only
# positional arguments are in ARGV."
positional parameters as array,,,,"import argparse

parser = argparse.ArgumentParser()
# '*' for zero or more args;
# '+' for 1 or more args:
parser.add_argument('foo', nargs='*')
args = parser.parse_args()
print(len(args.foo))",,
usage,"// $ npm install commander
program = require('commander');

// The flags -h and --help are generated
// automatically.
program.option('-i, --input <input>')
 .parse(process.argv);

let input = program.input;

if (!input) {
 program.outputHelp();
 process.exit(1);
}",,,"import argparse

parser = argparse.ArgumentParser(
 description='Twiddles data')
parser.add_argument('--input', '-i',
 dest='input', help='path of input file')
args = parser.parse_args()

if not args.input:
 parser.print_help()
 sys.exit(1)","$usage = ""usage: "" .
 $_SERVER[""SCRIPT_NAME""] .
 "" [-f FILE] [-v] [ARG ...]\n"";

$opts = getopt(""i:h"",
 array(""input:"", ""help""));

if (array_key_exists(""h"", $opts) ||
  array_key_exists(""help"", $opts)) {
 echo $usage;
 exit(1);
}

$input = $opts[""i""] ? $opts[""i""] :
 $opts[""input""];","require 'optparse'

options = {}
OptionParser.new do |opts|
 opts.banner =
  ""usage: #{$PROGRAM_NAME} [OPTIONS] [ARG ...]""
 opts.on('-i', '--input PATH') do |arg|
  options[:input] = arg
 end
 if options[:input].nil?
  puts opts
  exit 1
 end
end.parse!"
subcommand,,,,"import argparse

def show(args):
 print('showing...')

def submit(args):
 print('submitting {}'.format(args.name))

parser = argparse.ArgumentParser()
sub_ps = parser.add_subparsers()

show_p = sub_ps.add_parser('show')
show_p.set_defaults(func=show)

submit_p = sub_ps.add_parser('submit')
submit_p.add_argument('--name', '-n',
 dest='name', required=True)
submit_p.set_defaults(func=submit)

args = parser.parse_args()
if hasattr(args, 'func'):
 args.func(args)
else:
 parser.print_help()
 sys.exit(1)",,
libraries and namespaces,,,,,,
,node.js,,,python,php,ruby
load library,"let foo = require('./foo.js');

let foo = require('foo');",,,"# searches sys.path for foo.pyc or foo.py:
import foo","require_once(""foo.php"");","require 'foo.rb'

# searches $LOAD_PATH for foo.rb, foo.so,
# foo.o, foo.dll:
require 'foo'"
load library in subdirectory,let bar = require('./foo/bar.js');,,,"# foo must contain __init__.py file
import foo.bar",require_once('foo/bar.php');,"require 'foo/bar.rb'

require 'foo/bar'"
hot patch,"delete require.cache[require.resolve('./foo.js')];
let foo = require('./foo.js');",,,reload(foo),"require(""foo.php"");",load 'foo.rb'
load error,raises Errror exception,,,raises ImportError if library not found; exceptions generated when parsing library propagate to client,require and require_once raise fatal error if library not found; include and include_once emit warnings,raises LoadError if library not found; exceptions generated when parsing library propagate to client
main routine in library,"if (require.main == module) {
 code
}",,,"if __name__ == '__main__':
 code",none,"if $PROGRAM_NAME == __FILE__
 code
end"
library path,none,,,"sys.path

sys.path.append('/some/path')","$libpath = ini_get(""include_path"");

ini_set(""include_path"",
 $libpath . "":/some/path"");","# $: is synonym for $LOAD_PATH:
$LOAD_PATH

$LOAD_PATH << ""/some/path"""
library path environment variable,$ NODE_PATH=~/lib node foo.js,,,$ PYTHONPATH=~/lib python foo.py,none,$ RUBYLIB=~/lib ruby foo.rb
library path command line option,none,,,none,none,$ ruby -I ~/lib foo.rb
simple global identifiers,,,,built-in functions,variables defined outside of functions or with global keyword,variables which start with $
multiple label identifiers,,,,modules,"classes, interfaces, functions, and constants","constants, classes, and modules"
label separator,,,,foo.bar.baz(),\Foo\Bar\baz();,Foo::Bar.baz
root namespace definition,,,,none,\foo,"# outside of class or module; only
# constants in root namespace:
FOO = 3

# inside class or module:
::FOO = 3"
namespace declaration,,,,put declarations in foo.py,namespace Foo;,"class Foo
 # class definition
end

module Foo
 # module definition
end"
child namespace declaration,,,,"foo must be in sys.path:
$ mkdir foo
$ touch foo/__init__.py
$ touch foo/bar.py",namespace Foo\Bar;,"module Foo::Bar
 # module definitions
end

module Foo
 module Bar
  # module definitions
 end
end

# classes can nest inside classes or
# modules; modules can nest in classes"
import definitions,,,,"from foo import bar, baz",only class names can be imported,none
import all definitions in namespace,,,,from foo import *,none,"# inside class or module:
include Foo"
import all subnamespaces,,,,"# subnamespaces in list __all__ of
# foo/__init__.py are imported
from foo import *",,
shadow avoidance,,,,"# rename namespace:
import foo as fu

# rename identifier:
from sys import path as the_path",use Foo as Fu;,"Fu = Foo.dup

include Fu"
"list installed packages, install a package",,,,"$ pip freeze
$ pip install jinja2","$ pear list
$ pear install Math_BigInteger","$ gem list
$ gem install rails"
package specification format,,,,"in setup.py:

#!/usr/bin/env python

from distutils.core import setup

setup(
 name='foo',
 author='Joe Foo',
 version='1.0',
 description='a package',
 py_modules=['foo'])",,"in foo.gemspec:

spec = Gem::Specification.new do |s|
 s.name = ""foo""
 s.authors = ""Joe Foo""
 s.version = ""1.0""
 s.summary = ""a gem""
 s.files = Dir[""lib/*.rb""]
end"
objects,,,,,,
,node.js,,,python,php,ruby
define class,"function Int(i) {
 this.value = i === undefined ? 0 : i;
}",,,"class Int(object):
 def __init__(self, v=0):
  self.value = v","class Int
{
 public $value;
 function __construct($int=0)
 {
  $this->value = $int;
 }
}","class Int
 attr_accessor :value
 def initialize(i=0)
  @value = i
 end
end"
create object,"let i = new Int();
let i2 = new Int(7);",,,"i = Int()
i2 = Int(7)","$i = new Int();
$i2 = new Int(7);","i = Int.new
i2 = Int.new(7)"
get and set instance variable,"let v = i.value;
i.value = v + 1;",,,"v = i.value
i.value = v + 1","$v = $i->value;
$i->value = $v + 1;","v = i.value
i.value = v + 1"
instance variable visibility,public,,,public; attributes starting with underscore private by convention,visibility must be declared,"private by default; use attr_reader, attr_writer, attr_accessor to make public"
define method,"// inside constructor:
this.plus = function(v) {
 return this.value + v;
};

// outside constructor:
Int.prototype.plus = function (v) {
 return this.value + v;
}",,,"def plus(self,v):
 return self.value + v","function plus($i)
{
 return $this->value + $i;
}","def plus(i)
 value + i
end"
invoke method,i.plus(3);,,,i.plus(7),$i->plus(7),i.plus(7)
define class method,,,,"@classmethod
def get_instances(cls):
 return Counter.instances",,"class Foo
 def Foo.one
  puts ""one""
 end
end"
invoke class method,,,,Counter.get_instances(),Counter::getInstances(),Foo.one
define class variable,,,,"class Foo:
 instances = 0",,"class Foo
 @@instances = 1
end"
get and set class variable,,,,"class Foo:
 def init(self):
  Foo.instances += 1",,"class Foo
 def initialize
  @@instances += 1
 end
end"
handle undefined method invocation,,,,"def __getattr__(self, name):
 s = 'no def: ' + name + ' arity: %d'

 return lambda *a: print(s % len(a))","function __call($name, $args)
{
 $argc = count($args);
 echo ""no def: $name "" .
  ""arity: $argc\n"";
}","def method_missing(name, *a)
 puts ""no def: #{name}"" +
  "" arity: #{a.size}""
end"
alias method,,,,,,"class Point

 attr_reader :x, :y, :color

 alias_method :colour, :color

 def initialize(x, y, color=:black)
  @x, @y = x, y
  @color = color
 end
end"
destructor,,,,"def __del__(self):
 print('bye, %d' % self.value)","function __destruct()
{
 echo ""bye, $this->value\n"";
}","val = i.value
ObjectSpace.define_finalizer(int) {
 puts ""bye, #{val}""
}"
subclass,,,,"class Counter(Int):

 instances = 0

 def __init__(self, v=0):
  Counter.instances += 1
  Int.__init__(self, v)

 def incr(self):
  self.value += 1","class Counter extends Int
{
 private static $instances = 0;
 function __construct($int=0)
 {
  Counter::$instances += 1;
  parent::__construct($int);
 }
 function incr()
 {
  $this->value++;
 }
 static function getInstances()
 {
  return $instances;
 }
}","class Counter < Int

 @@instances = 0

 def initialize
  @@instances += 1
  super
 end

 def incr
  self.value += 1
 end

 def self.instances
  @@instances
 end
end"
reflection,,,,,,
,node.js,,,python,php,ruby
object id,none,,,id(o),,o.object_id
inspect type,typeof([]) === 'object',,,type([]) == list,"gettype(array()) == ""array""

returns object for objects",[].class == Array
basic types,"number
string
boolean
undefined
function
object

// these evaluate as 'object':
typeof(null)
typeof([])
typeof({})",,,"NoneType
bool
int
long
float
str
SRE_Pattern
datetime
list
array
dict
object
file","NULL
boolean
integer
double
string
array
object
resource
unknown type","NilClass
TrueClass
FalseClass
Fixnum
Bignum
Float
String
Regexp
Time
Array
Hash
Object
File"
inspect class,"// returns prototype object:
Object.getPrototypeOf(o)",,,"o.__class__ == Foo
isinstance(o, Foo)","returns FALSE if not an object:
get_class($o) == ""Foo""","o.class == Foo
o.instance_of?(Foo)"
inspect class hierarchy,"let pa = Object.getPrototypeOf(o)
// prototype's of prototype object:
let grandpa = Object.getPrototypeOf(pa)",,,o.__class__.__bases__,get_parent_class($o),"o.class.superclass
o.class.included_modules"
has method?,o.reverse && typeof(o.reverse) === 'function',,,"hasattr(o, 'reverse')","method_exists($o, ""reverse"")","o.respond_to?(""reverse"")"
message passing,not a standard feature,,,"for i in range(1,10):
 getattr(o, 'phone'+str(i))(None)","for ($i = 1; $i <= 10; $i++) {
 call_user_func(array($o,
  ""phone$i""), NULL);
}","(1..9).each do |i|
 o.send(""phone#{i}="", nil)
end"
eval,eval('1 + 1'),,,"argument of eval must be an expression:
while True:
 print(eval(sys.stdin.readline()))","eval evaluates to argument of return statement or NULL:
while ($line = fgets(STDIN)) {
 echo eval($line) . ""\n"";
}","loop do
 puts eval(gets)
end"
list object methods,,,,"[m for m in dir(o)
 if callable(getattr(o,m))]",get_class_methods($o),o.methods
list object attributes,,,,dir(o),get_object_vars($o),o.instance_variables
list loaded libraries,,,,,,"# relative to directory in lib path:
$LOADED_FEATURES
$"""
list loaded namespaces,,,,dir(),,"Class.constants.select do |c|
 Module.const_get(c).class == Class
end"
inspect namespace,,,,"import urlparse

dir(urlparse)",,"require 'uri'

URI.constants
URI.methods
URI.class_variables"
pretty-print,"let d = {""lorem"": 1, ""ipsum"": [2, 3]};
console.log(JSON.stringify(d, null, 2));",,,"import pprint

d = {'lorem':1, 'ipsum':[2,3]}

pprint.PrettyPrinter().pprint(d)","$d = array(""lorem""=>1,
 ""ipsum""=>array(2,3));

print_r($d);","require 'pp'

d = {'lorem' => 1, 'ipsum' => [2, 3]}

pp d"
source line number and file name,,,,"import inspect

cf = inspect.currentframe()
cf.f_lineno
cf.f_code.co_filename","__LINE__
__FILE__","__LINE__
__FILE__"
command line documentation,,,,"$ pydoc math
$ pydoc math.atan2",none,"$ ri -c
$ ri Math
$ ri Math.atan2"
net and web,,,,,,
,node.js,,,python,php,ruby
"get local hostname, dns lookup, reverse dns lookup",,,,"import socket

host = socket.gethostname()
ip = socket.gethostbyname(host)
host2 = socket.gethostbyaddr(ip)[0]","$host = gethostname();
$ip = gethostbyname($host);
$host2 = gethostbyaddr($ip);","require 'socket'

hostname = Socket.gethostname

ip = Socket.getaddrinfo(
 Socket.gethostname,
 ""echo"")[0][3]

host2 = Socket.gethostbyaddr(ip)[0]"
http get,"// npm install request
let request = require('request');

request('http://www.google.com',
 function(err, resp, body) {
  if (!err && resp.statusCode == 200) {
   console.log(body);
  }
 }
);",,,"import httplib

url = 'www.google.com'
conn = httplib.HTTPConnection(url)
conn.request(""GET"", '/')
resp = conn.getresponse()
if resp.status == httplib.OK:
 s = resp.read()","$url = 'http://www.google.com';
$s = file_get_contents($url);","require 'net/http'

url = ""www.google.com""
r = Net::HTTP.start(url, 80) do |f|
 f.get(""/"")
end
if r.code == ""200""
 s = r.body
end"
http post,,,,"import httplib
import urllib

url = 'www.acme.com'
conn = httplib.HTTPConnection(url)
data = urllib.urlencode({
 'item': 'anvil',
 'qty': 1})
conn.request('POST', '/orders', data)
resp = conn.getresponse()
if resp.status == httplib.OK:
 s = resp.read()",,
serve working directory,,,,$ python -m http.server 8000,$ php -S localhost:8000,"$ ruby -rwebrick -e \
'WEBrick::HTTPServer.new(:Port => 8000, '\
':DocumentRoot => Dir.pwd).start'"
"absolute url
from base and relative url",,,,"import urlparse

urlparse.urljoin('http://google.com',
 'analytics')",none,"require 'uri'

URI.join(""http://google.com"", ""analytics"")"
parse url,,,,"# Python 3 location: urllib.parse
import urlparse

url = 'http://google.com:80/foo?q=3#bar'
up = urlparse.urlparse(url)

protocol = up.scheme
hostname = up.hostname
port = up.port
path = up.path
query_str = up.query
fragment = up.fragment

# returns dict of lists:
params = urlparse.parse_qs(query_str)","$url = ""http://google.com:80/foo?q=3#bar"";
$up = parse_url($url);

$protocol = $up[""scheme""];
$hostname = $up[""host""];
$port = $up[""port""];
$path = $up[""path""];
$query_str = $up[""query""];
$fragment = $up[""fragment""];

# $params is associative array; if keys
# are reused, later values overwrite
# earlier values
parse_str($query_str, $params);","require 'uri'

url = ""http://google.com:80/foo?q=3#bar""
up = URI(url)

protocol = up.scheme
hostname = up.host
port = up.port
path = up.path
query_str = up.query
fragment = up.fragment

# Ruby 1.9; returns array of pairs:
params = URI.decode_www_form(query_str)"
url encode/decode,,,,"# Python 3 location: urllib.parse
import urllib

urllib.quote_plus(""lorem ipsum?"")
urllib.unquote_plus(""lorem+ipsum%3F"")","urlencode(""lorem ipsum?"")
urldecode(""lorem+ipsum%3F"")","require 'cgi'

CGI::escape(""lorem ipsum?"")
CGI::unescape(""lorem+ipsum%3F"")"
"html escape
escape character data, escape attribute value, unescape html entities",,,,"import cgi
from HTMLParser import HTMLParser

s = cgi.escape('<>&')
s2 = cgi.escape('<>&""', True)
s3 = HTMLParser().unescape(s2)","$s = htmlspecialchars(""<>&"");

$s2 = htmlspecialchars(""<>&\""'"",
 ENT_NOQUOTES | ENT_QUOTES);

$s3 = htmlspecialchars_decode($s2);","require 'cgi'

s2 = CGI.escapeHTML('<>&""')
s3 = CGI.unescapeHTML(s2)"
base64 encode/decode,,,,"import base64

s = open('foo.png').read()
b64 = base64.b64encode(s)
s2 = base64.b64decode(b64)","$s = file_get_contents(""foo.png"");
$b64 = base64_encode($s);
$s2 = base64_decode($b64);","require 'base64'

s = File.open(""foo.png"").read
b64 = Base64.encode64(s)
s2 = Base64.decode64(b64)"
databases,,,,,,
,node.js,,,python,php,ruby
mysql,,,,"# install MySQL dev files, then
# $ sudo pip install MySQL-python
import MySQLdb

conn = MySQLdb.Connect(
 db='customers',
 user='joe',
 passwd='xyz123',
 host='127.0.0.1')
sql = 'select id from cust where name = %s'
cur.execute(sql, ('Bob',))
for row in cur:
 print('id: ' + row[0])
conn.close()",,"# $ sudo gem install mysql
require 'mysql'

conn = Mysql.new
conn.select_db(""customers"")
sql = 'select id from cust where name = ?'
stmt = con.prepare(sql)
stmt.execute('Bob')
stmt.each do |row|
 puts row[0]
end"
mongodb,,,,"# $ sudo pip install pymongo
import pymongo

client = pymongo.Connection('localhost')
db = conn['customers']
cur = db.find()
for doc in cur:
 print(doc)",,"# $ sudo gem install mongo bson_ext
require 'mongo'

host = 'localhost'
port = 27017
conn = Mongo::MongoClient.new(host, port)
db = conn['customers']
coll = db['cust']
coll.find().each {|doc| puts doc}"
redis,,,,"# $ sudo pip install redis
import redis

conn = redis.Redis(
 host='localhost',
 port=6379,
 password='xyz123')
conn.set('Bob', 123)
value = conn.get('Bob')
print(value)",,
unit tests,,,,,,
,node.js,,,python,php,ruby
test class,"// npm install -g nodeunit

exports.testFoo = function(test) {
 test.ok(true, 'not true!.');
 test.done();
}",,,"import unittest

class TestFoo(unittest.TestCase):
 def test_01(self):
  self.assertTrue(True, 'not True!')

if __name__ == '__main__':
 unittest.main()","# pear install pear.phpunit.de/PHPUnit

<?php
Class FooTest extends
 PHPUnit_Framework_TestCase
{
 public function test_01()
 {
  $this->assertTrue(true,
   ""not true!"");
 }
}
?>","require 'test/unit'

class TestFoo < Test::Unit::TestCase
 def test_01
  assert(true, ""not true!"")
 end
end"
"run tests, run test method","$ nodeunit test_foo.js

$ nodeunit -t testFoo test_foo.js",,,"$ python test_foo.py
$ python test_foo.py TestFoo.test_01","$ phpunit test_foo.php

$ phpunit --filter test_01 test_foo.php","$ ruby test_foo.rb
$ ruby test_foo.rb -n test_01"
equality assertion,"let s = 'do re mi';
test.equals(s, 'do re mi');",,,"s = 'do re me'
self.assertEqual('do re me',
 s,
 's: {}'.format(s))","$s = ""do re me"";
$this->assertEquals($s, ""do re mi"");

# also asserts args have same type:
$this->assertSame($s, ""do re mi"");","s = ""do re me""
assert_equal(""do re me"", s)"
approximate assertion,,,,"x = 10.0 * (1.0 / 3.0)
y = 10.0 / 3.0

# default for delta is 0.1**7
self.assertAlmostEqual(x, y, delta=0.1**6)","$x = 10.0 * (1.0 / 3.0);
$y = 10.0 / 3.0;

$this->assertEquals($x, $y,
 ""not within delta"",
 pow(0.1, 6));","x = 10.0 * (1.0 / 3.0)
y = 10.0 / 3.0

# default for delta is 0.001
assert_in_delta(x, y, 0.1**6)"
regex assertion,,,,"s = 'lorem ipsum'
# uses re.search, not re.match:
self.assertRegexpMatches(s, 'lorem')","$s = ""lorem ipsum"";
$this->assertRegExp(""/lorem/"", $s);","s = ""lorem ipsum""
assert_match(/lorem/, s)"
exception assertion,,,,"a = []
with self.assertRaises(IndexError):
 a[0]","class Bam extends Exception {};

public function test_exc {
 $this->SetExpectedException(""Bam"");
 throw new Bam(""bam!"");
}","assert_raises(ZeroDivisionError) do
 1 / 0
end"
mock method,,,,"# added in Python 3.3:
from unittest import mock

foo = Foo()
foo.run = mock.MagicMock(return_value=7)

self.assertEqual(7, foo.run(13))
foo.run.assert_called_once_with(13)","$mock = $this->getMock('Foo', ['foo']);
$mock->expects($this->once())
 ->method('foo')
 ->with(13)
 ->will($this->returnValue(7));

$mock->foo(13);","# gem install mocha
require 'mocha'

foo = mock()
foo.expects(:run).returns(7).with(13).once

foo.run(13)"
setup,"exports.setUp = function(callback) {
 console.log('setting up...');
 callback();
}",,,"# in class TestFoo:
def setUp(self):
 print('setting up')","public function setUp()
{
 echo ""setting up\n"";
}","# in class TestFoo:
def setup
 puts ""setting up""
end"
teardown,"exports.tearDown = function(callback) {
 console.log('tearing down...');
 callback();
}",,,"# in class TestFoo:
def tearDown(self):
 print('tearing down')","public function tearDown()
{
 echo ""tearing down\n"";
}","# in class TestFoo:
def teardown
 puts ""tearing down""
end"
debugging,,,,,,
,node.js,,,python,php,ruby
check syntax,$ node -c foo.js,,,"import py_compile

# precompile to bytecode:
py_compile.compile('foo.py')",$ php -l foo.php,$ ruby -c foo.rb
check for errors,"$ npm install -g semistandard
$ semistandard foo.js",,,"$ sudo pip install pylint
$ pylint foo.py",,"$ sudo gem install rubocop
$ rubocop -D foo.rb"
check style,"$ npm install -g semistandard
$ semistandard foo.js",,,"$ sudo pip install pep8
$ pep8 foo.py",,"$ sudo gem install rubocop
$ rubocop -D foo.rb"
run debugger,$ node debug foo.js,,,$ python -m pdb foo.py,,"$ sudo gem install ruby-debug
$ rdebug foo.rb"
benchmark code,"console.time('product');
let n = 1;
for (let i = 1; i < 1000*1000; ++i) {
 ++n;
}
console.timeEnd('product');",,,"import timeit

timeit.timeit('i += 1',
 'i = 0',
 number=1000000)",,"require 'benchmark'

n = 1_000_000
i = 0
puts Benchmark.measure do
 n.times { i += 1 }
end"
profile code,"$ node --prof foo.js
$ node --prof-process *v8.log",,,$ python -m cProfile foo.py,,"$ sudo gem install ruby-prof
$ ruby-prof foo.rb"
,____________________________________________________,,,____________________________________________________,____________________________________________________,____________________________________________________
,,,,,,
Streams,,,,,,
,,,,,,
read line from stdin,,,,,,
,,,,,,
How to read a line from standard input.,,,,,,
,,,,,,
The illustrated function read the standard input stream until a end-of-line marker is found or the end of the stream is encountered. Only in the former case will the returned string be terminated by an end-of-line marker.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
"fgets takes an optional second parameter to specify the maximum line length. If the length limit is encountered before a newline, the string returned will not be newline terminated.",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"gets takes an optional parameter to specify the maximum line length. If the length limit is encountered before a newline, the string returned will not be newline terminated.",,,,,,
,,,,,,
There are both global variable and constant names for the standard file handles:,,,,,,
,,,,,,
$stdin,STDIN,,,,,
$stdout,STDOUT,,,,,
$stderr,STDERR,,,,,
,,,,,,
remove end-of-line,,,,,,
,,,,,,
"Remove a newline, carriage return, or carriage return newline pair from the end of a line if there is one.",,,,,,
,,,,,,
php:,,,,,,
,,,,,,
chop removes all trailing whitespace. It is an alias for rtrim.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
Python strings are immutable. rstrip returns a modified copy of the string. rstrip('\r\n') is not identical to chomp because it removes all contiguous carriage returns and newlines at the end of the string.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
chomp! modifies the string in place. chomp returns a modified copy.,,,,,,
,,,,,,
write to stdout,,,,,,
,,,,,,
How to write a line to standard out. The line will be terminated by an operating system appropriate end of line marker.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"print appends a newline to the output. To suppress this behavior, put a trailing comma after the last argument. If given multiple arguments, print joins them with spaces.",,,,,,
,,,,,,
In Python 2 print parses as a keyword and parentheses are not required:,,,,,,
,,,,,,
"print ""Hello, World!""",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
puts appends a newline to the output. print does not.,,,,,,
,,,,,,
write format to stdout,,,,,,
,,,,,,
How to format variables and write them to standard out.,,,,,,
,,,,,,
The function printf from the C standard library is a familiar example. It has a notation for format strings which uses percent signs %. Many other languages provide an implementation of printf.,,,,,,
,,,,,,
write to stderr,,,,,,
,,,,,,
How to write a string to standard out.,,,,,,
,,,,,,
open file for reading,,,,,,
,,,,,,
How to open a file for reading.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"The open function returns an IO object with a read method which returns str objects. In Python 3, these are strings of Unicode characters, but in Python 2 they are arrays of bytes.",,,,,,
,,,,,,
"In Python 2, to get an IO object with a read method which returns unicode objects, use codecs.open():",,,,,,
,,,,,,
import codecs,,,,,,
"f = codecs.open('/etc/hosts', encoding='utf-8')",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"When File.open is given a block, the file is closed when the block terminates.",,,,,,
,,,,,,
open for reading bytes,,,,,,
,,,,,,
read line,,,,,,
,,,,,,
How to read up to the next newline in a file.,,,,,,
,,,,,,
iterate by line,,,,,,
,,,,,,
How to iterate over a file line by line.,,,,,,
,,,,,,
read file into string,,,,,,
,,,,,,
How to put the contents of a file into a single string.,,,,,,
,,,,,,
read file into array of string,,,,,,
,,,,,,
How to put the lines of a file into an array of strings.,,,,,,
read fixed length,,,,,,
How to read up to a pre-specified number of bytes or characters from a file.,,,,,,
node:,,,,,,
Node allows reading a pre-specified max number of bytes. It is possible that the last byte can be an incomplete part of a character. buf.toString('utf-8') returns a malformed string with an incomplete character at the end.,,,,,,
"readSync() returns the number of bytes read. If this is less than the length of the buffer, then the remaining bytes are not overwritten.",,,,,,
Buffer.alloc can take an optional 2nd arg to indicate the fill byte value; the bytes are zero-filled by default.,,,,,,
read char,,,,,,
How to read a character from a stream.,,,,,,
All the languages in this stream represent characters with strings of length one.,,,,,,
read serialized data,,,,,,
"How to read serialized data from a file, using a language-specific serialization method.",,,,,,
open for writing,,,,,,
How to open a file for writing. If the file exists its contents will be overwritten.,,,,,,
open for writing bytes,,,,,,
open for appending,,,,,,
How to open a file with the seek point at the end of the file. If the file exists its contents will be preserved.,,,,,,
write string,,,,,,
How to write a string to a file handle.,,,,,,
write line,,,,,,
How to write a line to a file handle. An operating system appropriate end-of-line marker is appended to the output.,,,,,,
**php:,,,,,,
Newlines in strings are translated to the operating system appropriate line terminator unless the file handle was opened with a mode string that contained 'b'.,,,,,,
python:,,,,,,
"When file handles are opened with the mode strings 'r', 'w', or 'a', the file handle is in text mode. In text mode the operating system line terminator is translated to '\n' when reading and '\n' is translated back to the operating system line terminator when writing. The standard file handles sys.stdin, sys.stdout, and sys.stderr are opened in text mode.",,,,,,
"When file handles are opened with the mode strings 'rb', 'rw', or 'ra', the file handle is in binary mode and line terminator translation is not performed. The operating system line terminator is available in os.linesep.",,,,,,
write format,,,,,,
write char,,,,,,
write serialized data,,,,,,
close,,,,,,
How to close an open file.,,,,,,
close on block exit,,,,,,
How to have an open file closed when a block is exited.,,,,,,
python:,,,,,,
"File handles are closed when the variable holding them is garbage collected, but there is no guarantee when or if a variable will be garbage collected.",,,,,,
ruby:,,,,,,
"File handles are closed when the variable holding them is garbage collected, but there is no guarantee when or if a variable will be garbage collected.",,,,,,
flush,,,,,,
How to flush a file handle that has been written to.,,,,,,
"File handles often have buffering built into them. A buffer collects the result of multiple writes and the data is later written to disk with a single system call write. A flush ensures that the data is on disk, or at least in the operating system disk cache, so that other processes can see it.",,,,,,
position,,,,,,
How to get or set the file handle seek point.,,,,,,
The seek point is where the next read on the file handle will begin. The seek point is measured in bytes starting from zero.,,,,,,
open temporary file,,,,,,
How to get a file handle to a file that will be removed automatically sometime between when the file handle is closed and the interpreter exits.,,,,,,
The file is guaranteed not to have existed before it was opened.,,,,,,
The file handle is opened for both reading and writing so that the information written to the file can be recovered by seeking to the beginning of the file and reading from the file handle.,,,,,,
On POSIX operating systems it is possible to unlink a file after opening it. The file is removed from the directory but continues to exist as long as the file handle is open. This guarantees that no other process will be able to read or modify the file contents.,,,,,,
php:,,,,,,
Here is how to create a temporary file with a name:,,,,,,
"$path = tempnam(sys_get_temp_dir(), """");",,,,,,
"$f = fopen($path, ""w+"");",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"To unlink a temporary file on open, used TemporaryFile instead of NamedTemporaryFile:",,,,,,
,,,,,,
import tempfile,,,,,,
f = tempfile.TemporaryFile(),,,,,,
,,,,,,
open in memory file,,,,,,
,,,,,,
How to create a file descriptor which writes to an in-memory buffer.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
StringIO also supports the standard methods for reading input. To use them the client must first seek to the beginning of the in-memory file:,,,,,,
,,,,,,
f = StringIO(),,,,,,
f.write('lorem ipsum\n'),,,,,,
f.seek(0),,,,,,
r.read(),,,,,,
Asynchronous Events,,,,,,
Files,,,,,,
"file exists test, file regular test",,,,,,
"How to test whether a file exists; how to test whether a file is a regular file (i.e. not a directory, special device, or named pipe).",,,,,,
file size,,,,,,
How to get the file size in bytes.,,,,,,
"is file readable, writable, executable",,,,,,
"How to test whether a file is readable, writable, or executable.",,,,,,
python:,,,,,,
The flags can be or'ed to test for multiple permissions:,,,,,,
"os.access('/etc/hosts', os.R_OK | os.W_OK | os.X_OK)",,,,,,
,,,,,,
set file permissions,,,,,,
,,,,,,
How to set the permissions on the file.,,,,,,
,,,,,,
"For Perl, Python, and Ruby, the mode argument is in the same format as the one used with the Unix chmod command. It uses bitmasking to get the various permissions which is why it is normally an octal literal.",,,,,,
,,,,,,
"The mode argument should not be provided as a string such as ""0755"". Python and Ruby will raise an exception if a string is provided. Perl will convert ""0755"" to 755 and not 0755 which is equal to 493 in decimal.",,,,,,
,,,,,,
last modification time,,,,,,
,,,,,,
How to get the last modification time of a file.,,,,,,
,,,,,,
"For a regular file, the last modification time is the most recent time that the contents were altered.",,,,,,
,,,,,,
"For a directory, the last modification time is the most recent time that a file in the directory was added, removed, or renamed.",,,,,,
,,,,,,
"copy file, remove file, rename file",,,,,,
,,,,,,
How to copy a file; how to remove a file; how to rename a file.,,,,,,
,,,,,,
"create symlink, symlink test, readlink",,,,,,
,,,,,,
How to create a symlink; how to test whether a file is a symlink; how to get the target of a symlink.,,,,,,
,,,,,,
generate unused file name,,,,,,
,,,,,,
How to generate an unused file name. The file is created to avoid a race condition with another process looking for an unused file name.,,,,,,
,,,,,,
The file is not implicitly deleted.,,,,,,
,,,,,,
File Formats,,,,,,
,,,,,,
parse csv,,,,,,
,,,,,,
How to parse a CSV file and iterate through the rows.,,,,,,
,,,,,,
generate csv,,,,,,
,,,,,,
How to generate a CSV file from an array of tuples.,,,,,,
,,,,,,
parse json,,,,,,
,,,,,,
How to decode a string of JSON.,,,,,,
,,,,,,
"JSON data consists of objects, arrays, and JSON values. Objects are dictionaries in which the keys are strings and the values are JSON values. Arrays contain JSON values. JSON values can be objects, arrays, strings, numbers, true, false, or null.",,,,,,
,,,,,,
A JSON string is JSON data encoded using the corresponding literal notation used by JavaScript source code.,,,,,,
,,,,,,
JSON strings are sequences of Unicode characters. The following backslash escape sequences are supported:,,,,,,
,,,,,,
"\"" \\ \/ \b \f \n \r \t \uhhhh.",,,,,,
,,,,,,
generate json,,,,,,
,,,,,,
How to encode data as a JSON string.,,,,,,
,,,,,,
parse yaml,,,,,,
,,,,,,
How to parse a string of YAML.,,,,,,
,,,,,,
"YAML is sometimes used to serialize objects. Deserializing such YAML results in the constructor of the object being executed. The YAML decoding techniques illustrated here are ""safe"" in that they will not execute code, however.",,,,,,
,,,,,,
generate yaml,,,,,,
,,,,,,
How to generate a string of YAML.,,,,,,
,,,,,,
parse xml,,,,,,
,,,,,,
How to parse XML and extract nodes using XPath.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
Another way of handling an XPath expression which matches multiple nodes:,,,,,,
,,,,,,
"XPath.each(doc,""/a/b/c"") do |node|",,,,,,
puts node.text,,,,,,
end,,,,,,
,,,,,,
generate xml,,,,,,
,,,,,,
How to build an XML document.,,,,,,
,,,,,,
"An XML document can be constructed by concatenating strings, but the techniques illustrated here guarantee the result to be well-formed XML.",,,,,,
,,,,,,
parse html,,,,,,
,,,,,,
How to parse an HTML document.,,,,,,
,,,,,,
Directories,,,,,,
,,,,,,
working directory,,,,,,
,,,,,,
How to get and set the working directory.,,,,,,
,,,,,,
build pathname,,,,,,
,,,,,,
How to construct a pathname without hard coding the system file separator.,,,,,,
,,,,,,
dirname and basename,,,,,,
,,,,,,
How to extract the directory portion of a pathname; how to extract the non-directory portion of a pathname.,,,,,,
,,,,,,
absolute pathname,,,,,,
,,,,,,
How to get the get the absolute pathname for a pathname. If the pathname is relative the working directory will be appended.,,,,,,
,,,,,,
"In the examples provided, if /foo/bar is the working directory and .. is the relative path, then the return value is foo",,,,,,
,,,,,,
iterate over directory by file,,,,,,
,,,,,,
How to iterate through the files in a directory.,,,,,,
,,,,,,
"In PHP, Perl, and Ruby, the files representing the directory itself . and the parent directory .. are returned.",,,,,,
,,,,,,
php:,,,,,,
,,,,,,
"The code in the example will stop if a filename which evaluates as FALSE is encountered. One such filename is ""0"". A safer way to iterate through the directory is:",,,,,,
,,,,,,
"if ($dir = opendir(""/etc"")) {",,,,,,
while (FALSE !== ($file = readdir($dir))) {,,,,,,
"echo ""$file\n"";",,,,,,
},,,,,,
closedir($dir);,,,,,,
},,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"file() is the file handle constructor. file can be used as a local variable name but doing so hides the constructor. It can still be invoked by the synonym open(), however.",,,,,,
,,,,,,
os.listdir() does not return the special files . and .. which represent the directory itself and the parent directory.,,,,,,
,,,,,,
glob paths,,,,,,
,,,,,,
How to iterate over files using a glob pattern.,,,,,,
,,,,,,
Glob patterns employ these special characters:,,,,,,
,,,,,,
*,"matches zero or more characters, the first of which is not . and none of which is /",,,,,
?,matches one character,,,,,
[ ],matches one character from the list inside the brackets,,,,,
\,escapes one of the previous characters,,,,,
,,,,,,
Use glob patterns instead of simple directory iteration when,,,,,,
,,,,,,
"dot files, including the directory itself (.) and the parent directory (..), should skipped",,,,,,
"a subset of the files in a directory, where the subset can be specified with a glob pattern, is desired",,,,,,
"files from multiple directories, where the directories can be specified with a glob pattern, are desired",,,,,,
the full pathnames of the files is desired,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
glob takes a second argument for flags. The flag GLOB_BRACE enables brace notation.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
glob.glob returns a list. glob.iglob accepts the same arguments and returns an iterator.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
Ruby globs support brace notation.,,,,,,
,,,,,,
A brace expression matches any of the comma separated strings inside the braces.,,,,,,
,,,,,,
"Dir.glob(""/{bin,etc,usr}/*"").each do |path|",,,,,,
puts path,,,,,,
end,,,,,,
,,,,,,
make directory,,,,,,
,,,,,,
How to create a directory.,,,,,,
,,,,,,
"If needed, the examples will create more than one directory.",,,,,,
,,,,,,
"No error will result if a directory at the pathname already exists. An exception will be raised if the pathname is occupied by a regular file, however.",,,,,,
,,,,,,
recursive copy,,,,,,
,,,,,,
"How to perform a recursive copy. If the source is a directory, then the directory and all its contents will be copied.",,,,,,
,,,,,,
remove empty directory,,,,,,
,,,,,,
How to remove an empty directory. The operation will fail if the directory is not empty.,,,,,,
,,,,,,
remove directory and contents,,,,,,
,,,,,,
How to remove a directory and all its contents.,,,,,,
,,,,,,
directory test,,,,,,
,,,,,,
How to determine if a pathname is a directory.,,,,,,
,,,,,,
generate unused directory,,,,,,
,,,,,,
How to generate an unused directory. The directory is created to avoid a race condition with another process looking for an unused directory.,,,,,,
,,,,,,
The directory is not implicitly deleted.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
When Dir.mktmpdir is provided with a block the directory is deleted after the block finishes executing:,,,,,,
,,,,,,
require 'tmpdir',,,,,,
require 'fileutils',,,,,,
"Dir.mktmpdir(""/tmp/foo"") do |path|",,,,,,
puts path,,,,,,
"FileUtils.cp(""/etc/hosts"", ""#{path}/hosts"")",,,,,,
end,,,,,,
,,,,,,
system temporary file directory,,,,,,
,,,,,,
The name of the system provided directory for temporary files.,,,,,,
,,,,,,
"On Linux the directory is often /tmp, and the operating system is often configured to delete the contents of /tmp at boot.",,,,,,
,,,,,,
Processes and Environment,,,,,,
,,,,,,
command line arguments,,,,,,
,,,,,,
How to access arguments provided at the command line when the script was run; how to get the name of the script.,,,,,,
,,,,,,
environment variable,,,,,,
,,,,,,
How to get and set an environment variable. If an environment variable is set the new value is inherited by child processes.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
putenv returns a boolean indicating success. The command can fail because when PHP is running in safe mode only some environment variables are writable.,,,,,,
,,,,,,
"get pid, parent pid",,,,,,
,,,,,,
How to get the process id of the interpreter process; how to get the id of the parent process.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
The process pid is also available in the global variable $$.,,,,,,
,,,,,,
user id and name,,,,,,
,,,,,,
How to get the user id of the interpreter process; how to get the username associated with the user id.,,,,,,
,,,,,,
"When writing a setuid application on Unix, there is a distinction between the real user id and the effective user id. The code examples return the real user id.",,,,,,
,,,,,,
"The process may be able to determine the username by inspecting environment variables. A POSIX system is required to set the environment variable LOGNAME at login. Unix systems often set USER at login, and Windows systems set %USERNAME%. There is nothing to prevent the user from altering any of these environment variables after login. The methods illustrated in the examples are thus more secure.",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
How to get the effective user id:,,,,,,
,,,,,,
os.geteuid(),,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
How to get the effective user id:,,,,,,
,,,,,,
Process.euid,,,,,,
,,,,,,
exit,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
It is possible to register code to be executed upon exit:,,,,,,
,,,,,,
import atexit,,,,,,
"atexit.register(print, ""goodbye"")",,,,,,
,,,,,,
It is possible to terminate a script without executing registered exit code by calling os._exit.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
It is possible to register code to be executed upon exit:,,,,,,
,,,,,,
"at_exit { puts ""goodbye"" }",,,,,,
,,,,,,
The script can be terminated without executing registered exit code by calling exit!.,,,,,,
,,,,,,
set signal handler,,,,,,
,,,,,,
How to register a signal handling function.,,,,,,
,,,,,,
external command,,,,,,
,,,,,,
How to execute an external command.,,,,,,
,,,,,,
shell-escaped external command,,,,,,
,,,,,,
How to prevent shell injection.,,,,,,
,,,,,,
command substitution,,,,,,
,,,,,,
How to invoke an external command and read its output into a variable.,,,,,,
,,,,,,
The use of backticks for this operation goes back to the Bourne shell (1977).,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
A more concise solution is:,,,,,,
,,,,,,
file = os.popen('ls -l /tmp').read(),,,,,,
,,,,,,
os.popen was marked as deprecated in Python 2.6 but it is still available in Python 2.7 and Python 3.2.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"%x can be used with any delimiter. If the opening delimiter is (, [, or {, the closing delimiter must be ), ], or }.",,,,,,
,,,,,,
Option Parsing,,,,,,
,,,,,,
How to process command line options.,,,,,,
,,,,,,
We describe the style used by getopt_long from the C standard library. The characteristics of this style are:,,,,,,
,,,,,,
Options can be short or long. Short options are a single character preceded by a hyphen. Long options are a word preceded by two hyphens.,,,,,,
A double hyphen by itself can be used to terminate option processing. Arguments after the double hyphen are treated as positional arguments and can start with a hyphen.,,,,,,
Options can be declared to be with or without argument. Options without argument are used to set a boolean value to true.,,,,,,
Short options without argument can share a hyphen.,,,,,,
"Long options can be separated from their argument by a space or an equals sign (=). Short options can be separated from their argument by nothing, a space, or an equals sign (=).",,,,,,
,,,,,,
"The option processing function should identify the positional arguments. These are the command line arguments which are not options, option arguments, or the double hyphen used to terminate option processing. getopt_long permits options to occur after positional arguments.",,,,,,
,,,,,,
boolean flag,,,,,,
,,,,,,
How to define a option flag which sets a boolean variable.,,,,,,
,,,,,,
string option,,,,,,
,,,,,,
How to define an option flag which takes an argument and sets a string variable.,,,,,,
,,,,,,
numeric option,,,,,,
,,,,,,
How to define an option flag which takes an argument and sets a numeric variable.,,,,,,
,,,,,,
unrecognized option behavior,,,,,,
,,,,,,
required option,,,,,,
,,,,,,
default option,,,,,,
,,,,,,
delimited options,,,,,,
,,,,,,
repeated options,,,,,,
,,,,,,
positional parameters,,,,,,
,,,,,,
positional parameters as array,,,,,,
,,,,,,
usage,,,,,,
,,,,,,
subcommand,,,,,,
,,,,,,
Libraries and Namespaces,,,,,,
,,,,,,
Terminology used in this sheet:,,,,,,
,,,,,,
"library: code in its own file that can be included, loaded, or linked by client code.",,,,,,
client: code which calls code in a separate file.,,,,,,
top-level file or top-level script: the file containing the code in the program which executes first.,,,,,,
load: to add definitions in a file to the text of a running process.,,,,,,
namespace: a set of names that can be imported as a unit.,,,,,,
import: to add definitions defined elsewhere to a scope.,,,,,,
unqualified import: to add definitions to a scope using the same identifiers as where they are defined.,,,,,,
qualified import: to add definitions to a scope. The identifiers in the scope are derived from the original identifiers in a formulaic manner. Usually the name of the namespace is added as a prefix.,,,,,,
label: one of the parts of a qualified identifier.,,,,,,
alias import: to add a definition to a scope under an identifier which is specified in the import statement.,,,,,,
package: one or more libraries that can be installed by a package manager.,,,,,,
load library,,,,,,
Execute the specified file. Normally this is used on a file which only contains declarations at the top level.,,,,,,
php:,,,,,,
include_once behaves like require_once except that it is not fatal if an error is encountered executing the library.,,,,,,
load library in subdirectory,,,,,,
How to load a library in a subdirectory of the library path.,,,,,,
hot patch,,,,,,
How to reload a library. Altered definitions in the library will replace previous versions of the definition.,,,,,,
php:,,,,,,
Also include.,,,,,,
load error,,,,,,
How errors which are encountered while loading libraries are handled.,,,,,,
main routine in library,,,,,,
How to put code in a library which executes only when the file is run as a top-level script.,,,,,,
library path,,,,,,
The library path is a list of directory paths which are searched when loading libraries.,,,,,,
library path environment variable,,,,,,
How to augment the library path by setting an environment variable before invoking the interpreter.,,,,,,
library path command line option,,,,,,
How to augment the library path by providing a command line option when invoking the interpreter.,,,,,,
simple global identifiers,,,,,,
multiple label identifiers,,,,,,
label separator,,,,,,
The punctuation used to separate the labels in the full name of a subnamespace.,,,,,,
root namespace definition,,,,,,
namespace declaration,,,,,,
How to declare a section of code as belonging to a namespace.,,,,,,
subnamespace declaration,,,,,,
How to declare a section of code as belonging to a subnamespace.,,,,,,
import namespace,,,,,,
import subnamespace,,,,,,
import all definitions in namespace,,,,,,
How to import all the definitions in a namespace.,,,,,,
import definitions,,,,,,
How to import specific definitions from a namespace.,,,,,,
"list installed packages, install a package",,,,,,
"How to show the installed 3rd party packages, and how to install a new 3rd party package.",,,,,,
python,,,,,,
Two ways to list the installed modules and the modules in the standard library:,,,,,,
$ pydoc modules,,,,,,
$ python,,,,,,
>>> help('modules'),,,,,,
,,,,,,
"Most 3rd party Python code is packaged using distutils, which is in the Python standard library. The code is placed in a directory with a setup.py file. The code is installed by running the Python interpreter on setup.py:",,,,,,
,,,,,,
package specification format,,,,,,
,,,,,,
The format of the file used to specify a package.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
distutils.core reference,,,,,,
,,,,,,
How to create a Python package using distutils. Suppose that the file foo.py contains the following code:,,,,,,
,,,,,,
"def add(x, y):",,,,,,
return x+y,,,,,,
,,,,,,
In the same directory as foo.py create setup.py with the following contents:,,,,,,
,,,,,,
#!/usr/bin/env python,,,,,,
from distutils.core import setup,,,,,,
"setup(name='foo',",,,,,,
"version='1.0',",,,,,,
"py_modules=['foo'],",,,,,,
),,,,,,
,,,,,,
Create a tarball of the directory for distribution:,,,,,,
,,,,,,
$ tar cf foo-1.0.tar foo,,,,,,
$ gzip foo-1.0.tar,,,,,,
,,,,,,
"To install a tar, perform the following:",,,,,,
,,,,,,
$ tar xf foo-1.0.tar.gz,,,,,,
$ cd foo,,,,,,
$ sudo python setup.py install,,,,,,
,,,,,,
"If you want people to be able to install the package with pip, upload the tarball to the Python Package Index.",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
gemspec attributes,,,,,,
,,,,,,
"For an example of how to create a gem, create a directory called foo. Inside it create a file called lib/foo.rb which contains:",,,,,,
,,,,,,
"def add(x, y)",,,,,,
x + y,,,,,,
end,,,,,,
,,,,,,
Then create a file called foo.gemspec containing:,,,,,,
,,,,,,
spec = Gem::Specification.new do |s|,,,,,,
s.name = 'foo',,,,,,
s.authors = 'Joe Foo',,,,,,
s.version = '1.0',,,,,,
s.summary = 'a gem',,,,,,
s.files = Dir['lib/*.rb'],,,,,,
end,,,,,,
,,,,,,
"To create the gem, run this command:",,,,,,
,,,,,,
$ gem build foo.gemspec,,,,,,
,,,,,,
A file called foo-1.0.gem is created. To install foo.rb run this command:,,,,,,
,,,,,,
$ gem install foo-1.0.gem,,,,,,
,,,,,,
Objects,,,,,,
,,,,,,
"An object is a set of functions called methods which have shared access to the object's instance variables. An object's methods and instance variables are collectively called its members. If a member of an object can be accessed or invoked by code which is not in a member of the object, it is public. Otherwise it is private.",,,,,,
,,,,,,
"A class is a set of objects which have the same method definitions. The objects in the set are instances of the class. Functions defined in the class namespace which are not object methods are called class methods. A class method which returns instances of the class is called a factory method. If there is class method which is responsible for creating all instances, it is called a constructor. The existence of a constructor does not preclude the existence of other factory methods since they can invoke the constructor and return its return value.",,,,,,
,,,,,,
A class may contain class variables. These are global variables defined in the namespace of the class.,,,,,,
,,,,,,
A method which returns the value of an instance variable is called a getter. A method which sets the value of an instance variable is called a setter. Getters and setters and seem pointless at first blush as one could make the underlying instance variable public instead. In practice getters and setters make code more maintainable. Consistent use of getters and setters conforms with the Uniform Access Principle and makes the API presented by an object to its clients simpler.,,,,,,
,,,,,,
"Perl instance variables are private, so Perl enforces a good practice at the cost of requiring boilerplate code for defining getters and setters.",,,,,,
,,,,,,
"Python instance variables are public. Although this permits concise class definitions, a maintainer of a Python class may find it difficult to replace an instance variable with a derived value when clients are accessing the instance variable directly. With an old-style Python class, the maintainer can't make the change without breaking the client code. With a new-style class the maintainer can replace an instance variable with a getter and setter and mark them with the @property decorator.",,,,,,
,,,,,,
"Ruby, like Perl, has private instance variables. It has the directives attr_reader, attr_writer, and attr_accessor for defining getters and setters. Ruby classes are objects and in particular they are instances of the Module class. The directives attr_reader, attr_writer, and attr_accessor are instance methods defined in the Module class which execute when the class block executes.",,,,,,
,,,,,,
define class,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
"Properties (i.e. instance variables) must be declared public, protected, or private. Methods can optionally be declared public, protected, or private. Methods without a visibility modifier are public.",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"As of Python 2.2, classes are of two types: new-style classes and old-style classes. The class type is determined by the type of class(es) the class inherits from. If no superclasses are specified, then the class is old-style. As of Python 3.0, all classes are new-style.",,,,,,
,,,,,,
New-style classes have these features which old-style classes don't:,,,,,,
,,,,,,
universal base class called object.,,,,,,
descriptors and properties. Also the __getattribute__ method for intercepting all attribute access.,,,,,,
"change in how the diamond problem is handled. If a class inherits from multiple parents which in turn inherit from a common grandparent, then when checking for an attribute or method, all parents will be checked before the grandparent.",,,,,,
,,,,,,
create object,,,,,,
,,,,,,
How to create an object.,,,,,,
,,,,,,
get and set attribute,,,,,,
,,,,,,
How to get and set an attribute.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
Defining explicit setters and getters in Python is considered poor style. Extra logic can be achieved without disrupting the clients of the class by creating a property:,,,,,,
,,,,,,
def getValue(self):,,,,,,
"print(""getValue called"")",,,,,,
return self.__dict__['value'],,,,,,
"def setValue(self,v):",,,,,,
"print(""setValue called"")",,,,,,
self.__dict__['value'] = v,,,,,,
"value = property(fget=getValue, fset = setValue)",,,,,,
,,,,,,
instance variable visibility,,,,,,
,,,,,,
How instance variable access works.,,,,,,
,,,,,,
define method,,,,,,
,,,,,,
How to define a method.,,,,,,
,,,,,,
invoke method,,,,,,
,,,,,,
How to invoke a method.,,,,,,
,,,,,,
destructor,,,,,,
,,,,,,
How to define a destructor.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"A Python destructor is not guaranteed to be called when all references to an object go out of scope, but apparently this is how the CPython implementations work.",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
"Ruby lacks a destructor. It is possible to register a block to be executed before the memory for an object is released by the garbage collector. A ruby interpreter may exit without releasing memory for objects that have gone out of scope and in this case the finalizer will not get called. Furthermore, if the finalizer block holds on to a reference to the object, it will prevent the garbage collector from freeing the object.",,,,,,
,,,,,,
method missing,,,,,,
,,,,,,
How to handle when a caller invokes an undefined method.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
Define the method __callStatic to handle calls to undefined class methods.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"__getattr__ is invoked when an attribute (instance variable or method) is missing. By contrast, __getattribute__, which is only available in Python 3, is always invoked, and can be used to intercept access to attributes that exist. __setattr__ and __delattr__ are invoked when attempting to set or delete attributes that don't exist. The del statement is used to delete an attribute.",,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
Define the method self.method_missing to handle calls to undefined class methods.,,,,,,
,,,,,,
define class method,,,,,,
,,,,,,
invoke class method,,,,,,
,,,,,,
How to invoke a class method.,,,,,,
,,,,,,
define class variable,,,,,,
,,,,,,
get and set class variable,,,,,,
,,,,,,
method alias,,,,,,
,,,,,,
How to create an alias for a method.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
Ruby provides the keyword alias and the method alias_method in the class Module. Inside a class body they behave idenitically. When called from inside a method alias has no effect but alias_method works as expected. Hence some recommend always using alias_method.,,,,,,
,,,,,,
subclass,,,,,,
,,,,,,
A subclass is a class whose objects contain all of the methods from another class called the superclass. Objects in the subclass should in principle be usable anywhere objects in the superclass can be used. The subclass may have extra methods which are not found in the superclass. Moreover it may replace method definitions in the superclass with its own definitions provided the signature remains the same. This is called overriding.,,,,,,
,,,,,,
It is sometimes useful to define superclass which is never instantiated. Such a class is called an abstract class. An abstract class is way to share code between two or more subclasses or to define the API that two or more subclasses should implement.,,,,,,
,,,,,,
Reflection,,,,,,
,,,,,,
object id,,,,,,
,,,,,,
How to get an identifier for an object or a value.,,,,,,
,,,,,,
inspect type,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
The PHP manual says that the strings returned by gettype are subject to change and advises using the following predicates instead:,,,,,,
,,,,,,
is_null,,,,,,
is_bool,,,,,,
is_numeric,,,,,,
is_int,,,,,,
is_float,,,,,,
is_string,,,,,,
is_array,,,,,,
is_object,,,,,,
is_resource,,,,,,
,,,,,,
All possible return values of gettype are listed.,,,,,,
,,,,,,
basic types,,,,,,
,,,,,,
inspect class,,,,,,
,,,,,,
How to get the class of an object.,,,,,,
,,,,,,
javascript:,,,,,,
,,,,,,
inspect class hierarchy,,,,,,
,,,,,,
has method?,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"hasattr(o,'reverse') will return True if there is an instance variable named 'reverse'.",,,,,,
,,,,,,
message passing,,,,,,
,,,,,,
javascript:,,,,,,
,,,,,,
The following works in Firefox:,,,,,,
,,,,,,
var o = {},,,,,,
o.__noSuchMethod__ = function(name) { alert('you called ' + name) },,,,,,
o.whoopsie(),,,,,,
,,,,,,
eval,,,,,,
,,,,,,
How to interpret a string as code and return its value.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
"The value of the string is the value of of the return statement that terminates execution. If execution falls off the end of the string without encountering a return statement, the eval evaluates as NULL.",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
The argument of eval must be an expression or a SyntaxError is raised. The Python version of the mini-REPL is thus considerably less powerful than the versions for the other languages. It cannot define a function or even create a variable via assignment.,,,,,,
,,,,,,
list object methods,,,,,,
,,,,,,
list object attributes,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
dir(o) returns methods and instance variables.,,,,,,
,,,,,,
pretty print,,,,,,
,,,,,,
How to display the contents of a data structure for debugging purposes.,,,,,,
,,,,,,
source line number and file name,,,,,,
,,,,,,
How to get the current line number and file name of the source code.,,,,,,
,,,,,,
command line documentation,,,,,,
,,,,,,
How to get documentation from the command line.,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
Searching for Math.atan2 will return either class method or instance method documentation. If there is documentation for both one can be specific with the following notation:,,,,,,
,,,,,,
$ ri Math::atan2,,,,,,
$ ri Math#atan2,,,,,,
,,,,,,
Net and Web,,,,,,
,,,,,,
"get local hostname, dns lookup, reverse dns lookup",,,,,,
,,,,,,
How to get the hostname and the ip address of the local machine without connecting to a socket.,,,,,,
,,,,,,
The operating system should provide a method for determining the hostname. Linux provides the uname system call.,,,,,,
,,,,,,
A DNS lookup can be performed to determine the IP address for the local machine. This may fail if the DNS server is unaware of the local machine or if the DNS server has incorrect information about the local host.,,,,,,
,,,,,,
A reverse DNS lookup can be performed to find the hostname associated with an IP address. This may fail for the same reasons a forward DNS lookup might fail.,,,,,,
,,,,,,
http get,,,,,,
,,,,,,
How to make an HTTP GET request and read the response into a string.,,,,,,
,,,,,,
http post,,,,,,
,,,,,,
serve working directory,,,,,,
,,,,,,
A command line invocation to start a single process web server which serves the working directory at http://localhost:8000.,,,,,,
,,,,,,
$ sudo cpan -i IO::All,,,,,,
"$ perl -MIO::All -e 'io("":8000"")->fork->accept->(sub { $_[0] < io(-x $1 ? ""./$1 |"" : $1) if /^GET \/(.*) / })'",,,,,,
,,,,,,
absolute url,,,,,,
,,,,,,
How to construct an absolute URL from a base URL and a relative URL as documented in RFC 1808.,,,,,,
,,,,,,
"When constructing the absolute URL, the rightmost path component of the base URL is removed unless it ends with a slash /. The query string and fragment of the base URL are always removed.",,,,,,
,,,,,,
If the relative URL starts with a slash / then the entire path of the base URL is removed.,,,,,,
,,,,,,
If the relative URL starts with one or more occurrences of ../ then one or more path components are removed from the base URL.,,,,,,
,,,,,,
The base URL and the relative URL will be joined by a single slash / in the absolute URL.,,,,,,
,,,,,,
php:,,,,,,
,,,,,,
Here is a PHP function which computes absolute urls.,,,,,,
,,,,,,
parse url,,,,,,
,,,,,,
"How to extract the protocol, host, port, path, query string, and fragment from a URL. How to extract the parameters from the query string.",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
urlparse can also be used to parse FTP URLs:,,,,,,
,,,,,,
up = urlparse.urlparse('ftp://foo:bar@google.com/baz;type=binary'),,,,,,
# 'foo',,,,,,
up.username,,,,,,
# 'bar',,,,,,
up.password,,,,,,
# 'type=binary',,,,,,
up.params,,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
How to parse an FTP URL:,,,,,,
,,,,,,
up = URI('ftp://foo:bar@google.com/baz;type=binary'),,,,,,
"# ""foo""",,,,,,
up.user,,,,,,
# up.password,,,,,,
"""bar""",,,,,,
"# ""binary""",,,,,,
up.typecode,,,,,,
,,,,,,
url encode/decode,,,,,,
,,,,,,
How to URL encode and URL unencode a string.,,,,,,
,,,,,,
"URL encoding, also called percent encoding, is described in RFC 3986. It replaces all characters except for the letters, digits, and a few punctuation marks with a percent sign followed by their two digit hex encoding. The characters which are not escaped are:",,,,,,
,,,,,,
A-Z a-z 0-9 - _ . ~,,,,,,
,,,,,,
"URL encoding can be used to encode UTF-8, in which case each byte of a UTF-8 character is encoded separately.",,,,,,
,,,,,,
"When form data is sent from a browser to a server via an HTTP GET or an HTTP POST, the data is percent encoded but spaces are replaced by plus signs + instead of %20. The MIME type for form data is application/x-www-form-urlencoded.",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
"In Python 3 the functions quote_plus, unquote_plus, quote, and unquote moved from urllib to urllib.parse.",,,,,,
,,,,,,
urllib.quote replaces a space character with %20.,,,,,,
,,,,,,
urllib.unquote does not replace + with a space character.,,,,,,
,,,,,,
html escape,,,,,,
,,,,,,
How to escape special characters in HTML character data; how to escape special characters in HTML attribute values; how to unescape HTML entities.,,,,,,
,,,,,,
"In character data, such as what occurs in between a start and end tag, the characters <, >, and & must be replaced by &lt;, &gt;, and &amp;.",,,,,,
,,,,,,
"Attribute values in HTML tags must be quoted if they contain a space or any of the characters ""'`=<>. Attribute values can be double quoted or single quoted. Double quotes and single quotes can be escaped by using the HTMl entities &quot; and &apos;. It is not necessary to escape the characters <, >, and & inside quoted attribute values.",,,,,,
,,,,,,
php:,,,,,,
,,,,,,
"The flag ENT_NOQUOTES to the function htmlspecialchars causes double quotes "" to be escaped.",,,,,,
,,,,,,
The flag ENT_QUOTES causes single quotes ' to be escaped.,,,,,,
,,,,,,
base64 encode/decode,,,,,,
,,,,,,
How to encode binary data in ASCII using the Base64 encoding scheme.,,,,,,
,,,,,,
A popular Base64 encoding is the one defined by RFC 2045 for MIME. Every 3 bytes of input is mapped to 4 of these characters: [A-Za-z0-9/+].,,,,,,
"If the input does not consist of a multiple of three characters, then the output is padded with one or two hyphens: =.",,,,,,
,,,,,,
Whitespace can inserted freely into Base64 output; this is necessary to support transmission by email. When converting Base64 back to binary whitespace is ignored.,,,,,,
,,,,,,
Unit Databases,,,,,,
,,,,,,
Unit Tests,,,,,,
,,,,,,
test class,,,,,,
,,,,,,
How to define a test class and make a truth assertion.,,,,,,
,,,,,,
The argument of a truth assertion is typically an expression. It is a good practice to include a failure message as a second argument which prints out variables in the expression.,,,,,,
,,,,,,
run tests; run test method,,,,,,
,,,,,,
How to run all the tests in a test class; how to run a single test from the test class.,,,,,,
,,,,,,
equality assertion,,,,,,
,,,,,,
How to test for equality.,,,,,,
,,,,,,
python:,,,,,,
,,,,,,
Note that assertEquals does not print the values of its first two arguments when the assertion fails. A third argument can be used to provide a more informative failure message.,,,,,,
,,,,,,
approximate assertion,,,,,,
,,,,,,
How to assert that two floating point numbers are approximately equal.,,,,,,
,,,,,,
regex assertion,,,,,,
,,,,,,
How to test that a string matches a regex.,,,,,,
,,,,,,
exception assertion,,,,,,
,,,,,,
How to test whether an exception is raised.,,,,,,
,,,,,,
mock method,,,,,,
,,,,,,
How to create a mock method.,,,,,,
,,,,,,
"A mock method is used when calling the real method from a unit test would be undesirable. The method that is mocked is not in the code that is being tested, but rather a library which is used by that code. Mock methods can raise exceptions if the test fails to invoke them or if the wrong arguments are provided.",,,,,,
,,,,,,
python:,,,,,,
,,,,,,
assert_called_once_with can takes the same number of arguments as the method being mocked.,,,,,,
,,,,,,
"If the mock method was called multiple times, the method assert_called_with can be used in place of asert_called_once_with to make an assertion about the arguments that were used in the most recent call.",,,,,,
,,,,,,
A mock method which raises an exception:,,,,,,
,,,,,,
foo = Foo(),,,,,,
foo.run = mock.Mock(side_effect=KeyError('foo')),,,,,,
with self.assertRaises(KeyError):,,,,,,
foo.run(13),,,,,,
foo.run.assert_called_with(13),,,,,,
,,,,,,
ruby:,,,,,,
,,,,,,
The with method takes the same number of arguments as the method being mocked.,,,,,,
,,,,,,
"Other methods are available for use in the chain which defines the assertion. The once method can be replaced by never or twice. If there is uncertainty about how often the method will be called one can used at_least_once, at_least(m), at_most_once, at_most(n) to set lower or upper bounds. times(m..n) takes a range to set both the lower and upper bound.",,,,,,
,,,,,,
A mock method which raises an exception:,,,,,,
,,,,,,
foo = mock(),,,,,,
foo.expects(:run).,,,,,,
"raises(exception = RuntimeError, message = 'bam!').",,,,,,
with(13).,,,,,,
once,,,,,,
assert_raises(RuntimeError) do,,,,,,
foo.run(13),,,,,,
end,,,,,,
,,,,,,
There is also a method called yields which can be used in the chain which defines the assertion. It makes the mock method yield to a block. It takes as arguments the arguments it passes to the block.,,,,,,
,,,,,,
setup,,,,,,
,,,,,,
How to define a setup method which gets called before every test.,,,,,,
,,,,,,
teardown,,,,,,
,,,,,,
How to define a cleanup method which gets called after every test.,,,,,,
,,,,,,
Debugging,,,,,,
,,,,,,
check syntax,,,,,,
,,,,,,
How to check the syntax of code without executing it.,,,,,,
check for errors,,,,,,
How to perform static analysis on the code to detect probably errors.,,,,,,
check style,,,,,,
How to detect or remove semantically insignificant variation in the source code.,,,,,,
run debugger,,,,,,
How to run a script under the debugger.,,,,,,
debugger commands,,,,,,
A selection of commands available when running the debugger. The gdb commands are provided for comparison.,,,,,,
cmd,node debug,,,python -m pdb,rdebug,gdb
help,help,,,h,h,h
list,list(lines_of_context),,,"l [first, last]","l [first, last]","l [first, last]"
next statement,n,,,n,n,n
step into function,s,,,s,s,s
step out of function,o,,,,,
set breakpoint,"sb([file, ]line)",,,"b [file:]line
b function","b [file:]line
b class[.method]",b [file:]line
list breakpoints,breakpoints,,,b,info b,i b
delete breakpoint,"cb(file, line)",,,cl num,del num,d num
continue,c,,,c,c,c
show backtrace,bt,,,w,w,bt
move up stack,,,,u,u,u
move down stack,,,,d,down,do
print expression,"repl

Inside repl use console.log() to
print expression; ^C to exit.",,,p expr,p expr,p expr
(re)run,restart,,,"restart [arg1[, arg2 …]]","restart [arg1[, arg2 …]]","r [arg1[, arg2 …]]"
quit debugger,quit,,,q,q,q
,,,,,,
node:,,,,,,
,,,,,,
One can insert a breakpoint by adding this statement to the source code:,,,,,,
,,,,,,
debugger;,,,,,,
benchmark code,,,,,,
"How to run a snippet of code repeatedly and get the user, system, and total wall clock time.",,,,,,
profile code,,,,,,
How to run the interpreter on a script and get the number of calls and total execution time for each function or method.,,,,,,
issue tracker | content of this page licensed under creative commons attribution-sharealike 3.0,,,,,,